{
  "openapi": "3.0.0",
  "info": {
    "title": "Publix API",
    "version": "1.0.0",
    "description": "Plataforma SaaS B2B para gestão de leads e prospecção comercial",
    "contact": {
      "name": "API Support",
      "email": "support@leadsrapido.com.br"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Development server"
    },
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Development server"
    }
  ],
  "tags": [
    {
      "name": "Autenticação",
      "description": "Autenticação e autorização"
    },
    {
      "name": "Empresas",
      "description": "Operações relacionadas a empresas"
    },
    {
      "name": "Users",
      "description": "Gerenciamento de usuários"
    },
    {
      "name": "Leads",
      "description": "Gerenciamento de leads B2B"
    },
    {
      "name": "Campanhas",
      "description": "Campanhas de prospecção"
    },
    {
      "name": "Workers",
      "description": "Controle e monitoramento de workers em background"
    },
    {
      "name": "Feature Toggle",
      "description": "Controle de features e workers via toggles"
    },
    {
      "name": "System",
      "description": "Endpoints do sistema"
    },
    {
      "name": "Search Terms",
      "description": "Gerenciamento de termos de busca"
    },
    {
      "name": "Google Maps Scraping",
      "description": "Operações relacionadas ao scraping do Google Maps"
    },
    {
      "name": "Webhooks",
      "description": "Configuração e gerenciamento de webhooks"
    },
    {
      "name": "Dashboard",
      "description": "Métricas e analytics centralizados"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT Bearer token para autenticação de usuários"
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string",
            "description": "Mensagem de erro"
          },
          "message": {
            "type": "string",
            "description": "Mensagem adicional do erro (opcional)"
          },
          "details": {
            "type": "object",
            "description": "Detalhes adicionais do erro (opcional)"
          }
        },
        "required": [
          "success",
          "error",
          "success",
          "error"
        ]
      },
      "Status": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "operational",
              "maintenance",
              "error",
              "operational",
              "maintenance",
              "error"
            ]
          },
          "version": {
            "type": "string"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LeadId": {
        "type": "string",
        "format": "uuid",
        "description": "Identificador único do lead",
        "example": "550e8400-e29b-41d4-a716-446655440000"
      },
      "QualityScore": {
        "type": "integer",
        "minimum": 0,
        "maximum": 100,
        "description": "Score de qualificação do lead (0-100)",
        "example": 85
      },
      "LeadStatus": {
        "type": "string",
        "enum": [
          "NOVO",
          "CONTATADO",
          "QUALIFICADO",
          "PROPOSTA_ENVIADA",
          "GANHO",
          "PERDIDO"
        ],
        "description": "Status atual do lead",
        "example": "QUALIFICADO"
      },
      "FonteLead": {
        "type": "string",
        "enum": [
          "MANUAL",
          "WEBSITE",
          "LINKEDIN",
          "INDICACAO",
          "EVENTO",
          "OUTROS"
        ],
        "description": "Fonte/origem do lead",
        "example": "LINKEDIN"
      },
      "PorteEmpresa": {
        "type": "string",
        "enum": [
          "MEI",
          "Micro",
          "Pequena",
          "Média",
          "Grande"
        ],
        "description": "Porte da empresa",
        "example": "Pequena"
      },
      "EnderecoCompleto": {
        "type": "object",
        "properties": {
          "rua": {
            "type": "string",
            "description": "Nome da rua",
            "example": "Rua das Flores"
          },
          "numero": {
            "type": "string",
            "description": "Número do endereço",
            "example": "123"
          },
          "cidade": {
            "type": "string",
            "description": "Cidade",
            "example": "São Paulo"
          },
          "estado": {
            "type": "string",
            "description": "Estado",
            "example": "SP"
          },
          "cep": {
            "type": "string",
            "description": "CEP",
            "example": "01234-567"
          },
          "pais": {
            "type": "string",
            "description": "País",
            "example": "Brasil"
          },
          "latitude": {
            "type": "number",
            "format": "float",
            "description": "Latitude",
            "example": -23.55052
          },
          "longitude": {
            "type": "number",
            "format": "float",
            "description": "Longitude",
            "example": -46.633308
          }
        },
        "required": [
          "rua",
          "numero",
          "cidade",
          "estado",
          "cep",
          "pais"
        ]
      },
      "CreateLeadDTO": {
        "type": "object",
        "required": [
          "organizationId",
          "nomeEmpresa"
        ],
        "properties": {
          "organizationId": {
            "type": "string",
            "description": "ID da organização (multi-tenant)",
            "example": "org-123"
          },
          "nomeEmpresa": {
            "type": "string",
            "description": "Nome da empresa",
            "example": "Tech Solutions Ltda"
          },
          "nomeContato": {
            "type": "string",
            "description": "Nome do contato principal",
            "example": "João Silva"
          },
          "cargoContato": {
            "type": "string",
            "description": "Cargo do contato",
            "example": "Diretor de TI"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do contato",
            "example": "joao.silva@techsolutions.com"
          },
          "telefone": {
            "type": "string",
            "description": "Telefone do contato",
            "example": "(11) 99999-9999"
          },
          "linkedinUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL do LinkedIn",
            "example": "https://linkedin.com/in/joaosilva"
          },
          "siteEmpresa": {
            "type": "string",
            "format": "uri",
            "description": "Website da empresa",
            "example": "https://techsolutions.com"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ da empresa",
            "example": "12.345.678/0001-90"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atuação",
            "example": "Tecnologia da Informação"
          },
          "porteEmpresa": {
            "$ref": "#/components/schemas/PorteEmpresa"
          },
          "numFuncionarios": {
            "type": "integer",
            "description": "Número de funcionários",
            "example": 50
          },
          "receitaAnualEstimada": {
            "type": "number",
            "format": "float",
            "description": "Receita anual estimada (R$)",
            "example": 5000000
          },
          "endereco": {
            "$ref": "#/components/schemas/EnderecoCompleto"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags para categorização",
            "example": [
              "tecnologia",
              "startup",
              "sao-paulo"
            ]
          },
          "observacoes": {
            "type": "string",
            "description": "Observações adicionais",
            "example": "Empresa em crescimento, interessada em soluções de IA"
          },
          "fonte": {
            "$ref": "#/components/schemas/FonteLead"
          },
          "dadosOriginais": {
            "type": "object",
            "description": "Dados originais da fonte",
            "example": {
              "campaign_id": "camp-123",
              "source": "linkedin-ads"
            }
          },
          "custoAquisicao": {
            "type": "number",
            "format": "float",
            "description": "Custo de aquisição (R$)",
            "example": 150
          }
        }
      },
      "UpdateLeadDTO": {
        "type": "object",
        "properties": {
          "nomeContato": {
            "type": "string",
            "description": "Nome do contato principal",
            "example": "João Silva"
          },
          "cargoContato": {
            "type": "string",
            "description": "Cargo do contato",
            "example": "Diretor de TI"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do contato",
            "example": "joao.silva@techsolutions.com"
          },
          "telefone": {
            "type": "string",
            "description": "Telefone do contato",
            "example": "(11) 99999-9999"
          },
          "linkedinUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL do LinkedIn",
            "example": "https://linkedin.com/in/joaosilva"
          },
          "siteEmpresa": {
            "type": "string",
            "format": "uri",
            "description": "Website da empresa",
            "example": "https://techsolutions.com"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ da empresa",
            "example": "12.345.678/0001-90"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atuação",
            "example": "Tecnologia da Informação"
          },
          "porteEmpresa": {
            "$ref": "#/components/schemas/PorteEmpresa"
          },
          "numFuncionarios": {
            "type": "integer",
            "description": "Número de funcionários",
            "example": 50
          },
          "receitaAnualEstimada": {
            "type": "number",
            "format": "float",
            "description": "Receita anual estimada (R$)",
            "example": 5000000
          },
          "endereco": {
            "$ref": "#/components/schemas/EnderecoCompleto"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags para categorização",
            "example": [
              "tecnologia",
              "startup",
              "sao-paulo"
            ]
          },
          "observacoes": {
            "type": "string",
            "description": "Observações adicionais",
            "example": "Empresa em crescimento, interessada em soluções de IA"
          },
          "dadosOriginais": {
            "type": "object",
            "description": "Dados originais da fonte",
            "example": {
              "campaign_id": "camp-123",
              "source": "linkedin-ads"
            }
          },
          "custoAquisicao": {
            "type": "number",
            "format": "float",
            "description": "Custo de aquisição (R$)",
            "example": 150
          }
        }
      },
      "LeadFiltersDTO": {
        "type": "object",
        "properties": {
          "status": {
            "$ref": "#/components/schemas/LeadStatus"
          },
          "scoreMin": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100,
            "description": "Score mínimo",
            "example": 70
          },
          "scoreMax": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100,
            "description": "Score máximo",
            "example": 100
          },
          "segmento": {
            "type": "string",
            "description": "Filtrar por segmento",
            "example": "Tecnologia"
          },
          "porteEmpresa": {
            "$ref": "#/components/schemas/PorteEmpresa"
          },
          "fonte": {
            "$ref": "#/components/schemas/FonteLead"
          },
          "search": {
            "type": "string",
            "description": "Busca textual (nome empresa, contato, email)",
            "example": "Tech Solutions"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Filtrar por tags",
            "example": [
              "tecnologia",
              "startup"
            ]
          },
          "createdAfter": {
            "type": "string",
            "format": "date-time",
            "description": "Criado após esta data",
            "example": "2024-01-01T00:00:00Z"
          },
          "createdBefore": {
            "type": "string",
            "format": "date-time",
            "description": "Criado antes desta data",
            "example": "2024-12-31T23:59:59Z"
          }
        }
      },
      "PaginationDTO": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "minimum": 1,
            "default": 1,
            "description": "Página atual",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "default": 20,
            "description": "Itens por página",
            "example": 20
          },
          "sortBy": {
            "type": "string",
            "default": "createdAt",
            "description": "Campo para ordenação",
            "example": "createdAt"
          },
          "sortOrder": {
            "type": "string",
            "enum": [
              "asc",
              "desc"
            ],
            "default": "desc",
            "description": "Direção da ordenação",
            "example": "desc"
          }
        }
      },
      "LeadResponseDTO": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/LeadId"
          },
          "organizationId": {
            "type": "string",
            "description": "ID da organização",
            "example": "org-123"
          },
          "nomeEmpresa": {
            "type": "string",
            "description": "Nome da empresa",
            "example": "Tech Solutions Ltda"
          },
          "nomeContato": {
            "type": "string",
            "description": "Nome do contato principal",
            "example": "João Silva"
          },
          "cargoContato": {
            "type": "string",
            "description": "Cargo do contato",
            "example": "Diretor de TI"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do contato",
            "example": "joao.silva@techsolutions.com"
          },
          "telefone": {
            "type": "string",
            "description": "Telefone do contato",
            "example": "(11) 99999-9999"
          },
          "linkedinUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL do LinkedIn",
            "example": "https://linkedin.com/in/joaosilva"
          },
          "siteEmpresa": {
            "type": "string",
            "format": "uri",
            "description": "Website da empresa",
            "example": "https://techsolutions.com"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ da empresa",
            "example": "12.345.678/0001-90"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atuação",
            "example": "Tecnologia da Informação"
          },
          "porteEmpresa": {
            "$ref": "#/components/schemas/PorteEmpresa"
          },
          "numFuncionarios": {
            "type": "integer",
            "description": "Número de funcionários",
            "example": 50
          },
          "receitaAnualEstimada": {
            "type": "number",
            "format": "float",
            "description": "Receita anual estimada (R$)",
            "example": 5000000
          },
          "endereco": {
            "$ref": "#/components/schemas/EnderecoCompleto"
          },
          "status": {
            "$ref": "#/components/schemas/LeadStatus"
          },
          "scoreQualificacao": {
            "$ref": "#/components/schemas/QualityScore"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags para categorização",
            "example": [
              "tecnologia",
              "startup",
              "sao-paulo"
            ]
          },
          "observacoes": {
            "type": "string",
            "description": "Observações adicionais",
            "example": "Empresa em crescimento, interessada em soluções de IA"
          },
          "fonte": {
            "$ref": "#/components/schemas/FonteLead"
          },
          "dadosOriginais": {
            "type": "object",
            "description": "Dados originais da fonte",
            "example": {
              "campaign_id": "camp-123",
              "source": "linkedin-ads"
            }
          },
          "custoAquisicao": {
            "type": "number",
            "format": "float",
            "description": "Custo de aquisição (R$)",
            "example": 150
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data de criação",
            "example": "2024-08-31T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data de atualização",
            "example": "2024-08-31T15:45:00Z"
          }
        },
        "required": [
          "id",
          "organizationId",
          "nomeEmpresa",
          "fonte",
          "status",
          "scoreQualificacao",
          "createdAt",
          "updatedAt"
        ]
      },
      "PagedLeadResponse": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LeadResponseDTO"
            },
            "description": "Lista de leads"
          },
          "total": {
            "type": "integer",
            "description": "Total de itens",
            "example": 150
          },
          "page": {
            "type": "integer",
            "description": "Página atual",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "description": "Itens por página",
            "example": 20
          },
          "totalPages": {
            "type": "integer",
            "description": "Total de páginas",
            "example": 8
          },
          "hasNext": {
            "type": "boolean",
            "description": "Tem próxima página",
            "example": true
          },
          "hasPrev": {
            "type": "boolean",
            "description": "Tem página anterior",
            "example": false
          }
        },
        "required": [
          "items",
          "total",
          "page",
          "limit",
          "totalPages",
          "hasNext",
          "hasPrev"
        ]
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "Dados da resposta"
          },
          "message": {
            "type": "string",
            "description": "Mensagem de sucesso",
            "example": "Operação realizada com sucesso"
          }
        },
        "required": [
          "success"
        ]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "description": "Mensagem de erro",
            "example": "Dados inválidos"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "CreateEmpresaData": {
        "type": "object",
        "required": [
          "nome",
          "cnpj",
          "email"
        ],
        "properties": {
          "nome": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "description": "Nome da empresa",
            "example": "Tech Solutions Ltda"
          },
          "cnpj": {
            "type": "string",
            "pattern": "^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}\\-\\d{2}$",
            "description": "CNPJ da empresa (formato: 00.000.000/0000-00)",
            "example": "12.345.678/0001-90"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email da empresa",
            "example": "contato@techsolutions.com"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atuação",
            "example": "Tecnologia da Informação"
          },
          "recursos_interesse": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Recursos de interesse",
            "example": [
              "api",
              "dashboard",
              "relatórios"
            ]
          },
          "rua": {
            "type": "string",
            "description": "Rua",
            "example": "Rua das Flores"
          },
          "numero": {
            "type": "string",
            "description": "Número",
            "example": "123"
          },
          "bairro": {
            "type": "string",
            "description": "Bairro",
            "example": "Centro"
          },
          "cidade": {
            "type": "string",
            "description": "Cidade",
            "example": "São Paulo"
          },
          "estado": {
            "type": "string",
            "description": "Estado",
            "example": "SP"
          },
          "cep": {
            "type": "string",
            "description": "CEP",
            "example": "01234-567"
          }
        }
      },
      "UpdateEmpresaData": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "description": "Nome da empresa"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email da empresa"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atuação"
          },
          "recursos_interesse": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Recursos de interesse"
          },
          "rua": {
            "type": "string",
            "description": "Rua"
          },
          "numero": {
            "type": "string",
            "description": "Número"
          },
          "bairro": {
            "type": "string",
            "description": "Bairro"
          },
          "cidade": {
            "type": "string",
            "description": "Cidade"
          },
          "estado": {
            "type": "string",
            "description": "Estado"
          },
          "cep": {
            "type": "string",
            "description": "CEP"
          }
        }
      },
      "EmpresaResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID da empresa",
            "example": "emp-123"
          },
          "nome": {
            "type": "string",
            "description": "Nome da empresa",
            "example": "Tech Solutions Ltda"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ da empresa",
            "example": "12.345.678/0001-90"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email da empresa"
          },
          "saldo_creditos": {
            "type": "number",
            "description": "Saldo de créditos",
            "example": 1000
          },
          "api_key": {
            "type": "string",
            "description": "API Key da empresa"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atuação"
          },
          "recursos_interesse": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Recursos de interesse"
          },
          "rua": {
            "type": "string",
            "description": "Rua"
          },
          "numero": {
            "type": "string",
            "description": "Número"
          },
          "bairro": {
            "type": "string",
            "description": "Bairro"
          },
          "cidade": {
            "type": "string",
            "description": "Cidade"
          },
          "estado": {
            "type": "string",
            "description": "Estado"
          },
          "cep": {
            "type": "string",
            "description": "CEP"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de criação"
          }
        },
        "required": [
          "id",
          "nome",
          "cnpj",
          "email",
          "saldo_creditos",
          "api_key",
          "created_at"
        ]
      },
      "RegisterRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do usuário (será o login)",
            "example": "usuario@empresa.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "description": "Senha do usuário (mínimo 8 caracteres)",
            "example": "senha123"
          },
          "cnpj": {
            "type": "string",
            "pattern": "^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}\\-\\d{2}$",
            "description": "CNPJ da empresa (opcional - formato: 00.000.000/0000-00)",
            "example": "12.345.678/0001-90"
          },
          "empresa": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "description": "Nome da empresa (opcional)",
            "example": "Minha Empresa Ltda"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do usuário",
            "example": "usuario@empresa.com"
          },
          "password": {
            "type": "string",
            "description": "Senha do usuário",
            "example": "senha123"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ da empresa (opcional para login)",
            "example": "12.345.678/0001-90"
          },
          "empresa_id": {
            "type": "string",
            "description": "ID da empresa (opcional - deprecated, use cnpj)",
            "example": "emp-123"
          }
        }
      },
      "ResetPasswordRequest": {
        "type": "object",
        "required": [
          "email"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do usuário",
            "example": "usuario@empresa.com"
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "token": {
            "type": "string",
            "description": "JWT token de autenticação",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "ID do usuário",
                "example": "user-123"
              },
              "email": {
                "type": "string",
                "format": "email",
                "description": "Email do usuário"
              },
              "role": {
                "type": "string",
                "description": "Role do usuário",
                "example": "admin"
              },
              "empresa_id": {
                "type": "string",
                "description": "ID da empresa vinculada",
                "example": "emp-123"
              }
            }
          }
        },
        "required": [
          "success",
          "token",
          "user"
        ]
      },
      "RegisterResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Usuário e empresa criados com sucesso."
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "ID do usuário"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email do usuário"
                  }
                }
              },
              "empresa": {
                "type": "object",
                "nullable": true,
                "description": "Dados da empresa (null se não foi criada)",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "ID da empresa"
                  },
                  "nome": {
                    "type": "string",
                    "description": "Nome da empresa"
                  },
                  "cnpj": {
                    "type": "string",
                    "description": "CNPJ da empresa"
                  }
                }
              }
            }
          }
        },
        "required": [
          "success",
          "message",
          "data"
        ]
      },
      "UserResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID do usuário",
            "example": "user-123"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do usuário"
          },
          "nome": {
            "type": "string",
            "description": "Nome do usuário",
            "example": "João Silva"
          },
          "telefone": {
            "type": "string",
            "description": "Telefone do usuário",
            "example": "(11) 99999-9999"
          },
          "ativo": {
            "type": "boolean",
            "description": "Se o usuário está ativo",
            "example": true
          },
          "role": {
            "type": "string",
            "description": "Role do usuário",
            "example": "admin"
          },
          "empresa_id": {
            "type": "string",
            "description": "ID da empresa vinculada",
            "example": "emp-123"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de criação"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de atualização"
          }
        },
        "required": [
          "id",
          "email",
          "ativo",
          "role",
          "empresa_id",
          "created_at"
        ]
      },
      "CreateCampanhaData": {
        "type": "object",
        "required": [
          "nome",
          "tipo"
        ],
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome da campanha",
            "example": "Campanha LinkedIn Q1 2024"
          },
          "tipo": {
            "type": "string",
            "enum": [
              "scraping_web",
              "importacao_lista",
              "api_externa",
              "marketplace"
            ],
            "description": "Tipo da campanha",
            "example": "scraping_web"
          },
          "descricao": {
            "type": "string",
            "description": "Descrição da campanha",
            "example": "Campanha de prospecção via LinkedIn para o primeiro trimestre"
          },
          "configuracoes": {
            "type": "object",
            "description": "Configurações específicas da campanha",
            "example": {
              "palavras_chave": [
                "tecnologia",
                "startup"
              ],
              "localizacao": "São Paulo"
            }
          }
        }
      },
      "UpdateCampanhaData": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome da campanha"
          },
          "descricao": {
            "type": "string",
            "description": "Descrição da campanha"
          },
          "configuracoes": {
            "type": "object",
            "description": "Configurações específicas da campanha"
          }
        }
      },
      "UpdateCampanhaStatusData": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ativa",
              "pausada",
              "finalizada"
            ],
            "description": "Novo status da campanha",
            "example": "ativa"
          }
        }
      },
      "CampanhaResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID da campanha",
            "example": "camp-123"
          },
          "nome": {
            "type": "string",
            "description": "Nome da campanha",
            "example": "Campanha LinkedIn Q1 2024"
          },
          "tipo": {
            "type": "string",
            "description": "Tipo da campanha",
            "example": "scraping_web"
          },
          "descricao": {
            "type": "string",
            "description": "Descrição da campanha"
          },
          "status": {
            "type": "string",
            "enum": [
              "ativa",
              "pausada",
              "finalizada"
            ],
            "description": "Status da campanha",
            "example": "ativa"
          },
          "configuracoes": {
            "type": "object",
            "description": "Configurações da campanha"
          },
          "empresa_id": {
            "type": "string",
            "description": "ID da empresa proprietária",
            "example": "emp-123"
          },
          "leads_count": {
            "type": "number",
            "description": "Número de leads gerados",
            "example": 45
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de criação"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de atualização"
          }
        },
        "required": [
          "id",
          "nome",
          "tipo",
          "status",
          "empresa_id",
          "created_at"
        ]
      },
      "WorkerConfig": {
        "type": "object",
        "properties": {
          "enabled": {
            "type": "boolean",
            "description": "Se o worker está habilitado"
          },
          "concurrency": {
            "type": "integer",
            "description": "Número de instâncias concorrentes"
          }
        },
        "required": [
          "enabled",
          "concurrency",
          "enabled",
          "concurrency"
        ]
      },
      "WorkerStatus": {
        "type": "object",
        "properties": {
          "googleMapsLinksPublisher": {
            "$ref": "#/components/schemas/WorkerConfig"
          },
          "googleMapsDetailsConsumer": {
            "$ref": "#/components/schemas/WorkerConfig"
          }
        }
      },
      "UpdateConcurrencyRequest": {
        "type": "object",
        "properties": {
          "concurrency": {
            "type": "integer",
            "minimum": 1,
            "description": "Número de instâncias concorrentes",
            "example": 5
          }
        },
        "required": [
          "concurrency",
          "concurrency"
        ]
      },
      "CreateSearchTermData": {
        "type": "object",
        "required": [
          "termo",
          "categoria"
        ],
        "properties": {
          "termo": {
            "type": "string",
            "minLength": 2,
            "maxLength": 200,
            "description": "Termo de busca",
            "example": "pizzaria"
          },
          "categoria": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "pattern": "^[a-zA-Z0-9_-]+$",
            "description": "Categoria do termo (apenas letras, números, hífens e underscores)",
            "example": "restaurante"
          },
          "descricao": {
            "type": "string",
            "maxLength": 500,
            "nullable": true,
            "description": "Descrição opcional do termo",
            "example": "Estabelecimentos que servem pizza"
          },
          "ativo": {
            "type": "boolean",
            "default": true,
            "description": "Se o termo está ativo",
            "example": true
          }
        }
      },
      "UpdateSearchTermData": {
        "type": "object",
        "properties": {
          "termo": {
            "type": "string",
            "minLength": 2,
            "maxLength": 200,
            "description": "Termo de busca",
            "example": "pizzaria"
          },
          "categoria": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "pattern": "^[a-zA-Z0-9_-]+$",
            "description": "Categoria do termo",
            "example": "restaurante"
          },
          "descricao": {
            "type": "string",
            "maxLength": 500,
            "nullable": true,
            "description": "Descrição do termo",
            "example": "Estabelecimentos que servem pizza"
          },
          "ativo": {
            "type": "boolean",
            "description": "Se o termo está ativo",
            "example": true
          }
        }
      },
      "SearchTermResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "ID único do termo",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "empresaId": {
            "type": "string",
            "format": "uuid",
            "description": "ID da empresa proprietária",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          },
          "termo": {
            "type": "string",
            "description": "Termo de busca",
            "example": "pizzaria"
          },
          "categoria": {
            "type": "string",
            "description": "Categoria do termo",
            "example": "restaurante"
          },
          "descricao": {
            "type": "string",
            "nullable": true,
            "description": "Descrição do termo",
            "example": "Estabelecimentos que servem pizza"
          },
          "ativo": {
            "type": "boolean",
            "description": "Se o termo está ativo",
            "example": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data de criação",
            "example": "2025-09-06T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data de última atualização",
            "example": "2025-09-06T10:30:00Z"
          }
        }
      },
      "ListSearchTermsResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SearchTermResponse"
            }
          },
          "pagination": {
            "type": "object",
            "properties": {
              "page": {
                "type": "integer",
                "minimum": 1,
                "description": "Página atual",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "minimum": 1,
                "maximum": 100,
                "description": "Registros por página",
                "example": 20
              },
              "total": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de registros",
                "example": 45
              },
              "totalPages": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de páginas",
                "example": 3
              },
              "hasNextPage": {
                "type": "boolean",
                "description": "Existe próxima página",
                "example": false
              },
              "hasPreviousPage": {
                "type": "boolean",
                "description": "Existe página anterior",
                "example": false
              }
            }
          }
        }
      },
      "SearchTermCategoriesResponse": {
        "type": "object",
        "properties": {
          "categories": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "categoria": {
                  "type": "string",
                  "description": "Nome da categoria",
                  "example": "restaurante"
                },
                "count": {
                  "type": "integer",
                  "description": "Número de termos nesta categoria",
                  "example": 5
                }
              }
            }
          }
        }
      },
      "SearchTermStatsResponse": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "description": "Total de termos",
            "example": 25
          },
          "active": {
            "type": "integer",
            "description": "Termos ativos",
            "example": 20
          },
          "inactive": {
            "type": "integer",
            "description": "Termos inativos",
            "example": 5
          },
          "categoriesCount": {
            "type": "integer",
            "description": "Número de categorias",
            "example": 4
          },
          "topCategories": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "categoria": {
                  "type": "string",
                  "description": "Nome da categoria",
                  "example": "restaurante"
                },
                "count": {
                  "type": "integer",
                  "description": "Número de termos",
                  "example": 8
                }
              }
            }
          }
        }
      },
      "DashboardMetricsResponse": {
        "type": "object",
        "properties": {
          "leads": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number",
                "example": 1250
              },
              "novosUltimos30Dias": {
                "type": "number",
                "example": 180
              },
              "emProcessamento": {
                "type": "number",
                "example": 45
              },
              "convertidos": {
                "type": "number",
                "example": 35
              },
              "taxaConversao": {
                "type": "number",
                "example": 2.8
              },
              "porOrigem": {
                "type": "object",
                "additionalProperties": {
                  "type": "number"
                },
                "example": {
                  "Google Maps": 650,
                  "Importação Manual": 300
                }
              }
            }
          },
          "campanhas": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number",
                "example": 5
              },
              "ativas": {
                "type": "number",
                "example": 3
              },
              "pausadas": {
                "type": "number",
                "example": 2
              },
              "melhorPerformance": {
                "type": "object",
                "nullable": true,
                "properties": {
                  "nome": {
                    "type": "string",
                    "example": "Campanha Principal"
                  },
                  "leads": {
                    "type": "number",
                    "example": 85
                  },
                  "conversoes": {
                    "type": "number",
                    "example": 12
                  }
                }
              }
            }
          },
          "searchTerms": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number",
                "example": 25
              },
              "ativos": {
                "type": "number",
                "example": 20
              },
              "inativos": {
                "type": "number",
                "example": 5
              },
              "categorias": {
                "type": "number",
                "example": 8
              },
              "maiorCategoria": {
                "type": "object",
                "nullable": true,
                "properties": {
                  "nome": {
                    "type": "string",
                    "example": "alimentação"
                  },
                  "quantidade": {
                    "type": "number",
                    "example": 8
                  }
                }
              }
            }
          },
          "scraping": {
            "type": "object",
            "properties": {
              "totalJobs": {
                "type": "number",
                "example": 45
              },
              "sucessosUltimos7Dias": {
                "type": "number",
                "example": 38
              },
              "errosUltimos7Dias": {
                "type": "number",
                "example": 7
              },
              "taxaSucesso": {
                "type": "number",
                "example": 84.4
              },
              "ultimaExecucao": {
                "type": "string",
                "nullable": true,
                "format": "date-time"
              },
              "tempoMedioExecucao": {
                "type": "number",
                "example": 12.5
              }
            }
          },
          "sistema": {
            "type": "object",
            "properties": {
              "ultimaAtualizacao": {
                "type": "string",
                "format": "date-time"
              },
              "statusGeral": {
                "type": "string",
                "enum": [
                  "excelente",
                  "bom",
                  "atencao",
                  "critico"
                ]
              },
              "alertas": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "tipo": {
                      "type": "string",
                      "enum": [
                        "info",
                        "warning",
                        "error"
                      ]
                    },
                    "mensagem": {
                      "type": "string"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "graficos": {
            "type": "object",
            "properties": {
              "leadsUltimos30Dias": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "string",
                      "format": "date"
                    },
                    "leads": {
                      "type": "number"
                    },
                    "conversoes": {
                      "type": "number"
                    }
                  }
                }
              },
              "performanceCampanhas": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "campanha": {
                      "type": "string"
                    },
                    "leads": {
                      "type": "number"
                    },
                    "conversoes": {
                      "type": "number"
                    },
                    "custoTotal": {
                      "type": "number"
                    }
                  }
                }
              },
              "distribuicaoOrigem": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "origem": {
                      "type": "string"
                    },
                    "quantidade": {
                      "type": "number"
                    },
                    "porcentagem": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "QuickStatsResponse": {
        "type": "object",
        "properties": {
          "leadsHoje": {
            "type": "number",
            "example": 8
          },
          "leadsOntem": {
            "type": "number",
            "example": 12
          },
          "campanhasAtivas": {
            "type": "number",
            "example": 2
          },
          "ultimoScraping": {
            "type": "string",
            "nullable": true,
            "format": "date-time"
          },
          "statusSistema": {
            "type": "string",
            "enum": [
              "online",
              "offline",
              "manutencao"
            ],
            "example": "online"
          }
        }
      },
      "DashboardExportRequest": {
        "type": "object",
        "required": [
          "formato",
          "incluir"
        ],
        "properties": {
          "formato": {
            "type": "string",
            "enum": [
              "pdf",
              "excel",
              "csv"
            ],
            "description": "Formato do arquivo de exportação",
            "example": "pdf"
          },
          "incluir": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "leads",
                "campanhas",
                "scraping",
                "graficos"
              ]
            },
            "description": "Seções a incluir na exportação",
            "example": [
              "leads",
              "campanhas"
            ]
          },
          "dataInicio": {
            "type": "string",
            "format": "date",
            "description": "Data de início para filtrar dados",
            "example": "2024-01-01"
          },
          "dataFim": {
            "type": "string",
            "format": "date",
            "description": "Data de fim para filtrar dados",
            "example": "2024-01-31"
          },
          "campanhaIds": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs das campanhas para filtrar"
          },
          "origens": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Origens dos leads para filtrar"
          }
        }
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    },
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Informações da API",
        "description": "Retorna informações básicas sobre a API",
        "responses": {
          "200": {
            "description": "Informações da API retornadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiInfo"
                }
              }
            }
          }
        }
      }
    },
    "/status": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Status da API",
        "description": "Retorna o status atual da API",
        "responses": {
          "200": {
            "description": "Status da API retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Status"
                }
              }
            }
          }
        }
      }
    },
    "/admin/session-limits": {
      "get": {
        "summary": "Obter limites de sessão da empresa",
        "description": "Endpoint administrativo para recuperar configuração de limites de sessão da empresa atual.\nRetorna limites atuais com contagem em tempo real de sessões ativas e estatísticas de uso.\n",
        "tags": [
          "Admin - Sessões"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Limites de sessão recuperados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SessionLimitsResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "403": {
            "description": "Permissões insuficientes - Administrador necessário"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar limites de sessão da empresa",
        "description": "Endpoint administrativo para atualizar configuração de limites de sessão da empresa atual.\nAs alterações são auditadas e podem incluir avisos se os novos limites estiverem abaixo do uso atual.\n",
        "tags": [
          "Admin - Sessões"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "max_concurrent_sessions": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 1000,
                    "description": "Máximo de sessões simultâneas permitidas",
                    "example": 15
                  },
                  "enforcement_mode": {
                    "type": "string",
                    "enum": [
                      "block",
                      "warn",
                      "allow_with_audit"
                    ],
                    "description": "Como aplicar os limites de sessão",
                    "example": "block"
                  }
                },
                "minProperties": 1
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Limites de sessão atualizados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SessionLimitsResponse"
                    },
                    "warning": {
                      "type": "string",
                      "description": "Mensagem de aviso se aplicável",
                      "example": "Novo limite (2) está abaixo das sessões ativas atuais (5)"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisição inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "403": {
            "description": "Permissões insuficientes - Administrador necessário"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/admin/session-limits/all": {
      "get": {
        "summary": "Obter todos os limites de sessão das empresas",
        "description": "Endpoint de super administrador para recuperar limites de sessão de todas as empresas.\nInclui paginação e estatísticas de uso.\n",
        "tags": [
          "Admin - Sessões"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "description": "Número de resultados por página"
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "number",
              "minimum": 0,
              "default": 0
            },
            "description": "Número de resultados a pular"
          }
        ],
        "responses": {
          "200": {
            "description": "Todos os limites de sessão recuperados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "limits": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SessionLimitsResponse"
                          }
                        },
                        "total": {
                          "type": "number",
                          "example": 150
                        },
                        "statistics": {
                          "type": "object",
                          "properties": {
                            "total_companies": {
                              "type": "number",
                              "example": 150
                            },
                            "companies_at_limit": {
                              "type": "number",
                              "example": 5
                            },
                            "companies_over_limit": {
                              "type": "number",
                              "example": 2
                            },
                            "companies_nearing_limit": {
                              "type": "number",
                              "example": 12
                            },
                            "average_usage": {
                              "type": "number",
                              "format": "float",
                              "example": 67.5
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "403": {
            "description": "Permissões insuficientes - Super administrador necessário"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/admin/sessions/companies/approaching-limits": {
      "get": {
        "summary": "Obter empresas se aproximando dos limites de sessão",
        "description": "Endpoint administrativo para obter empresas que estão se aproximando dos seus limites de sessão.\nUsado para monitoramento proativo e planejamento de capacidade.\n",
        "tags": [
          "Admin - Sessões"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "threshold",
            "schema": {
              "type": "number",
              "minimum": 50,
              "maximum": 100,
              "default": 80
            },
            "description": "Limite percentual de uso"
          }
        ],
        "responses": {
          "200": {
            "description": "Empresas se aproximando dos limites recuperadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/SessionLimitsResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "403": {
            "description": "Permissões insuficientes - Administrador necessário"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/admin/sessions/companies/at-or-over-limits": {
      "get": {
        "summary": "Obter empresas no limite ou acima dos limites de sessão",
        "description": "Endpoint administrativo para obter empresas que estão no limite ou acima dos seus limites de sessão.\nRequer atenção imediata para continuidade do serviço.\n",
        "tags": [
          "Admin - Sessões"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Empresas no limite ou acima recuperadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "at_limit": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SessionLimitsResponse"
                          }
                        },
                        "over_limit": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SessionLimitsResponse"
                          }
                        },
                        "total_affected": {
                          "type": "number",
                          "example": 7
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "403": {
            "description": "Permissões insuficientes - Administrador necessário"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/admin/sessions/revoke-company": {
      "post": {
        "summary": "Revogar todas as sessões da empresa",
        "description": "Endpoint administrativo para revogar todas as sessões de uma empresa específica.\nUsado para incidentes de segurança ou desativação de empresa.\nEsta é uma operação destrutiva que afeta todos os usuários da empresa.\n",
        "tags": [
          "Admin - Sessões"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "empresa_id",
                  "reason"
                ],
                "properties": {
                  "empresa_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Company ID to revoke sessions for",
                    "example": "empresa-uuid"
                  },
                  "reason": {
                    "type": "string",
                    "description": "Reason for revoking all company sessions",
                    "example": "security_incident"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sessões da empresa revogadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Successfully revoked 25 company session(s)"
                        },
                        "revoked_count": {
                          "type": "number",
                          "example": 25
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request data"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Insufficient permissions - Admin required"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "summary": "Fazer login no sistema",
        "tags": [
          "Autenticação"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email do usuário"
                  },
                  "password": {
                    "type": "string",
                    "description": "Senha do usuário"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login realizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string",
                      "description": "JWT token de autenticação"
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "role": {
                          "type": "string"
                        },
                        "empresa_id": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Credenciais inválidas"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "summary": "Solicitar redefinição de senha",
        "tags": [
          "Autenticação"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email do usuário"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Solicitação de reset processada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Se o email estiver correto, um link para redefinição de senha foi enviado."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "404": {
            "description": "Usuário não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "summary": "Registrar novo usuário (com ou sem empresa)",
        "description": "Cria um novo usuário. Se dados de empresa (nome + CNPJ) forem fornecidos, cria também a empresa e vincula o usuário",
        "tags": [
          "Autenticação"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password",
                  "cnpj",
                  "nome empresa"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email do usuário (será o login)"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "description": "Senha do usuário"
                  },
                  "cnpj": {
                    "type": "string",
                    "description": "CNPJ da empresa (único no sistema)"
                  },
                  "empresa": {
                    "type": "string",
                    "description": "Nome da empresa"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuário e empresa criados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuário e empresa criados com sucesso."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "role": {
                              "type": "string"
                            },
                            "empresa_id": {
                              "type": "string"
                            }
                          }
                        },
                        "empresa": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "cnpj": {
                              "type": "string"
                            },
                            "nome": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "409": {
            "description": "CNPJ já cadastrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/auth/confirm-reset-password": {
      "post": {
        "summary": "Confirmar nova senha com token de reset",
        "tags": [
          "Autenticação"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token",
                  "password"
                ],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "Token de reset recebido por email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "description": "Nova senha do usuário"
                  },
                  "newPassword": {
                    "type": "string",
                    "minLength": 8,
                    "description": "Nova senha do usuário (alternativa ao campo password)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Senha alterada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Senha alterada com sucesso."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos ou token expirado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/campanha/{id}/contacts": {
      "post": {
        "summary": "Adicionar contatos à campanha",
        "tags": [
          "Campaign Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contact_ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "description": "IDs dos contatos a serem adicionados"
                  }
                },
                "required": [
                  "contact_ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contatos adicionados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/CampaignContact"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Campanha não encontrada"
          }
        }
      },
      "get": {
        "summary": "Listar contatos da campanha",
        "tags": [
          "Campaign Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "ordering_strategy",
            "description": "Estratégia de ordenação dos contatos",
            "schema": {
              "type": "string",
              "enum": [
                "alphabetical",
                "random"
              ],
              "default": "alphabetical"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contatos da campanha",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/CampaignContact"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Campanha não encontrada"
          },
          "423": {
            "description": "Fora do horário de envio configurado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Fora do horário de envio configurado para esta campanha"
                    },
                    "next_available_time": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Próximo horário disponível para envio"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/campanha/{id}/contacts/{contact_id}": {
      "delete": {
        "summary": "Remover contato da campanha",
        "tags": [
          "Campaign Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "contact_id",
            "required": true,
            "description": "ID do contato a ser removido",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Contato removido com sucesso"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Campanha ou contato não encontrado"
          }
        }
      }
    },
    "/campanhas": {
      "post": {
        "summary": "Criar nova campanha",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCampanhaData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Campanha criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "409": {
            "description": "Campanha com nome já existe"
          }
        }
      },
      "get": {
        "summary": "Listar campanhas",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Página"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Itens por página"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Busca por nome ou descrição"
          },
          {
            "in": "query",
            "name": "tipo",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "scraping_web",
                  "lista_importada",
                  "api_externa",
                  "manual"
                ]
              }
            },
            "description": "Filtrar por tipo"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "rascunho",
                  "ativa",
                  "pausada",
                  "concluida",
                  "cancelada"
                ]
              }
            },
            "description": "Filtrar por status"
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "default": "created_at"
            },
            "description": "Campo para ordenação"
          },
          {
            "in": "query",
            "name": "sortOrder",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "description": "Ordem da classificação"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de campanhas",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          }
        }
      }
    },
    "/campanhas/{id}": {
      "get": {
        "summary": "Buscar campanha por ID",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da campanha"
          }
        ],
        "responses": {
          "200": {
            "description": "Dados da campanha",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaResponse"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Campanha não encontrada"
          }
        }
      },
      "put": {
        "summary": "Atualizar campanha",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da campanha"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCampanhaData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Campanha atualizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Campanha não encontrada"
          }
        }
      },
      "delete": {
        "summary": "Deletar campanha",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da campanha"
          }
        ],
        "responses": {
          "204": {
            "description": "Campanha deletada com sucesso"
          },
          "400": {
            "description": "Campanha não pode ser deletada"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Campanha não encontrada"
          }
        }
      }
    },
    "/campanhas/{id}/status": {
      "patch": {
        "summary": "Atualizar status da campanha",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da campanha"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCampanhaStatusData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status da campanha atualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Transição de status inválida"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Campanha não encontrada"
          }
        }
      }
    },
    "/api/v1/webhooks/chatwoot": {
      "post": {
        "summary": "Receber webhook do ChatWoot",
        "tags": [
          "Webhooks"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatwootWebhookDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook processado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "processed": {
                      "type": "boolean"
                    },
                    "qualificationStatus": {
                      "type": "string"
                    },
                    "priorityScore": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados do webhook inválidos"
          },
          "401": {
            "description": "Webhook não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/webhooks/chatwoot/test": {
      "post": {
        "summary": "Testar processamento de webhook ChatWoot",
        "tags": [
          "Webhooks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "webhookData": {
                    "$ref": "#/components/schemas/ChatwootWebhookDTO"
                  },
                  "empresaId": {
                    "type": "string"
                  },
                  "leadId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Teste executado com sucesso"
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          }
        }
      }
    },
    "/api/v1/webhooks/chatwoot/validate": {
      "get": {
        "summary": "Validar configuração do webhook ChatWoot",
        "tags": [
          "Webhooks"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "empresa_id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da empresa"
          }
        ],
        "responses": {
          "200": {
            "description": "Configuração válida"
          },
          "400": {
            "description": "Configuração inválida"
          }
        }
      }
    },
    "/contatos": {
      "post": {
        "summary": "Criar novo contato WhatsApp",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nome",
                  "telefone_whatsapp"
                ],
                "properties": {
                  "nome": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255,
                    "description": "Nome do contato",
                    "example": "João Silva"
                  },
                  "telefone_whatsapp": {
                    "type": "string",
                    "pattern": "^\\\\+[1-9]\\\\d{1,14}$",
                    "description": "Telefone WhatsApp no formato internacional",
                    "example": "+5511999999999"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Dados adicionais do contato",
                    "example": {
                      "empresa": "Tech Corp",
                      "cargo": "Gerente"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Contato criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "nome": {
                          "type": "string"
                        },
                        "telefone_whatsapp": {
                          "type": "string"
                        },
                        "empresa_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "metadata": {
                          "type": "object"
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updated_at": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos ou telefone já existe",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Já existe um contato com o telefone WhatsApp +5511999999999"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar contatos com filtros e paginação",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "Página da consulta"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "description": "Itens por página"
          },
          {
            "in": "query",
            "name": "order_by",
            "schema": {
              "type": "string",
              "enum": [
                "nome",
                "created_at",
                "updated_at",
                "total_mensagens"
              ],
              "default": "created_at"
            },
            "description": "Campo para ordenação"
          },
          {
            "in": "query",
            "name": "order_direction",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "description": "Direção da ordenação"
          },
          {
            "in": "query",
            "name": "nome",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por nome (busca parcial)"
          },
          {
            "in": "query",
            "name": "telefone_whatsapp",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por telefone (busca parcial)"
          },
          {
            "in": "query",
            "name": "tipo_acesso",
            "schema": {
              "type": "string",
              "enum": [
                "proprietario",
                "compartilhado",
                "demonstracao"
              ]
            },
            "description": "Filtrar por tipo de acesso"
          },
          {
            "in": "query",
            "name": "ativo",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtrar por status ativo"
          },
          {
            "in": "query",
            "name": "include_acesso",
            "schema": {
              "type": "boolean",
              "default": true
            },
            "description": "Incluir dados de acesso"
          },
          {
            "in": "query",
            "name": "include_mensagens",
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "Incluir mensagens dos contatos"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contatos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "description": "Dados do contato"
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer"
                        },
                        "limit": {
                          "type": "integer"
                        },
                        "total": {
                          "type": "integer"
                        },
                        "pages": {
                          "type": "integer"
                        },
                        "has_next": {
                          "type": "boolean"
                        },
                        "has_prev": {
                          "type": "boolean"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Parâmetros inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/contatos/{id}": {
      "get": {
        "summary": "Buscar contato por ID",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do contato"
          },
          {
            "in": "query",
            "name": "include_acesso",
            "schema": {
              "type": "boolean",
              "default": true
            },
            "description": "Incluir dados de acesso"
          },
          {
            "in": "query",
            "name": "include_mensagens",
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "Incluir mensagens do contato"
          },
          {
            "in": "query",
            "name": "mensagens_limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "description": "Limite de mensagens a retornar"
          }
        ],
        "responses": {
          "200": {
            "description": "Contato encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "description": "Dados do contato (formato varia conforme parâmetros)"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Contato não encontrado ou sem acesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Empresa não tem acesso a este contato"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar contato",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do contato"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nome": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255,
                    "description": "Novo nome do contato"
                  },
                  "telefone_whatsapp": {
                    "type": "string",
                    "pattern": "^\\\\+[1-9]\\\\d{1,14}$",
                    "description": "Novo telefone WhatsApp no formato internacional"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Novos dados adicionais do contato"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contato atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "description": "Dados atualizados do contato"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos ou telefone já existe"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Contato não encontrado ou sem acesso"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Excluir contato (soft delete)",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do contato"
          }
        ],
        "responses": {
          "204": {
            "description": "Contato excluído com sucesso"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Contato não encontrado ou sem acesso"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/dashboard/metrics": {
      "get": {
        "summary": "Obter métricas completas do dashboard",
        "description": "Retorna todas as métricas necessárias para o dashboard principal incluindo leads, campanhas, search terms, scraping e gráficos",
        "tags": [
          "Dashboard"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "dataInicio",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Data de início para filtrar métricas (formato YYYY-MM-DD)",
            "example": "2024-01-01"
          },
          {
            "in": "query",
            "name": "dataFim",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Data de fim para filtrar métricas (formato YYYY-MM-DD)",
            "example": "2024-01-31"
          },
          {
            "in": "query",
            "name": "campanhaIds",
            "style": "form",
            "explode": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "IDs das campanhas para filtrar",
            "example": [
              "uuid1",
              "uuid2"
            ]
          },
          {
            "in": "query",
            "name": "origens",
            "style": "form",
            "explode": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "Origens dos leads para filtrar",
            "example": [
              "Google Maps",
              "Importação Manual"
            ]
          }
        ],
        "responses": {
          "200": {
            "description": "Métricas do dashboard obtidas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardMetricsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parâmetros de filtro inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/dashboard/quick-stats": {
      "get": {
        "summary": "Obter estatísticas rápidas do dashboard",
        "description": "Retorna estatísticas básicas para widgets de dashboard - ideal para atualizações frequentes",
        "tags": [
          "Dashboard"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estatísticas rápidas obtidas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/QuickStatsResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "ID da empresa é obrigatório"
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/dashboard/health": {
      "get": {
        "summary": "Verificar saúde do sistema dashboard",
        "description": "Retorna indicadores de saúde específicos para funcionalidades do dashboard",
        "tags": [
          "Dashboard"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status de saúde do sistema",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "healthy",
                            "degraded",
                            "unhealthy"
                          ],
                          "example": "healthy"
                        },
                        "services": {
                          "type": "object",
                          "properties": {
                            "database": {
                              "type": "string",
                              "enum": [
                                "operational",
                                "degraded",
                                "down"
                              ],
                              "example": "operational"
                            },
                            "scraping": {
                              "type": "string",
                              "enum": [
                                "operational",
                                "degraded",
                                "down"
                              ],
                              "example": "operational"
                            },
                            "campaigns": {
                              "type": "string",
                              "enum": [
                                "operational",
                                "degraded",
                                "down"
                              ],
                              "example": "operational"
                            }
                          }
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T10:30:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/dashboard/export": {
      "post": {
        "summary": "Exportar dados do dashboard",
        "description": "Gera e retorna um arquivo com os dados do dashboard no formato especificado",
        "tags": [
          "Dashboard"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DashboardExportRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Arquivo gerado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "downloadUrl": {
                          "type": "string",
                          "example": "/downloads/dashboard-export-12345.pdf"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T12:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Parâmetros de exportação inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/empresas": {
      "get": {
        "summary": "Listar todas as empresas",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de empresas retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/EmpresaResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "post": {
        "summary": "Criar nova empresa",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateEmpresaData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Empresa criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/EmpresaResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/empresas/stats": {
      "get": {
        "summary": "Obter estatísticas da empresa",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estatísticas retornadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalLeads": {
                          "type": "number"
                        },
                        "totalCampanhas": {
                          "type": "number"
                        },
                        "creditsUsed": {
                          "type": "number"
                        },
                        "creditsRemaining": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/empresas/{id}": {
      "get": {
        "summary": "Obter empresa por ID",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da empresa"
          }
        ],
        "responses": {
          "200": {
            "description": "Empresa encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/EmpresaResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Empresa não encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar empresa",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da empresa"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateEmpresaData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Empresa atualizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/EmpresaResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Empresa não encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Deletar empresa",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da empresa"
          }
        ],
        "responses": {
          "204": {
            "description": "Empresa deletada com sucesso"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Empresa não encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/status": {
      "get": {
        "summary": "Obter status do worker de scraping",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status do worker obtido com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "isRunning": {
                          "type": "boolean"
                        },
                        "currentJobs": {
                          "type": "number"
                        },
                        "maxConcurrentJobs": {
                          "type": "number"
                        },
                        "totalJobsProcessed": {
                          "type": "number"
                        },
                        "totalLeadsScraped": {
                          "type": "number"
                        },
                        "errorCount": {
                          "type": "number"
                        },
                        "queueSize": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          }
        }
      }
    },
    "/scraping/start": {
      "post": {
        "summary": "Iniciar worker de scraping",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Worker iniciado com sucesso"
          },
          "400": {
            "description": "Worker já está executando"
          },
          "401": {
            "description": "Não autorizado"
          }
        }
      }
    },
    "/scraping/stop": {
      "post": {
        "summary": "Parar worker de scraping",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Worker parado com sucesso"
          },
          "400": {
            "description": "Worker não está executando"
          },
          "401": {
            "description": "Não autorizado"
          }
        }
      }
    },
    "/scraping/jobs": {
      "post": {
        "summary": "Adicionar job de scraping",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "parametros_busca"
                ],
                "properties": {
                  "parametros_busca": {
                    "type": "object",
                    "required": [
                      "termo_busca"
                    ],
                    "properties": {
                      "termo_busca": {
                        "type": "string",
                        "example": "restaurantes"
                      },
                      "cidade": {
                        "type": "string",
                        "example": "Franca"
                      },
                      "estado": {
                        "type": "string",
                        "example": "SP"
                      },
                      "maxResultados": {
                        "type": "number",
                        "example": 20
                      },
                      "filtros": {
                        "type": "object",
                        "properties": {
                          "apenasVerificados": {
                            "type": "boolean"
                          },
                          "apenasComTelefone": {
                            "type": "boolean"
                          },
                          "avaliacaoMinima": {
                            "type": "number"
                          }
                        }
                      }
                    }
                  },
                  "prioridade": {
                    "type": "string",
                    "enum": [
                      "baixa",
                      "normal",
                      "alta"
                    ],
                    "default": "normal"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Job adicionado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "jobId": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          }
        }
      }
    },
    "/scraping/jobs/bulk": {
      "post": {
        "summary": "Adicionar múltiplos jobs de scraping",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "termosBusca",
                  "cidade"
                ],
                "properties": {
                  "termosBusca": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": [
                      "restaurantes",
                      "pizzarias",
                      "lanchonetes"
                    ]
                  },
                  "cidade": {
                    "type": "string",
                    "example": "São Paulo"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Jobs adicionados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "jobIds": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "total": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          }
        }
      }
    },
    "/scraping/jobs/segmented": {
      "post": {
        "summary": "Adicionar jobs por segmento pré-definido",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "segmento",
                  "cidade"
                ],
                "properties": {
                  "segmento": {
                    "type": "string",
                    "enum": [
                      "restaurantes",
                      "saude",
                      "servicos",
                      "varejo",
                      "educacao",
                      "beleza",
                      "automotivo",
                      "imobiliario"
                    ],
                    "example": "restaurantes"
                  },
                  "cidade": {
                    "type": "string",
                    "example": "São Paulo"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Jobs segmentados adicionados com sucesso"
          },
          "400": {
            "description": "Dados inválidos ou segmento não encontrado"
          },
          "401": {
            "description": "Não autorizado"
          }
        }
      }
    },
    "/scraping/stats": {
      "get": {
        "summary": "Obter estatísticas dos leads coletados",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "empresaId",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da empresa (opcional, se não informado retorna stats gerais)"
          }
        ],
        "responses": {
          "200": {
            "description": "Estatísticas obtidas com sucesso"
          }
        }
      }
    },
    "/scraping/templates": {
      "get": {
        "summary": "Listar templates de busca disponíveis",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Templates listados com sucesso"
          }
        }
      }
    },
    "/api/v1/leads/{id}/enrich": {
      "post": {
        "summary": "Enriquecer dados de um lead",
        "tags": [
          "Lead Advanced"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID do lead"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "forceRefresh": {
                    "type": "boolean",
                    "description": "Forçar re-enriquecimento mesmo se já enriquecido"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Enriquecimento executado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "leadId": {
                          "type": "string"
                        },
                        "enriched": {
                          "type": "boolean"
                        },
                        "fieldsUpdated": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "sources": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "errors": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "404": {
            "description": "Lead não encontrado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/api/v1/leads/{id}/validate-contacts": {
      "post": {
        "summary": "Validar contatos de um lead (email e telefone)",
        "tags": [
          "Lead Advanced"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID do lead"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "validateEmail": {
                    "type": "boolean",
                    "description": "Validar email"
                  },
                  "validatePhone": {
                    "type": "boolean",
                    "description": "Validar telefone"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Validação executada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "leadId": {
                          "type": "string"
                        },
                        "email": {
                          "type": "object",
                          "properties": {
                            "isValid": {
                              "type": "boolean"
                            },
                            "reason": {
                              "type": "string"
                            },
                            "provider": {
                              "type": "string"
                            },
                            "disposable": {
                              "type": "boolean"
                            }
                          }
                        },
                        "phone": {
                          "type": "object",
                          "properties": {
                            "isValid": {
                              "type": "boolean"
                            },
                            "reason": {
                              "type": "string"
                            },
                            "country": {
                              "type": "string"
                            },
                            "type": {
                              "type": "string",
                              "enum": [
                                "mobile",
                                "landline",
                                "voip"
                              ]
                            }
                          }
                        },
                        "updated": {
                          "type": "boolean"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "404": {
            "description": "Lead não encontrado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/api/v1/leads/detect-duplicates": {
      "post": {
        "summary": "Detectar leads duplicados",
        "tags": [
          "Lead Advanced"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nomeEmpresa": {
                    "type": "string",
                    "description": "Nome da empresa"
                  },
                  "email": {
                    "type": "string",
                    "description": "Email do contato"
                  },
                  "telefone": {
                    "type": "string",
                    "description": "Telefone"
                  },
                  "cnpj": {
                    "type": "string",
                    "description": "CNPJ da empresa"
                  },
                  "threshold": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100,
                    "description": "Score mínimo para considerar duplicata (padrão 70)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Detecção executada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "hasDuplicates": {
                          "type": "boolean"
                        },
                        "matches": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "leadId": {
                                "type": "string"
                              },
                              "similarityScore": {
                                "type": "number"
                              },
                              "matchReasons": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              }
                            }
                          }
                        },
                        "recommendation": {
                          "type": "string",
                          "enum": [
                            "create",
                            "merge",
                            "review"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/api/v1/leads/{id}/calculate-score": {
      "post": {
        "summary": "Calcular score de qualificação do lead",
        "tags": [
          "Lead Advanced"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID do lead"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customRules": {
                    "type": "array",
                    "description": "Regras customizadas de score (opcional)",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string"
                        },
                        "weight": {
                          "type": "number"
                        },
                        "points": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cálculo executado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "leadId": {
                          "type": "string"
                        },
                        "oldScore": {
                          "type": "number"
                        },
                        "newScore": {
                          "type": "number"
                        },
                        "breakdown": {
                          "type": "object",
                          "properties": {
                            "totalScore": {
                              "type": "number"
                            },
                            "percentage": {
                              "type": "number"
                            },
                            "category": {
                              "type": "string",
                              "enum": [
                                "low",
                                "medium",
                                "high",
                                "excellent"
                              ]
                            },
                            "appliedRules": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "ruleName": {
                                    "type": "string"
                                  },
                                  "points": {
                                    "type": "number"
                                  },
                                  "applied": {
                                    "type": "boolean"
                                  }
                                }
                              }
                            }
                          }
                        },
                        "updated": {
                          "type": "boolean"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "404": {
            "description": "Lead não encontrado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/leads": {
      "post": {
        "tags": [
          "Leads"
        ],
        "summary": "Criar um novo lead",
        "description": "Cria um novo lead no sistema com validação completa dos dados",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateLeadDTO"
              },
              "example": {
                "nomeEmpresa": "Empresa Exemplo Ltda",
                "nomeContato": "João Silva",
                "cargoContato": "Diretor Executivo",
                "email": "joao.silva@empresa.com",
                "telefone": "+55 11 99999-9999",
                "linkedinUrl": "https://linkedin.com/in/joaosilva",
                "siteEmpresa": "https://empresa.com",
                "cnpj": "12.345.678/0001-90",
                "segmento": "Tecnologia",
                "porteEmpresa": "Médio",
                "numFuncionarios": 50,
                "receitaAnualEstimada": 5000000,
                "endereco": {
                  "rua": "Rua das Flores",
                  "numero": "123",
                  "cidade": "São Paulo",
                  "estado": "SP",
                  "cep": "01234-567",
                  "pais": "Brasil"
                },
                "status": "novo",
                "tags": [
                  "tecnologia",
                  "b2b"
                ],
                "observacoes": "Lead identificado via LinkedIn",
                "fonte": "linkedin",
                "dadosOriginais": {},
                "custoAquisicao": 150
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Lead criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/LeadResponseDTO"
                    },
                    "message": {
                      "type": "string",
                      "example": "Lead criado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Email é obrigatório"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "tags": [
          "Leads"
        ],
        "summary": "Listar leads com filtros e paginação",
        "description": "Lista leads da organização com suporte a filtros avançados e paginação",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "Número da página"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "description": "Número de itens por página"
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "updatedAt",
                "nomeEmpresa",
                "scoreQualificacao"
              ],
              "default": "createdAt"
            },
            "description": "Campo para ordenação"
          },
          {
            "in": "query",
            "name": "sortOrder",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "description": "Ordem de ordenação"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "novo",
                "contato_inicial",
                "qualificado",
                "proposta",
                "fechado",
                "perdido"
              ]
            },
            "description": "Filtrar por status do lead"
          },
          {
            "in": "query",
            "name": "scoreMin",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            },
            "description": "Score mínimo de qualificação"
          },
          {
            "in": "query",
            "name": "scoreMax",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            },
            "description": "Score máximo de qualificação"
          },
          {
            "in": "query",
            "name": "segmento",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por segmento da empresa"
          },
          {
            "in": "query",
            "name": "porteEmpresa",
            "schema": {
              "type": "string",
              "enum": [
                "Pequeno",
                "Médio",
                "Grande"
              ]
            },
            "description": "Filtrar por porte da empresa"
          },
          {
            "in": "query",
            "name": "fonte",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por fonte de origem"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Busca textual em nome da empresa, contato e email"
          },
          {
            "in": "query",
            "name": "tags",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "Filtrar por tags (múltiplas tags separadas por vírgula)"
          },
          {
            "in": "query",
            "name": "createdAfter",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Leads criados após esta data"
          },
          {
            "in": "query",
            "name": "createdBefore",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Leads criados antes desta data"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de leads retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "items": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/LeadResponseDTO"
                          }
                        },
                        "total": {
                          "type": "integer",
                          "example": 150
                        },
                        "page": {
                          "type": "integer",
                          "example": 1
                        },
                        "limit": {
                          "type": "integer",
                          "example": 20
                        },
                        "totalPages": {
                          "type": "integer",
                          "example": 8
                        },
                        "hasNext": {
                          "type": "boolean",
                          "example": true
                        },
                        "hasPrev": {
                          "type": "boolean",
                          "example": false
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/{id}": {
      "get": {
        "tags": [
          "Leads"
        ],
        "summary": "Buscar lead por ID",
        "description": "Busca um lead específico pelo seu ID único",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID único do lead",
            "example": "lead-123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "responses": {
          "200": {
            "description": "Lead encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/LeadResponseDTO"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "403": {
            "description": "Acesso negado - lead pertence a outra organização",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Acesso negado"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Lead não encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Lead não encontrado"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "tags": [
          "Leads"
        ],
        "summary": "Atualizar lead",
        "description": "Atualiza os dados de um lead existente",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID único do lead",
            "example": "lead-123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLeadDTO"
              },
              "example": {
                "nomeEmpresa": "Empresa Exemplo Ltda - Atualizado",
                "nomeContato": "João Silva Santos",
                "cargoContato": "CEO",
                "email": "joao.santos@empresa.com",
                "telefone": "+55 11 99999-8888",
                "status": "qualificado",
                "scoreQualificacao": 85,
                "tags": [
                  "tecnologia",
                  "b2b",
                  "qualificado"
                ],
                "observacoes": "Lead qualificado após reunião inicial"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/LeadResponseDTO"
                    },
                    "message": {
                      "type": "string",
                      "example": "Lead atualizado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Email é obrigatório"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "403": {
            "description": "Acesso negado - lead pertence a outra organização",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Acesso negado"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Lead não encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Lead não encontrado"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "tags": [
          "Leads"
        ],
        "summary": "Deletar lead",
        "description": "Remove permanentemente um lead do sistema",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID único do lead",
            "example": "lead-123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "responses": {
          "200": {
            "description": "Lead deletado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Lead deletado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "403": {
            "description": "Acesso negado - lead pertence a outra organização",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Acesso negado"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Lead não encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Lead não encontrado"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/start": {
      "post": {
        "summary": "Iniciar processamento de leads temporários para uma empresa",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "batchSize": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 1000,
                    "default": 100,
                    "description": "Tamanho do lote para processamento"
                  },
                  "maxConcurrentJobs": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 10,
                    "default": 3,
                    "description": "Número máximo de jobs concorrentes"
                  },
                  "enableEnrichment": {
                    "type": "boolean",
                    "default": true,
                    "description": "Habilitar enriquecimento de dados"
                  },
                  "enableDeduplication": {
                    "type": "boolean",
                    "default": true,
                    "description": "Habilitar verificação de duplicatas"
                  },
                  "retryAttempts": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 5,
                    "default": 3,
                    "description": "Número de tentativas para reprocessamento"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Processamento iniciado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "jobId": {
                          "type": "string",
                          "example": "job_e5f42684_1693584123_abc123"
                        },
                        "empresaId": {
                          "type": "string"
                        },
                        "totalLeads": {
                          "type": "integer"
                        },
                        "processedLeads": {
                          "type": "integer"
                        },
                        "successfulLeads": {
                          "type": "integer"
                        },
                        "failedLeads": {
                          "type": "integer"
                        },
                        "filteredLeads": {
                          "type": "integer"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "running",
                            "completed",
                            "failed",
                            "cancelled"
                          ]
                        },
                        "startTime": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "duration": {
                          "type": "integer",
                          "description": "Duração em milissegundos"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados de entrada inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string"
                    },
                    "validationErrors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/status/{empresaId}": {
      "get": {
        "summary": "Obter status de processamento de uma empresa",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "empresaId",
            "required": true,
            "description": "ID da empresa",
            "schema": {
              "type": "string",
              "example": "e5f42684-ce1a-4bee-9f67-295ceadf840d"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status obtido com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "empresaId": {
                          "type": "string"
                        },
                        "stats": {
                          "type": "object",
                          "properties": {
                            "totalLeads": {
                              "type": "integer"
                            },
                            "pendentes": {
                              "type": "integer"
                            },
                            "processando": {
                              "type": "integer"
                            },
                            "concluidos": {
                              "type": "integer"
                            },
                            "erros": {
                              "type": "integer"
                            },
                            "filtrados": {
                              "type": "integer"
                            },
                            "taxaSucesso": {
                              "type": "number",
                              "format": "float"
                            }
                          }
                        },
                        "performance": {
                          "type": "object",
                          "properties": {
                            "leadsProcessadosUltimas24h": {
                              "type": "integer"
                            },
                            "taxaSucessoUltimos7dias": {
                              "type": "number"
                            },
                            "tempoMedioProcessamento": {
                              "type": "number"
                            },
                            "gargaloIdentificado": {
                              "type": "string",
                              "nullable": true
                            }
                          }
                        },
                        "saude": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "healthy",
                                "warning",
                                "critical"
                              ]
                            },
                            "alertas": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "recomendacoes": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Empresa não encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/report/{empresaId}": {
      "get": {
        "summary": "Obter relatório detalhado de processamento",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "empresaId",
            "required": true,
            "description": "ID da empresa",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "periodoEmDias",
            "required": false,
            "description": "Período em dias para análise",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 365,
              "default": 30
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Relatório gerado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "empresaId": {
                          "type": "string"
                        },
                        "periodo": {
                          "type": "object",
                          "properties": {
                            "inicio": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "fim": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        },
                        "metricas": {
                          "type": "object",
                          "properties": {
                            "totalProcessados": {
                              "type": "integer"
                            },
                            "sucessos": {
                              "type": "integer"
                            },
                            "erros": {
                              "type": "integer"
                            },
                            "filtrados": {
                              "type": "integer"
                            },
                            "taxaSucesso": {
                              "type": "number",
                              "format": "float"
                            }
                          }
                        },
                        "topErros": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "erro": {
                                "type": "string"
                              },
                              "ocorrencias": {
                                "type": "integer"
                              },
                              "percentual": {
                                "type": "number"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Empresa não encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/stuck/{empresaId}": {
      "get": {
        "summary": "Obter leads travados que precisam de intervenção",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "empresaId",
            "required": true,
            "description": "ID da empresa",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "minutosMinimos",
            "required": false,
            "description": "Minutos para considerar travado",
            "schema": {
              "type": "integer",
              "minimum": 5,
              "maximum": 1440,
              "default": 30
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Leads travados obtidos com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "nome": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "tentativasProcessamento": {
                            "type": "integer"
                          },
                          "ultimoErro": {
                            "type": "string",
                            "nullable": true
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Empresa não encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/reset-stuck": {
      "post": {
        "summary": "Resetar leads travados para reprocessamento",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "minutosMinimos"
                ],
                "properties": {
                  "minutosMinimos": {
                    "type": "integer",
                    "minimum": 5,
                    "maximum": 1440,
                    "description": "Minutos para considerar travado",
                    "example": 60
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Leads resetados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "leadsResetados": {
                          "type": "integer",
                          "description": "Quantidade de leads resetados"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados de entrada inválidos"
          },
          "401": {
            "description": "Não autorizado (apenas admins podem resetar)"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/campaigns/{id}/messages": {
      "post": {
        "summary": "Registrar nova mensagem enviada",
        "tags": [
          "Message Status"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contact_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID do contato que recebeu a mensagem"
                  },
                  "message_content": {
                    "type": "string",
                    "description": "Conteúdo da mensagem enviada"
                  },
                  "external_message_id": {
                    "type": "string",
                    "description": "ID da mensagem na plataforma externa (WhatsApp, etc.)"
                  },
                  "platform": {
                    "type": "string",
                    "enum": [
                      "whatsapp",
                      "telegram",
                      "sms"
                    ],
                    "description": "Plataforma de envio"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "queued",
                      "sent",
                      "delivered",
                      "failed",
                      "bounce"
                    ],
                    "default": "sent",
                    "description": "Status inicial da mensagem"
                  }
                },
                "required": [
                  "contact_id",
                  "message_content",
                  "platform"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mensagem registrada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/MessageStatus"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Campanha não encontrada"
          }
        }
      }
    },
    "/campaigns/{id}/messages/{message_id}/status": {
      "put": {
        "summary": "Atualizar status de uma mensagem",
        "tags": [
          "Message Status"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "message_id",
            "required": true,
            "description": "ID da mensagem",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "queued",
                      "sent",
                      "delivered",
                      "failed",
                      "bounce"
                    ],
                    "description": "Novo status da mensagem"
                  },
                  "error_message": {
                    "type": "string",
                    "description": "Mensagem de erro (obrigatória se status for 'failed' ou 'bounce')"
                  },
                  "delivered_at": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Timestamp de entrega (obrigatório se status for 'delivered')"
                  },
                  "retry_count": {
                    "type": "integer",
                    "description": "Número de tentativas de reenvio"
                  }
                },
                "required": [
                  "status"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/MessageStatus"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Campanha ou mensagem não encontrada"
          }
        }
      }
    },
    "/auth/refresh": {
      "post": {
        "summary": "Atualizar token de acesso",
        "description": "Atualiza um token de acesso usando um token de refresh válido.\nSuporta compartilhamento de dispositivo entre frontend web e extensão Chrome.\nAmbos os clientes podem usar o mesmo device_id para atualizar tokens da mesma sessão.\n",
        "tags": [
          "Autenticação"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "refresh_token",
                  "device_id",
                  "device_fingerprint",
                  "client_type"
                ],
                "properties": {
                  "refresh_token": {
                    "type": "string",
                    "description": "Token de refresh válido",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  },
                  "device_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Identificador de dispositivo compartilhado entre web e extensão",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "device_fingerprint": {
                    "type": "string",
                    "description": "Impressão digital do dispositivo para validação de segurança",
                    "example": "fp_1234567890abcdef"
                  },
                  "client_type": {
                    "type": "string",
                    "enum": [
                      "web",
                      "extension"
                    ],
                    "description": "Tipo de cliente fazendo a requisição",
                    "example": "web"
                  },
                  "ip_address": {
                    "type": "string",
                    "format": "ipv4",
                    "description": "Endereço IP do cliente (opcional, extraído da requisição)",
                    "example": "192.168.1.100"
                  },
                  "user_agent": {
                    "type": "string",
                    "description": "String do user agent (opcional, extraído da requisição)",
                    "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string",
                          "description": "Novo token de acesso",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "refresh_token": {
                          "type": "string",
                          "description": "Novo token de refresh",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "token_type": {
                          "type": "string",
                          "example": "Bearer"
                        },
                        "expires_in": {
                          "type": "number",
                          "description": "Expiração do token de acesso em segundos",
                          "example": 900
                        },
                        "expires_at": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp de expiração do token de acesso",
                          "example": "2025-09-16T10:45:00Z"
                        },
                        "session": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid",
                              "example": "123e4567-e89b-12d3-a456-426614174000"
                            },
                            "device_id": {
                              "type": "string",
                              "format": "uuid",
                              "example": "550e8400-e29b-41d4-a716-446655440000"
                            },
                            "client_type": {
                              "type": "string",
                              "enum": [
                                "web",
                                "extension"
                              ],
                              "example": "web"
                            },
                            "last_activity_at": {
                              "type": "string",
                              "format": "date-time",
                              "example": "2025-09-16T10:30:00Z"
                            },
                            "expires_at": {
                              "type": "string",
                              "format": "date-time",
                              "example": "2025-09-16T11:15:00Z"
                            },
                            "time_to_expiration_minutes": {
                              "type": "number",
                              "example": 45
                            }
                          }
                        },
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid",
                              "example": "user-uuid"
                            },
                            "email": {
                              "type": "string",
                              "example": "user@example.com"
                            },
                            "name": {
                              "type": "string",
                              "example": "User Name"
                            },
                            "empresa_id": {
                              "type": "string",
                              "format": "uuid",
                              "example": "empresa-uuid"
                            },
                            "role": {
                              "type": "string",
                              "example": "user"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisição inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "example": "VALIDATION_ERROR"
                        },
                        "message": {
                          "type": "string",
                          "example": "Device ID is required"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Falha na autenticação",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "enum": [
                            "INVALID_TOKEN",
                            "EXPIRED_TOKEN",
                            "DEVICE_MISMATCH",
                            "FINGERPRINT_MISMATCH"
                          ],
                          "example": "INVALID_TOKEN"
                        },
                        "message": {
                          "type": "string",
                          "example": "Invalid or expired refresh token"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Limite de taxa excedido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "example": "RATE_LIMIT_EXCEEDED"
                        },
                        "message": {
                          "type": "string",
                          "example": "Too many refresh attempts"
                        },
                        "retry_after": {
                          "type": "number",
                          "example": 60
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "example": "INTERNAL_ERROR"
                        },
                        "message": {
                          "type": "string",
                          "example": "Token refresh failed"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/search-terms": {
      "post": {
        "summary": "Criar novo termo de busca",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSearchTermData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Termo de busca criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos ou termo já existe"
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar termos de busca com filtros e paginação",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "categoria",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por categoria"
          },
          {
            "in": "query",
            "name": "ativo",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtrar por status ativo/inativo"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Buscar por termo ou descrição"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "Número da página"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "description": "Registros por página"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de termos de busca",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/ListSearchTermsResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/search-terms/{id}": {
      "get": {
        "summary": "Buscar termo de busca por ID",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do termo de busca"
          }
        ],
        "responses": {
          "200": {
            "description": "Termo de busca encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Termo de busca não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar termo de busca",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do termo de busca"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSearchTermData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Termo de busca atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos ou termo já existe"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Termo de busca não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Remover termo de busca (soft delete)",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do termo de busca"
          }
        ],
        "responses": {
          "200": {
            "description": "Termo de busca removido com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Termo de busca removido com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Termo de busca não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/search-terms/categories": {
      "get": {
        "summary": "Listar categorias disponíveis",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de categorias",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermCategoriesResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/search-terms/stats": {
      "get": {
        "summary": "Obter estatísticas dos termos de busca",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estatísticas dos termos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermStatsResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/sessions": {
      "post": {
        "summary": "Criar uma nova sessão",
        "description": "Cria uma nova sessão de usuário para autenticação.\nSuporta compartilhamento de dispositivo onde clientes web e extensão podem compartilhar a mesma sessão via device_id.\nAplica limites de sessão da empresa baseados no plano de assinatura.\n",
        "tags": [
          "Sessões"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "user_id",
                  "empresa_id",
                  "device_id",
                  "refresh_token_hash",
                  "device_fingerprint",
                  "client_type",
                  "expires_at"
                ],
                "properties": {
                  "user_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "user-uuid"
                  },
                  "empresa_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "empresa-uuid"
                  },
                  "device_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "refresh_token_hash": {
                    "type": "string",
                    "example": "hashed_token_value"
                  },
                  "device_fingerprint": {
                    "type": "string",
                    "example": "fp_1234567890abcdef"
                  },
                  "client_type": {
                    "type": "string",
                    "enum": [
                      "web",
                      "extension"
                    ],
                    "example": "web"
                  },
                  "expires_at": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-09-16T11:15:00Z"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Metadados adicionais da sessão"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sessão criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SessionResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisição inválidos"
          },
          "403": {
            "description": "Limite de sessões atingido"
          },
          "409": {
            "description": "Conflito de sessão (dispositivo já possui sessão ativa)"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/sessions/{sessionId}/validate": {
      "post": {
        "summary": "Validar uma sessão",
        "description": "Valida uma sessão existente com verificações de segurança abrangentes.\nAtualiza o timestamp da última atividade e realiza validação de impressão digital do dispositivo.\n",
        "tags": [
          "Sessões"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da sessão para validar",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "device_id",
                  "device_fingerprint",
                  "client_type"
                ],
                "properties": {
                  "device_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "device_fingerprint": {
                    "type": "string",
                    "example": "fp_1234567890abcdef"
                  },
                  "client_type": {
                    "type": "string",
                    "enum": [
                      "web",
                      "extension"
                    ],
                    "example": "web"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resultado da validação da sessão",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "example": true
                        },
                        "session": {
                          "$ref": "#/components/schemas/SessionResponse"
                        },
                        "security_warning": {
                          "type": "string",
                          "description": "Aviso de segurança se aplicável",
                          "example": "A impressão digital do dispositivo foi alterada"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisição inválidos"
          },
          "404": {
            "description": "Sessão não encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/sessions/{sessionId}": {
      "delete": {
        "summary": "Revogar uma sessão",
        "description": "Revoga (encerra) uma sessão existente.\nApenas o proprietário da sessão ou administrador pode revogar uma sessão.\nA revogação afeta tanto o acesso web quanto da extensão para o dispositivo.\n",
        "tags": [
          "Sessões"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da sessão para revogar",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "device_id",
                  "reason",
                  "revoked_by"
                ],
                "properties": {
                  "device_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "reason": {
                    "type": "string",
                    "example": "user_logout"
                  },
                  "revoked_by": {
                    "type": "string",
                    "format": "uuid",
                    "example": "user-uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sessão revogada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Sessão revogada com sucesso"
                        },
                        "session_id": {
                          "type": "string",
                          "format": "uuid",
                          "example": "123e4567-e89b-12d3-a456-426614174000"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisição inválidos"
          },
          "403": {
            "description": "Dispositivo incompatível - não é possível revogar sessão de dispositivo diferente"
          },
          "404": {
            "description": "Sessão não encontrada"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/sessions/revoke-others": {
      "post": {
        "summary": "Revogar todas as outras sessões",
        "description": "Revoga todas as sessões do usuário atual exceto o dispositivo atual.\nUsado para funcionalidade \"sair de outros dispositivos\".\n",
        "tags": [
          "Sessões"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "user_id",
                  "keep_device_id",
                  "reason",
                  "revoked_by"
                ],
                "properties": {
                  "user_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "user-uuid"
                  },
                  "keep_device_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "reason": {
                    "type": "string",
                    "example": "logout_other_devices"
                  },
                  "revoked_by": {
                    "type": "string",
                    "format": "uuid",
                    "example": "user-uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Outras sessões revogadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "3 sessão(ões) revogada(s) com sucesso"
                        },
                        "revoked_count": {
                          "type": "number",
                          "example": 3
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request data"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/sessions/active": {
      "get": {
        "summary": "Listar sessões ativas do usuário",
        "description": "Lista todas as sessões ativas do usuário atual.\nInclui informações sobre dispositivos, tipos de cliente e atividade recente.\n",
        "tags": [
          "Sessões"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de sessões ativas retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "device_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "device_fingerprint": {
                            "type": "string"
                          },
                          "client_type": {
                            "type": "string",
                            "enum": [
                              "web",
                              "extension"
                            ]
                          },
                          "status": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "last_activity": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "expires_at": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "ip_address": {
                            "type": "string"
                          },
                          "user_agent": {
                            "type": "string"
                          },
                          "is_current": {
                            "type": "boolean"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/users": {
      "post": {
        "summary": "Criar novo usuário na empresa",
        "description": "Cria um novo usuário associado à empresa do token.\nRequer permissão CREATE_USER.\n\n**Regras de Hierarquia:**\n- Admin pode criar: admin, gerente, usuario\n- Gerente pode criar: usuario\n- Usuario não pode criar outros usuários\n\n**Segurança:**\n- Isolamento rigoroso por empresa (multi-tenant)\n- Prevenção de escalação de privilégios\n- Auditoria completa de criações\n",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nome",
                  "email",
                  "role"
                ],
                "properties": {
                  "nome": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100,
                    "description": "Nome completo do usuário",
                    "example": "João Silva Santos"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email único do usuário (será usado para login)",
                    "example": "joao.silva@empresa.com"
                  },
                  "telefone": {
                    "type": "string",
                    "minLength": 10,
                    "maxLength": 15,
                    "description": "Telefone do usuário (opcional)",
                    "example": "(11) 99999-9999"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "admin",
                      "gerente",
                      "usuario"
                    ],
                    "description": "Role inicial do usuário (sujeita à validação hierárquica)",
                    "example": "usuario"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "description": "Senha do usuário (opcional - se não fornecida, será gerada automaticamente)",
                    "example": "minhasenha123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuário criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuário 'João Silva Santos' criado com sucesso"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/UserResponse"
                        },
                        "inviteToken": {
                          "type": "string",
                          "description": "Token para primeiro acesso (se aplicável)"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Token inválido ou ausente"
          },
          "403": {
            "description": "Permissão insuficiente ou escalação de privilégios",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Usuário com role 'gerente' não pode atribuir role 'admin'"
                    },
                    "code": {
                      "type": "string",
                      "example": "ROLE_ASSIGNMENT_FORBIDDEN"
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Email já existe na empresa"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar usuários da empresa",
        "description": "Lista usuários da empresa com filtragem e paginação.\nFiltragem diferencial baseada no role do solicitante.\n\n**Acesso por Role:**\n- Admin: vê todos os usuários com dados completos\n- Gerente: vê todos exceto alguns metadados de admin\n- Usuario: vê apenas lista básica (nome, role)\n",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "description": "Página (inicia em 1)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "example": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "description": "Itens por página",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20
            }
          },
          {
            "in": "query",
            "name": "role",
            "description": "Filtrar por role específica",
            "schema": {
              "type": "string",
              "enum": [
                "admin",
                "gerente",
                "usuario"
              ],
              "example": "usuario"
            }
          },
          {
            "in": "query",
            "name": "ativo",
            "description": "Filtrar por status ativo",
            "schema": {
              "type": "boolean",
              "example": true
            }
          },
          {
            "in": "query",
            "name": "search",
            "description": "Buscar por nome ou email",
            "schema": {
              "type": "string",
              "minLength": 2,
              "example": "joão silva"
            }
          },
          {
            "in": "query",
            "name": "sortBy",
            "description": "Campo para ordenação",
            "schema": {
              "type": "string",
              "enum": [
                "nome",
                "email",
                "createdAt",
                "role"
              ],
              "default": "nome",
              "example": "createdAt"
            }
          },
          {
            "in": "query",
            "name": "sortOrder",
            "description": "Ordem da classificação",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc",
              "example": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de usuários",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "users": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/UserResponse"
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": {
                              "type": "integer",
                              "example": 1
                            },
                            "limit": {
                              "type": "integer",
                              "example": 20
                            },
                            "total": {
                              "type": "integer",
                              "example": 45
                            },
                            "totalPages": {
                              "type": "integer",
                              "example": 3
                            },
                            "hasNext": {
                              "type": "boolean",
                              "example": true
                            },
                            "hasPrev": {
                              "type": "boolean",
                              "example": false
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token inválido ou ausente"
          },
          "403": {
            "description": "Sem permissão para listar usuários"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/users/{id}": {
      "get": {
        "summary": "Buscar usuário por ID",
        "description": "Retorna dados de um usuário específico com filtragem baseada no role.\n\n**Filtragem Diferencial:**\n- Admin: vê todos os dados (incluindo telefone, status, timestamps)\n- Gerente: vê dados completos exceto alguns metadados\n- Usuario: vê apenas dados básicos (nome, email, role)\n\n**Acesso Próprio:**\n- Qualquer usuário pode ver seu próprio perfil completo\n",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "UUID do usuário",
            "schema": {
              "type": "string",
              "format": "uuid",
              "example": "123e4567-e89b-12d3-a456-426614174000"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usuário encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/UserResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token inválido ou ausente"
          },
          "403": {
            "description": "Sem permissão para ver este usuário"
          },
          "404": {
            "description": "Usuário não encontrado na empresa"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar usuário",
        "description": "Atualiza dados de um usuário com validação hierárquica.\n\n**Regras:**\n- Usuários podem atualizar apenas nome/telefone próprios\n- Admin/Gerente podem atualizar outros usuários\n- Gerente não pode atualizar Admin\n- Status 'ativo' requer permissões especiais\n",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "UUID do usuário",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nome": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100,
                    "example": "João Silva Santos Atualizado"
                  },
                  "telefone": {
                    "type": "string",
                    "minLength": 10,
                    "maxLength": 15,
                    "example": "(11) 88888-8888"
                  },
                  "ativo": {
                    "type": "boolean",
                    "description": "Apenas Admin/Gerente podem alterar",
                    "example": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usuário atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuário 'João Silva Santos' foi atualizado com sucesso"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/UserResponse"
                        },
                        "updatedFields": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": [
                            "nome",
                            "telefone"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Token inválido ou ausente"
          },
          "403": {
            "description": "Sem permissão para atualizar este usuário"
          },
          "404": {
            "description": "Usuário não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Desativar usuário (soft delete)",
        "description": "Remove usuário da empresa (soft delete) preservando dados do auth.users.\n\n**Proteções:**\n- Não pode desativar a si mesmo\n- Gerente não pode desativar Admin\n- Não pode desativar o último Admin da empresa\n\n**Funcionamento:**\n- Remove registro da tabela empresa_user\n- Preserva usuário no auth.users do Supabase\n- Permite reativação futura\n",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "UUID do usuário",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "reason": {
                    "type": "string",
                    "maxLength": 255,
                    "description": "Motivo da desativação (para auditoria)",
                    "example": "Saída da empresa"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usuário desativado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuário 'João Silva Santos' foi desativado com sucesso"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "deactivatedUser": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "nome": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "role": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos"
          },
          "401": {
            "description": "Token inválido ou ausente"
          },
          "403": {
            "description": "Sem permissão ou violação de proteção",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Não é possível desativar o último administrador da empresa"
                    },
                    "code": {
                      "type": "string",
                      "example": "LAST_ADMIN_PROTECTION"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Usuário não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/users/{id}/roles": {
      "post": {
        "summary": "Atribuir role ao usuário",
        "description": "Atribui nova role ao usuário com validação hierárquica rigorosa.\n\n**Matriz de Permissões:**\n- Admin: pode atribuir admin, gerente, usuario\n- Gerente: pode atribuir apenas usuario\n- Usuario: não pode atribuir roles\n\n**Proteções:**\n- Não pode alterar própria role\n- Gerente não pode promover/rebaixar Admin\n- Não pode rebaixar último Admin da empresa\n- Auditoria crítica para promoções a Admin\n",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "UUID do usuário",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "newRole"
                ],
                "properties": {
                  "newRole": {
                    "type": "string",
                    "enum": [
                      "admin",
                      "gerente",
                      "usuario"
                    ],
                    "description": "Nova role para o usuário",
                    "example": "gerente"
                  },
                  "reason": {
                    "type": "string",
                    "maxLength": 255,
                    "description": "Motivo da mudança (para auditoria)",
                    "example": "Promoção para liderança de equipe"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Role atribuída com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Role 'gerente' atribuída com sucesso ao usuário 'João Silva'"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "nome": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "previousRole": {
                              "type": "string"
                            },
                            "newRole": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos ou role já atribuída",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Usuário já possui a role 'gerente'"
                    },
                    "code": {
                      "type": "string",
                      "example": "ROLE_UNCHANGED"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token inválido ou ausente"
          },
          "403": {
            "description": "Sem permissão ou violação hierárquica",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Usuário com role 'gerente' não pode atribuir role 'admin'"
                    },
                    "code": {
                      "type": "string",
                      "example": "ROLE_ASSIGNMENT_FORBIDDEN"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Usuário não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/users/me": {
      "get": {
        "summary": "Obter perfil próprio",
        "description": "Retorna dados completos do usuário autenticado.\nNão requer permissões especiais além da autenticação.\n",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Perfil do usuário",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/UserResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token inválido ou ausente"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar perfil próprio",
        "description": "Permite que usuário atualize apenas nome e telefone próprios.\nPara outras alterações, usar endpoint de administração.\n",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nome": {
                    "type": "string",
                    "minLength": 2,
                    "maxLength": 100,
                    "example": "João Silva Santos"
                  },
                  "telefone": {
                    "type": "string",
                    "minLength": 10,
                    "maxLength": 15,
                    "example": "(11) 99999-9999"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Perfil atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Seu perfil foi atualizado com sucesso"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/UserResponse"
                        },
                        "updatedFields": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": [
                            "nome",
                            "telefone"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos ou campos não permitidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Usuário não pode alterar seu próprio ativo"
                    },
                    "code": {
                      "type": "string",
                      "example": "SELF_UPDATE_FORBIDDEN"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Token inválido ou ausente"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/workers/leads-temp/status": {
      "get": {
        "summary": "Obter status do worker de importação de leads temporários",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status do worker recuperado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "isRunning": {
                          "type": "boolean"
                        },
                        "errorCount": {
                          "type": "number"
                        },
                        "maxErrors": {
                          "type": "number"
                        },
                        "lastProcessedTime": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "config": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/workers/leads-temp/start": {
      "post": {
        "summary": "Iniciar worker de importação de leads temporários",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Worker iniciado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker started successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Worker já está em execução"
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/workers/leads-temp/stop": {
      "post": {
        "summary": "Parar worker de importação de leads temporários",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Worker parado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker parado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/workers/leads-temp/consumer/start": {
      "post": {
        "summary": "Iniciar serviço de consumidor de mensagens",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Consumer iniciado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Consumer iniciado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/workers/leads-temp/consumer/stop": {
      "post": {
        "summary": "Parar serviço de consumidor de mensagens",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Consumer parado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Consumer parado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/workers/leads-temp/consumer/status": {
      "get": {
        "summary": "Obter status do serviço de consumidor de mensagens",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status do consumer recuperado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "isStarted": {
                          "type": "boolean"
                        },
                        "consumerCount": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles": {
      "get": {
        "summary": "Obter status de todos os workers",
        "description": "Retorna o status atual de todos os workers (habilitado/desabilitado e concurrency)",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status dos workers obtido com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "googleMapsLinksPublisher": {
                          "type": "object",
                          "properties": {
                            "enabled": {
                              "type": "boolean",
                              "example": true
                            },
                            "concurrency": {
                              "type": "number",
                              "example": 2
                            }
                          }
                        },
                        "googleMapsDetailsConsumer": {
                          "type": "object",
                          "properties": {
                            "enabled": {
                              "type": "boolean",
                              "example": false
                            },
                            "concurrency": {
                              "type": "number",
                              "example": 1
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles/{workerName}/enable": {
      "post": {
        "summary": "Habilitar um worker específico",
        "description": "Habilita um worker específico para processamento",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "workerName",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "googleMapsLinksPublisher",
                "googleMapsDetailsConsumer",
                "leads-temp-processor"
              ]
            },
            "description": "Nome do worker a ser habilitado",
            "example": "googleMapsLinksPublisher"
          }
        ],
        "responses": {
          "200": {
            "description": "Worker habilitado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker googleMapsLinksPublisher habilitado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nome do worker é obrigatório"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Worker não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles/{workerName}/disable": {
      "post": {
        "summary": "Desabilitar um worker específico",
        "description": "Desabilita um worker específico para interromper o processamento",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "workerName",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "googleMapsLinksPublisher",
                "googleMapsDetailsConsumer",
                "leads-temp-processor"
              ]
            },
            "description": "Nome do worker a ser desabilitado",
            "example": "googleMapsDetailsConsumer"
          }
        ],
        "responses": {
          "200": {
            "description": "Worker desabilitado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker googleMapsDetailsConsumer desabilitado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nome do worker é obrigatório"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Worker não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles/{workerName}/concurrency": {
      "put": {
        "summary": "Atualizar concurrency de um worker",
        "description": "Atualiza o número de instâncias concorrentes de um worker",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "workerName",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "googleMapsLinksPublisher",
                "googleMapsDetailsConsumer",
                "leads-temp-processor"
              ]
            },
            "description": "Nome do worker",
            "example": "googleMapsLinksPublisher"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "concurrency"
                ],
                "properties": {
                  "concurrency": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Número de instâncias concorrentes",
                    "example": 5
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Concurrency atualizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Concurrency do worker googleMapsLinksPublisher atualizada para 5"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inválidos (nome do worker obrigatório ou concurrency inválido)"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Worker não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles/{workerName}/config": {
      "get": {
        "summary": "Obter configuração de um worker específico",
        "description": "Retorna a configuração atual de um worker específico (habilitado/desabilitado e concurrency)",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "workerName",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "googleMapsLinksPublisher",
                "googleMapsDetailsConsumer",
                "leads-temp-processor"
              ]
            },
            "description": "Nome do worker",
            "example": "googleMapsLinksPublisher"
          }
        ],
        "responses": {
          "200": {
            "description": "Configuração do worker obtida com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "enabled": {
                          "type": "boolean",
                          "example": true
                        },
                        "concurrency": {
                          "type": "number",
                          "example": 2
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nome do worker é obrigatório"
          },
          "401": {
            "description": "Não autorizado"
          },
          "404": {
            "description": "Worker não encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    }
  }
}