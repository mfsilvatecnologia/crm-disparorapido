{
  "openapi": "3.0.0",
  "info": {
    "title": "LeadsRapido MCP Tools API",
    "version": "1.0.0",
    "description": "API para acesso √†s ferramentas MCP de consulta de dados PH3A.\n\n## Ferramentas Dispon√≠veis:\n\n\n## Autentica√ß√£o:\nTodas as requisi√ß√µes requerem autentica√ß√£o via Bearer Token (JWT).",
    "contact": {
      "name": "API Support",
      "email": "support@leadsrapido.com.br"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Development server"
    },
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Development server"
    },
    {
      "url": "http://localhost:3000",
      "description": "Servidor de desenvolvimento"
    }
  ],
  "tags": [
    {
      "name": "Autentica√ß√£o",
      "description": "Autentica√ß√£o e autoriza√ß√£o"
    },
    {
      "name": "Empresas",
      "description": "Opera√ß√µes relacionadas a empresas"
    },
    {
      "name": "Users",
      "description": "Gerenciamento de usu√°rios"
    },
    {
      "name": "Leads",
      "description": "Gerenciamento de leads B2B"
    },
    {
      "name": "Lead Processing",
      "description": "Processamento de leads em lote e monitoramento"
    },
    {
      "name": "Campanhas",
      "description": "Campanhas de prospec√ß√£o"
    },
    {
      "name": "Opportunities",
      "description": "Gest√£o de oportunidades de venda"
    },
    {
      "name": "Customers",
      "description": "Gest√£o de clientes e relacionamento"
    },
    {
      "name": "Customer Activities",
      "description": "Atividades e intera√ß√µes com clientes"
    },
    {
      "name": "Customer Contacts",
      "description": "Contatos de clientes e gest√£o de relacionamento"
    },
    {
      "name": "Customer Contracts",
      "description": "Gest√£o de contratos de clientes e renova√ß√µes"
    },
    {
      "name": "Workers",
      "description": "Controle e monitoramento de workers em background"
    },
    {
      "name": "Feature Toggle",
      "description": "Controle de features e workers via toggles"
    },
    {
      "name": "System",
      "description": "Endpoints do sistema"
    },
    {
      "name": "Search Terms",
      "description": "Gerenciamento de termos de busca"
    },
    {
      "name": "Google Maps Scraping",
      "description": "Opera√ß√µes relacionadas ao scraping do Google Maps"
    },
    {
      "name": "Webhooks",
      "description": "Configura√ß√£o e gerenciamento de webhooks"
    },
    {
      "name": "Dashboard",
      "description": "M√©tricas e analytics centralizados"
    },
    {
      "name": "DisparoRapido",
      "description": "Integra√ß√£o com a extens√£o DisparoRapido para WhatsApp"
    },
    {
      "name": "MCP Tools",
      "description": "üîå Model Context Protocol - Ferramentas de IA para automa√ß√£o e consultas avan√ßadas"
    },
    {
      "name": "MCP - Disparo R√°pido",
      "description": "Model Context Protocol endpoints para cliente Disparo R√°pido (WhatsApp automation)"
    },
    {
      "name": "MCP - Lean Quality",
      "description": "Model Context Protocol endpoints para cliente Lean Quality (Problem solving MASP/8D/A3)"
    },
    {
      "name": "MCP - Vendas IA",
      "description": "Model Context Protocol endpoints exclusivos para platform owner (Vendas IA)"
    },
    {
      "name": "MCP Tools",
      "description": "Ferramentas MCP para consulta de dados PH3A (Pessoa F√≠sica e Jur√≠dica)"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT Bearer token para autentica√ß√£o de usu√°rios"
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string",
            "description": "Mensagem de erro"
          },
          "message": {
            "type": "string",
            "description": "Mensagem adicional do erro (opcional)"
          },
          "details": {
            "type": "object",
            "description": "Detalhes adicionais do erro (opcional)"
          }
        },
        "required": [
          "success",
          "error",
          "success",
          "error"
        ]
      },
      "Status": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "operational",
              "maintenance",
              "error",
              "operational",
              "maintenance",
              "error"
            ]
          },
          "version": {
            "type": "string"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LeadId": {
        "type": "string",
        "format": "uuid",
        "description": "Identificador √∫nico do lead",
        "example": "550e8400-e29b-41d4-a716-446655440000"
      },
      "QualityScore": {
        "type": "integer",
        "minimum": 0,
        "maximum": 100,
        "description": "Score de qualifica√ß√£o do lead (0-100)",
        "example": 85
      },
      "LeadStatus": {
        "type": "string",
        "enum": [
          "NOVO",
          "CONTATADO",
          "QUALIFICADO",
          "PROPOSTA_ENVIADA",
          "GANHO",
          "PERDIDO"
        ],
        "description": "Status atual do lead",
        "example": "QUALIFICADO"
      },
      "FonteLead": {
        "type": "string",
        "enum": [
          "MANUAL",
          "WEBSITE",
          "LINKEDIN",
          "INDICACAO",
          "EVENTO",
          "OUTROS"
        ],
        "description": "Fonte/origem do lead",
        "example": "LINKEDIN"
      },
      "PorteEmpresa": {
        "type": "string",
        "enum": [
          "MEI",
          "Micro",
          "Pequena",
          "M√©dia",
          "Grande"
        ],
        "description": "Porte da empresa",
        "example": "Pequena"
      },
      "EnderecoCompleto": {
        "type": "object",
        "properties": {
          "rua": {
            "type": "string",
            "description": "Nome da rua",
            "example": "Rua das Flores"
          },
          "numero": {
            "type": "string",
            "description": "N√∫mero do endere√ßo",
            "example": "123"
          },
          "cidade": {
            "type": "string",
            "description": "Cidade",
            "example": "S√£o Paulo"
          },
          "estado": {
            "type": "string",
            "description": "Estado",
            "example": "SP"
          },
          "cep": {
            "type": "string",
            "description": "CEP",
            "example": "01234-567"
          },
          "pais": {
            "type": "string",
            "description": "Pa√≠s",
            "example": "Brasil"
          },
          "latitude": {
            "type": "number",
            "format": "float",
            "description": "Latitude",
            "example": -23.55052
          },
          "longitude": {
            "type": "number",
            "format": "float",
            "description": "Longitude",
            "example": -46.633308
          }
        },
        "required": [
          "rua",
          "numero",
          "cidade",
          "estado",
          "cep",
          "pais"
        ]
      },
      "CreateLeadDTO": {
        "type": "object",
        "required": [
          "organizationId",
          "nomeEmpresa"
        ],
        "properties": {
          "organizationId": {
            "type": "string",
            "description": "ID da organiza√ß√£o (multi-tenant)",
            "example": "org-123"
          },
          "nomeEmpresa": {
            "type": "string",
            "description": "Nome da empresa",
            "example": "Tech Solutions Ltda"
          },
          "nomeContato": {
            "type": "string",
            "description": "Nome do contato principal",
            "example": "Jo√£o Silva"
          },
          "cargoContato": {
            "type": "string",
            "description": "Cargo do contato",
            "example": "Diretor de TI"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do contato",
            "example": "joao.silva@techsolutions.com"
          },
          "telefone": {
            "type": "string",
            "description": "Telefone do contato",
            "example": "(11) 99999-9999"
          },
          "linkedinUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL do LinkedIn",
            "example": "https://linkedin.com/in/joaosilva"
          },
          "siteEmpresa": {
            "type": "string",
            "format": "uri",
            "description": "Website da empresa",
            "example": "https://techsolutions.com"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ da empresa",
            "example": "12.345.678/0001-90"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atua√ß√£o",
            "example": "Tecnologia da Informa√ß√£o"
          },
          "porteEmpresa": {
            "$ref": "#/components/schemas/PorteEmpresa"
          },
          "numFuncionarios": {
            "type": "integer",
            "description": "N√∫mero de funcion√°rios",
            "example": 50
          },
          "receitaAnualEstimada": {
            "type": "number",
            "format": "float",
            "description": "Receita anual estimada (R$)",
            "example": 5000000
          },
          "endereco": {
            "$ref": "#/components/schemas/EnderecoCompleto"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags para categoriza√ß√£o",
            "example": [
              "tecnologia",
              "startup",
              "sao-paulo"
            ]
          },
          "observacoes": {
            "type": "string",
            "description": "Observa√ß√µes adicionais",
            "example": "Empresa em crescimento, interessada em solu√ß√µes de IA"
          },
          "fonte": {
            "$ref": "#/components/schemas/FonteLead"
          },
          "dadosOriginais": {
            "type": "object",
            "description": "Dados originais da fonte",
            "example": {
              "campaign_id": "camp-123",
              "source": "linkedin-ads"
            }
          },
          "custoAquisicao": {
            "type": "number",
            "format": "float",
            "description": "Custo de aquisi√ß√£o (R$)",
            "example": 150
          }
        }
      },
      "UpdateLeadDTO": {
        "type": "object",
        "properties": {
          "nomeContato": {
            "type": "string",
            "description": "Nome do contato principal",
            "example": "Jo√£o Silva"
          },
          "cargoContato": {
            "type": "string",
            "description": "Cargo do contato",
            "example": "Diretor de TI"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do contato",
            "example": "joao.silva@techsolutions.com"
          },
          "telefone": {
            "type": "string",
            "description": "Telefone do contato",
            "example": "(11) 99999-9999"
          },
          "linkedinUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL do LinkedIn",
            "example": "https://linkedin.com/in/joaosilva"
          },
          "siteEmpresa": {
            "type": "string",
            "format": "uri",
            "description": "Website da empresa",
            "example": "https://techsolutions.com"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ da empresa",
            "example": "12.345.678/0001-90"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atua√ß√£o",
            "example": "Tecnologia da Informa√ß√£o"
          },
          "porteEmpresa": {
            "$ref": "#/components/schemas/PorteEmpresa"
          },
          "numFuncionarios": {
            "type": "integer",
            "description": "N√∫mero de funcion√°rios",
            "example": 50
          },
          "receitaAnualEstimada": {
            "type": "number",
            "format": "float",
            "description": "Receita anual estimada (R$)",
            "example": 5000000
          },
          "endereco": {
            "$ref": "#/components/schemas/EnderecoCompleto"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags para categoriza√ß√£o",
            "example": [
              "tecnologia",
              "startup",
              "sao-paulo"
            ]
          },
          "observacoes": {
            "type": "string",
            "description": "Observa√ß√µes adicionais",
            "example": "Empresa em crescimento, interessada em solu√ß√µes de IA"
          },
          "dadosOriginais": {
            "type": "object",
            "description": "Dados originais da fonte",
            "example": {
              "campaign_id": "camp-123",
              "source": "linkedin-ads"
            }
          },
          "custoAquisicao": {
            "type": "number",
            "format": "float",
            "description": "Custo de aquisi√ß√£o (R$)",
            "example": 150
          }
        }
      },
      "LeadFiltersDTO": {
        "type": "object",
        "properties": {
          "status": {
            "$ref": "#/components/schemas/LeadStatus"
          },
          "scoreMin": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100,
            "description": "Score m√≠nimo",
            "example": 70
          },
          "scoreMax": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100,
            "description": "Score m√°ximo",
            "example": 100
          },
          "segmento": {
            "type": "string",
            "description": "Filtrar por segmento",
            "example": "Tecnologia"
          },
          "porteEmpresa": {
            "$ref": "#/components/schemas/PorteEmpresa"
          },
          "fonte": {
            "$ref": "#/components/schemas/FonteLead"
          },
          "search": {
            "type": "string",
            "description": "Busca textual (nome empresa, contato, email)",
            "example": "Tech Solutions"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Filtrar por tags",
            "example": [
              "tecnologia",
              "startup"
            ]
          },
          "createdAfter": {
            "type": "string",
            "format": "date-time",
            "description": "Criado ap√≥s esta data",
            "example": "2024-01-01T00:00:00Z"
          },
          "createdBefore": {
            "type": "string",
            "format": "date-time",
            "description": "Criado antes desta data",
            "example": "2024-12-31T23:59:59Z"
          }
        }
      },
      "PaginationDTO": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "minimum": 1,
            "default": 1,
            "description": "P√°gina atual",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "default": 20,
            "description": "Itens por p√°gina",
            "example": 20
          },
          "sortBy": {
            "type": "string",
            "default": "createdAt",
            "description": "Campo para ordena√ß√£o",
            "example": "createdAt"
          },
          "sortOrder": {
            "type": "string",
            "enum": [
              "asc",
              "desc"
            ],
            "default": "desc",
            "description": "Dire√ß√£o da ordena√ß√£o",
            "example": "desc"
          }
        }
      },
      "LeadResponseDTO": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/LeadId"
          },
          "organizationId": {
            "type": "string",
            "description": "ID da organiza√ß√£o",
            "example": "org-123"
          },
          "nomeEmpresa": {
            "type": "string",
            "description": "Nome da empresa",
            "example": "Tech Solutions Ltda"
          },
          "nomeContato": {
            "type": "string",
            "description": "Nome do contato principal",
            "example": "Jo√£o Silva"
          },
          "cargoContato": {
            "type": "string",
            "description": "Cargo do contato",
            "example": "Diretor de TI"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do contato",
            "example": "joao.silva@techsolutions.com"
          },
          "telefone": {
            "type": "string",
            "description": "Telefone do contato",
            "example": "(11) 99999-9999"
          },
          "linkedinUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL do LinkedIn",
            "example": "https://linkedin.com/in/joaosilva"
          },
          "siteEmpresa": {
            "type": "string",
            "format": "uri",
            "description": "Website da empresa",
            "example": "https://techsolutions.com"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ da empresa",
            "example": "12.345.678/0001-90"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atua√ß√£o",
            "example": "Tecnologia da Informa√ß√£o"
          },
          "porteEmpresa": {
            "$ref": "#/components/schemas/PorteEmpresa"
          },
          "numFuncionarios": {
            "type": "integer",
            "description": "N√∫mero de funcion√°rios",
            "example": 50
          },
          "receitaAnualEstimada": {
            "type": "number",
            "format": "float",
            "description": "Receita anual estimada (R$)",
            "example": 5000000
          },
          "endereco": {
            "$ref": "#/components/schemas/EnderecoCompleto"
          },
          "status": {
            "$ref": "#/components/schemas/LeadStatus"
          },
          "scoreQualificacao": {
            "$ref": "#/components/schemas/QualityScore"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags para categoriza√ß√£o",
            "example": [
              "tecnologia",
              "startup",
              "sao-paulo"
            ]
          },
          "observacoes": {
            "type": "string",
            "description": "Observa√ß√µes adicionais",
            "example": "Empresa em crescimento, interessada em solu√ß√µes de IA"
          },
          "fonte": {
            "$ref": "#/components/schemas/FonteLead"
          },
          "dadosOriginais": {
            "type": "object",
            "description": "Dados originais da fonte",
            "example": {
              "campaign_id": "camp-123",
              "source": "linkedin-ads"
            }
          },
          "custoAquisicao": {
            "type": "number",
            "format": "float",
            "description": "Custo de aquisi√ß√£o (R$)",
            "example": 150
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data de cria√ß√£o",
            "example": "2024-08-31T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data de atualiza√ß√£o",
            "example": "2024-08-31T15:45:00Z"
          }
        },
        "required": [
          "id",
          "organizationId",
          "nomeEmpresa",
          "fonte",
          "status",
          "scoreQualificacao",
          "createdAt",
          "updatedAt"
        ]
      },
      "PagedLeadResponse": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LeadResponseDTO"
            },
            "description": "Lista de leads"
          },
          "total": {
            "type": "integer",
            "description": "Total de itens",
            "example": 150
          },
          "page": {
            "type": "integer",
            "description": "P√°gina atual",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "description": "Itens por p√°gina",
            "example": 20
          },
          "totalPages": {
            "type": "integer",
            "description": "Total de p√°ginas",
            "example": 8
          },
          "hasNext": {
            "type": "boolean",
            "description": "Tem pr√≥xima p√°gina",
            "example": true
          },
          "hasPrev": {
            "type": "boolean",
            "description": "Tem p√°gina anterior",
            "example": false
          }
        },
        "required": [
          "items",
          "total",
          "page",
          "limit",
          "totalPages",
          "hasNext",
          "hasPrev"
        ]
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "Dados da resposta"
          },
          "message": {
            "type": "string",
            "description": "Mensagem de sucesso",
            "example": "Opera√ß√£o realizada com sucesso"
          }
        },
        "required": [
          "success"
        ]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "description": "Mensagem de erro",
            "example": "Dados inv√°lidos"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "CreateEmpresaData": {
        "type": "object",
        "required": [
          "nome",
          "cnpj",
          "email"
        ],
        "properties": {
          "nome": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "description": "Nome da empresa",
            "example": "Tech Solutions Ltda"
          },
          "cnpj": {
            "type": "string",
            "pattern": "^(\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}\\-\\d{2}|\\d{14}|\\d{3}\\.\\d{3}\\.\\d{3}\\-\\d{2}|\\d{11})$",
            "description": "CNPJ/CPF da empresa - Aceita CNPJ (14 d√≠gitos) ou CPF (11 d√≠gitos) com ou sem formata√ß√£o",
            "example": "12.345.678/0001-90"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email da empresa",
            "example": "contato@techsolutions.com"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atua√ß√£o",
            "example": "Tecnologia da Informa√ß√£o"
          },
          "recursos_interesse": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Recursos de interesse",
            "example": [
              "api",
              "dashboard",
              "relat√≥rios"
            ]
          },
          "rua": {
            "type": "string",
            "description": "Rua",
            "example": "Rua das Flores"
          },
          "numero": {
            "type": "string",
            "description": "N√∫mero",
            "example": "123"
          },
          "bairro": {
            "type": "string",
            "description": "Bairro",
            "example": "Centro"
          },
          "cidade": {
            "type": "string",
            "description": "Cidade",
            "example": "S√£o Paulo"
          },
          "estado": {
            "type": "string",
            "description": "Estado",
            "example": "SP"
          },
          "cep": {
            "type": "string",
            "description": "CEP",
            "example": "01234-567"
          }
        }
      },
      "UpdateEmpresaData": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "description": "Nome da empresa"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email da empresa"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atua√ß√£o"
          },
          "recursos_interesse": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Recursos de interesse"
          },
          "rua": {
            "type": "string",
            "description": "Rua"
          },
          "numero": {
            "type": "string",
            "description": "N√∫mero"
          },
          "bairro": {
            "type": "string",
            "description": "Bairro"
          },
          "cidade": {
            "type": "string",
            "description": "Cidade"
          },
          "estado": {
            "type": "string",
            "description": "Estado"
          },
          "cep": {
            "type": "string",
            "description": "CEP"
          }
        }
      },
      "EmpresaResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID da empresa",
            "example": "emp-123"
          },
          "nome": {
            "type": "string",
            "description": "Nome da empresa",
            "example": "Tech Solutions Ltda"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ/CPF da empresa",
            "example": "12.345.678/0001-90"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email da empresa"
          },
          "saldo_creditos": {
            "type": "number",
            "description": "Saldo de cr√©ditos",
            "example": 1000
          },
          "api_key": {
            "type": "string",
            "description": "API Key da empresa"
          },
          "segmento": {
            "type": "string",
            "description": "Segmento de atua√ß√£o"
          },
          "recursos_interesse": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Recursos de interesse"
          },
          "rua": {
            "type": "string",
            "description": "Rua"
          },
          "numero": {
            "type": "string",
            "description": "N√∫mero"
          },
          "bairro": {
            "type": "string",
            "description": "Bairro"
          },
          "cidade": {
            "type": "string",
            "description": "Cidade"
          },
          "estado": {
            "type": "string",
            "description": "Estado"
          },
          "cep": {
            "type": "string",
            "description": "CEP"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de cria√ß√£o"
          }
        },
        "required": [
          "id",
          "nome",
          "cnpj",
          "email",
          "saldo_creditos",
          "api_key",
          "created_at"
        ]
      },
      "RegisterRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do usu√°rio (ser√° o login)",
            "example": "usuario@empresa.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "description": "Senha do usu√°rio (m√≠nimo 8 caracteres)",
            "example": "senha123"
          },
          "cnpj": {
            "type": "string",
            "pattern": "^(\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}\\-\\d{2}|\\d{14}|\\d{3}\\.\\d{3}\\.\\d{3}\\-\\d{2}|\\d{11})$",
            "description": "CNPJ/CPF da empresa (opcional - aceita CNPJ 14 d√≠gitos ou CPF 11 d√≠gitos)",
            "example": "12.345.678/0001-90"
          },
          "empresa": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "description": "Nome da empresa (opcional)",
            "example": "Minha Empresa Ltda"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do usu√°rio",
            "example": "usuario@empresa.com"
          },
          "password": {
            "type": "string",
            "description": "Senha do usu√°rio",
            "example": "senha123"
          },
          "cnpj": {
            "type": "string",
            "description": "CNPJ/CPF da empresa (opcional para login)",
            "example": "12.345.678/0001-90"
          },
          "empresa_id": {
            "type": "string",
            "description": "ID da empresa (opcional - deprecated, use cnpj)",
            "example": "emp-123"
          }
        }
      },
      "ResetPasswordRequest": {
        "type": "object",
        "required": [
          "email"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do usu√°rio",
            "example": "usuario@empresa.com"
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "token": {
            "type": "string",
            "description": "JWT token de autentica√ß√£o",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "ID do usu√°rio",
                "example": "user-123"
              },
              "email": {
                "type": "string",
                "format": "email",
                "description": "Email do usu√°rio"
              },
              "role": {
                "type": "string",
                "description": "Role do usu√°rio",
                "example": "admin"
              },
              "empresa_id": {
                "type": "string",
                "description": "ID da empresa vinculada",
                "example": "emp-123"
              }
            }
          }
        },
        "required": [
          "success",
          "token",
          "user"
        ]
      },
      "RegisterResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Usu√°rio e empresa criados com sucesso."
          },
          "data": {
            "type": "object",
            "properties": {
              "user": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "ID do usu√°rio"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email do usu√°rio"
                  }
                }
              },
              "empresa": {
                "type": "object",
                "nullable": true,
                "description": "Dados da empresa (null se n√£o foi criada)",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "ID da empresa"
                  },
                  "nome": {
                    "type": "string",
                    "description": "Nome da empresa"
                  },
                  "cnpj": {
                    "type": "string",
                    "description": "CNPJ da empresa"
                  }
                }
              }
            }
          }
        },
        "required": [
          "success",
          "message",
          "data"
        ]
      },
      "UserResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID do usu√°rio",
            "example": "user-123"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email do usu√°rio"
          },
          "nome": {
            "type": "string",
            "description": "Nome do usu√°rio",
            "example": "Jo√£o Silva"
          },
          "telefone": {
            "type": "string",
            "description": "Telefone do usu√°rio",
            "example": "(11) 99999-9999"
          },
          "ativo": {
            "type": "boolean",
            "description": "Se o usu√°rio est√° ativo",
            "example": true
          },
          "role": {
            "type": "string",
            "description": "Role do usu√°rio",
            "example": "admin"
          },
          "empresa_id": {
            "type": "string",
            "description": "ID da empresa vinculada",
            "example": "emp-123"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de cria√ß√£o"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de atualiza√ß√£o"
          }
        },
        "required": [
          "id",
          "email",
          "ativo",
          "role",
          "empresa_id",
          "created_at"
        ]
      },
      "CreateCampanhaData": {
        "type": "object",
        "required": [
          "nome",
          "tipo"
        ],
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome da campanha",
            "example": "Campanha LinkedIn Q1 2024"
          },
          "tipo": {
            "type": "string",
            "enum": [
              "scraping_web",
              "importacao_lista",
              "api_externa",
              "marketplace"
            ],
            "description": "Tipo da campanha",
            "example": "scraping_web"
          },
          "descricao": {
            "type": "string",
            "description": "Descri√ß√£o da campanha",
            "example": "Campanha de prospec√ß√£o via LinkedIn para o primeiro trimestre"
          },
          "configuracoes": {
            "type": "object",
            "description": "Configura√ß√µes espec√≠ficas da campanha",
            "example": {
              "palavras_chave": [
                "tecnologia",
                "startup"
              ],
              "localizacao": "S√£o Paulo"
            }
          }
        }
      },
      "UpdateCampanhaData": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "description": "Nome da campanha"
          },
          "descricao": {
            "type": "string",
            "description": "Descri√ß√£o da campanha"
          },
          "configuracoes": {
            "type": "object",
            "description": "Configura√ß√µes espec√≠ficas da campanha"
          }
        }
      },
      "UpdateCampanhaStatusData": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ativa",
              "pausada",
              "finalizada"
            ],
            "description": "Novo status da campanha",
            "example": "ativa"
          }
        }
      },
      "CampanhaResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID da campanha",
            "example": "camp-123"
          },
          "nome": {
            "type": "string",
            "description": "Nome da campanha",
            "example": "Campanha LinkedIn Q1 2024"
          },
          "tipo": {
            "type": "string",
            "description": "Tipo da campanha",
            "example": "scraping_web"
          },
          "descricao": {
            "type": "string",
            "description": "Descri√ß√£o da campanha"
          },
          "status": {
            "type": "string",
            "enum": [
              "ativa",
              "pausada",
              "finalizada"
            ],
            "description": "Status da campanha",
            "example": "ativa"
          },
          "configuracoes": {
            "type": "object",
            "description": "Configura√ß√µes da campanha"
          },
          "empresa_id": {
            "type": "string",
            "description": "ID da empresa propriet√°ria",
            "example": "emp-123"
          },
          "leads_count": {
            "type": "number",
            "description": "N√∫mero de leads gerados",
            "example": 45
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de cria√ß√£o"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de atualiza√ß√£o"
          }
        },
        "required": [
          "id",
          "nome",
          "tipo",
          "status",
          "empresa_id",
          "created_at"
        ]
      },
      "CreateOpportunityData": {
        "type": "object",
        "required": [
          "nome",
          "valor_estimado",
          "probabilidade",
          "estagio",
          "expected_close_date",
          "nome",
          "valor_estimado",
          "probabilidade",
          "estagio",
          "expected_close_date"
        ],
        "properties": {
          "lead_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true,
            "description": "ID do lead vinculado"
          },
          "nome": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "Nome da oportunidade",
            "example": "Proposta SaaS - Empresa XYZ"
          },
          "descricao": {
            "type": "string",
            "nullable": true,
            "description": "Descri√ß√£o detalhada da oportunidade"
          },
          "valor_estimado": {
            "type": "number",
            "minimum": 0,
            "description": "Valor estimado da oportunidade",
            "example": 50000
          },
          "probabilidade": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100,
            "description": "Probabilidade de fechamento (0-100%)",
            "example": 75
          },
          "estagio": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Est√°gio atual da oportunidade",
            "example": "Proposta Enviada"
          },
          "expected_close_date": {
            "type": "string",
            "format": "date-time",
            "description": "Data esperada de fechamento",
            "example": "2025-03-31T23:59:59Z"
          }
        }
      },
      "UpdateOpportunityData": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255
          },
          "descricao": {
            "type": "string",
            "nullable": true
          },
          "valor_estimado": {
            "type": "number",
            "minimum": 0
          },
          "probabilidade": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100
          },
          "estagio": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "status": {
            "type": "string",
            "enum": [
              "ABERTA",
              "EM_PROGRESSO",
              "ARQUIVADA",
              "ABERTA",
              "EM_PROGRESSO",
              "ARQUIVADA"
            ]
          },
          "expected_close_date": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "WinOpportunityData": {
        "type": "object",
        "required": [
          "customer_nome",
          "categoria",
          "contract_value",
          "contract_start_date",
          "contract_renewal_date",
          "customer_nome",
          "categoria",
          "contract_value",
          "contract_start_date",
          "contract_renewal_date"
        ],
        "properties": {
          "customer_nome": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "description": "Nome do cliente criado"
          },
          "customer_email": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "customer_telefone": {
            "type": "string",
            "minLength": 10,
            "maxLength": 20,
            "nullable": true
          },
          "customer_cnpj": {
            "type": "string",
            "pattern": "^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$",
            "nullable": true,
            "example": "12.345.678/0001-90"
          },
          "categoria": {
            "type": "string",
            "enum": [
              "OURO",
              "PRATA",
              "BRONZE",
              "STANDARD",
              "OURO",
              "PRATA",
              "BRONZE",
              "STANDARD"
            ],
            "default": "STANDARD"
          },
          "contract_value": {
            "type": "number",
            "minimum": 0.01
          },
          "contract_start_date": {
            "type": "string",
            "format": "date-time"
          },
          "contract_renewal_date": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LoseOpportunityData": {
        "type": "object",
        "required": [
          "lost_reason",
          "lost_reason"
        ],
        "properties": {
          "lost_reason": {
            "type": "string",
            "minLength": 1,
            "description": "Motivo da perda da oportunidade"
          }
        }
      },
      "OpportunityResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "empresa_id": {
            "type": "string",
            "format": "uuid"
          },
          "lead_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "nome": {
            "type": "string"
          },
          "descricao": {
            "type": "string",
            "nullable": true
          },
          "valor_estimado": {
            "type": "number"
          },
          "probabilidade": {
            "type": "integer"
          },
          "estagio": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "ABERTA",
              "EM_PROGRESSO",
              "GANHA",
              "PERDIDA",
              "ARQUIVADA",
              "ABERTA",
              "EM_PROGRESSO",
              "GANHA",
              "PERDIDA",
              "ARQUIVADA"
            ]
          },
          "expected_close_date": {
            "type": "string",
            "format": "date-time"
          },
          "actual_close_date": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "lost_reason": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateCustomerData": {
        "type": "object",
        "required": [
          "opportunity_id",
          "nome",
          "categoria",
          "contract_value",
          "contract_start_date",
          "contract_renewal_date",
          "opportunity_id",
          "nome",
          "categoria",
          "contract_value",
          "contract_start_date",
          "contract_renewal_date"
        ],
        "properties": {
          "opportunity_id": {
            "type": "string",
            "format": "uuid"
          },
          "lead_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "nome": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255
          },
          "email": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "telefone": {
            "type": "string",
            "minLength": 10,
            "maxLength": 20,
            "nullable": true
          },
          "cnpj": {
            "type": "string",
            "pattern": "^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$",
            "nullable": true
          },
          "categoria": {
            "type": "string",
            "enum": [
              "OURO",
              "PRATA",
              "BRONZE",
              "STANDARD",
              "OURO",
              "PRATA",
              "BRONZE",
              "STANDARD"
            ],
            "default": "STANDARD"
          },
          "contract_value": {
            "type": "number",
            "minimum": 0.01
          },
          "contract_start_date": {
            "type": "string",
            "format": "date-time"
          },
          "contract_renewal_date": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "type": "string",
            "enum": [
              "ATIVO",
              "INATIVO",
              "SUSPENSO",
              "CANCELADO",
              "ATIVO",
              "INATIVO",
              "SUSPENSO",
              "CANCELADO"
            ],
            "default": "ATIVO"
          }
        }
      },
      "UpdateCustomerData": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255
          },
          "email": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "telefone": {
            "type": "string",
            "minLength": 10,
            "maxLength": 20,
            "nullable": true
          },
          "cnpj": {
            "type": "string",
            "pattern": "^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$",
            "nullable": true
          },
          "categoria": {
            "type": "string",
            "enum": [
              "OURO",
              "PRATA",
              "BRONZE",
              "STANDARD",
              "OURO",
              "PRATA",
              "BRONZE",
              "STANDARD"
            ]
          },
          "contract_value": {
            "type": "number",
            "minimum": 0.01
          },
          "contract_renewal_date": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "UpdateCustomerStatusData": {
        "type": "object",
        "required": [
          "status",
          "status"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ATIVO",
              "INATIVO",
              "SUSPENSO",
              "CANCELADO",
              "ATIVO",
              "INATIVO",
              "SUSPENSO",
              "CANCELADO"
            ]
          },
          "canceled_reason": {
            "type": "string",
            "minLength": 1,
            "description": "Obrigat√≥rio quando status √© CANCELADO"
          }
        }
      },
      "CustomerResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "empresa_id": {
            "type": "string",
            "format": "uuid"
          },
          "opportunity_id": {
            "type": "string",
            "format": "uuid"
          },
          "lead_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "nome": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "telefone": {
            "type": "string",
            "nullable": true
          },
          "cnpj": {
            "type": "string",
            "nullable": true
          },
          "categoria": {
            "type": "string",
            "enum": [
              "OURO",
              "PRATA",
              "BRONZE",
              "STANDARD",
              "OURO",
              "PRATA",
              "BRONZE",
              "STANDARD"
            ]
          },
          "contract_value": {
            "type": "number"
          },
          "contract_start_date": {
            "type": "string",
            "format": "date-time"
          },
          "contract_renewal_date": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "type": "string",
            "enum": [
              "ATIVO",
              "INATIVO",
              "SUSPENSO",
              "CANCELADO",
              "ATIVO",
              "INATIVO",
              "SUSPENSO",
              "CANCELADO"
            ]
          },
          "canceled_reason": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          },
          "days_until_renewal": {
            "type": "number",
            "description": "Campo calculado"
          }
        }
      },
      "CreateActivityData": {
        "type": "object",
        "required": [
          "titulo",
          "activity_type",
          "data_hora",
          "titulo",
          "activity_type",
          "data_hora"
        ],
        "properties": {
          "titulo": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255
          },
          "descricao": {
            "type": "string",
            "nullable": true
          },
          "activity_type": {
            "type": "string",
            "enum": [
              "EMAIL",
              "CALL",
              "MEETING",
              "NOTE",
              "PROPOSAL",
              "DEMO",
              "EMAIL",
              "CALL",
              "MEETING",
              "NOTE",
              "PROPOSAL",
              "DEMO"
            ]
          },
          "data_hora": {
            "type": "string",
            "format": "date-time"
          },
          "duracao_minutos": {
            "type": "integer",
            "minimum": 1,
            "nullable": true
          },
          "result": {
            "type": "string",
            "enum": [
              "POSITIVO",
              "NEGATIVO",
              "NEUTRO",
              "POSITIVO",
              "NEGATIVO",
              "NEUTRO"
            ],
            "nullable": true
          },
          "next_action_date": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "UpdateActivityData": {
        "type": "object",
        "properties": {
          "titulo": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255
          },
          "descricao": {
            "type": "string",
            "nullable": true
          },
          "activity_type": {
            "type": "string",
            "enum": [
              "EMAIL",
              "CALL",
              "MEETING",
              "NOTE",
              "PROPOSAL",
              "DEMO",
              "EMAIL",
              "CALL",
              "MEETING",
              "NOTE",
              "PROPOSAL",
              "DEMO"
            ]
          },
          "data_hora": {
            "type": "string",
            "format": "date-time"
          },
          "duracao_minutos": {
            "type": "integer",
            "minimum": 1,
            "nullable": true
          },
          "result": {
            "type": "string",
            "enum": [
              "POSITIVO",
              "NEGATIVO",
              "NEUTRO",
              "POSITIVO",
              "NEGATIVO",
              "NEUTRO"
            ],
            "nullable": true
          },
          "next_action_date": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "CustomerActivityResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "customer_id": {
            "type": "string",
            "format": "uuid"
          },
          "empresa_id": {
            "type": "string",
            "format": "uuid"
          },
          "titulo": {
            "type": "string"
          },
          "descricao": {
            "type": "string",
            "nullable": true
          },
          "activity_type": {
            "type": "string",
            "enum": [
              "EMAIL",
              "CALL",
              "MEETING",
              "NOTE",
              "PROPOSAL",
              "DEMO",
              "EMAIL",
              "CALL",
              "MEETING",
              "NOTE",
              "PROPOSAL",
              "DEMO"
            ]
          },
          "data_hora": {
            "type": "string",
            "format": "date-time"
          },
          "duracao_minutos": {
            "type": "integer",
            "nullable": true
          },
          "user_id": {
            "type": "string",
            "format": "uuid"
          },
          "result": {
            "type": "string",
            "enum": [
              "POSITIVO",
              "NEGATIVO",
              "NEUTRO",
              "POSITIVO",
              "NEGATIVO",
              "NEUTRO"
            ],
            "nullable": true
          },
          "next_action_date": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "deleted_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "deleted_by_user_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AddContactData": {
        "type": "object",
        "required": [
          "nome",
          "nome"
        ],
        "properties": {
          "nome": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255
          },
          "cargo": {
            "type": "string",
            "maxLength": 100,
            "nullable": true
          },
          "email": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "telefone": {
            "type": "string",
            "minLength": 10,
            "maxLength": 20,
            "nullable": true
          },
          "linkedin": {
            "type": "string",
            "format": "uri",
            "maxLength": 255,
            "nullable": true
          },
          "departamento": {
            "type": "string",
            "maxLength": 100,
            "nullable": true
          },
          "nivel_hierarquico": {
            "type": "string",
            "enum": [
              "C_LEVEL",
              "GERENCIA",
              "COORDENACAO",
              "OPERACIONAL",
              "C_LEVEL",
              "GERENCIA",
              "COORDENACAO",
              "OPERACIONAL"
            ],
            "nullable": true
          },
          "is_primary": {
            "type": "boolean",
            "default": false
          }
        },
        "description": "Pelo menos email OU telefone deve ser fornecido"
      },
      "UpdateContactData": {
        "type": "object",
        "properties": {
          "nome": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255
          },
          "cargo": {
            "type": "string",
            "maxLength": 100,
            "nullable": true
          },
          "email": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "telefone": {
            "type": "string",
            "minLength": 10,
            "maxLength": 20,
            "nullable": true
          },
          "linkedin": {
            "type": "string",
            "format": "uri",
            "maxLength": 255,
            "nullable": true
          },
          "departamento": {
            "type": "string",
            "maxLength": 100,
            "nullable": true
          },
          "nivel_hierarquico": {
            "type": "string",
            "enum": [
              "C_LEVEL",
              "GERENCIA",
              "COORDENACAO",
              "OPERACIONAL",
              "C_LEVEL",
              "GERENCIA",
              "COORDENACAO",
              "OPERACIONAL"
            ],
            "nullable": true
          }
        }
      },
      "CustomerContactResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "customer_id": {
            "type": "string",
            "format": "uuid"
          },
          "nome": {
            "type": "string"
          },
          "cargo": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "telefone": {
            "type": "string",
            "nullable": true
          },
          "linkedin": {
            "type": "string",
            "nullable": true
          },
          "departamento": {
            "type": "string",
            "nullable": true
          },
          "nivel_hierarquico": {
            "type": "string",
            "enum": [
              "C_LEVEL",
              "GERENCIA",
              "COORDENACAO",
              "OPERACIONAL",
              "C_LEVEL",
              "GERENCIA",
              "COORDENACAO",
              "OPERACIONAL"
            ],
            "nullable": true
          },
          "is_primary": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateContractData": {
        "type": "object",
        "required": [
          "numero",
          "valor",
          "data_inicio",
          "data_fim",
          "servicos",
          "numero",
          "valor",
          "data_inicio",
          "data_fim",
          "servicos"
        ],
        "properties": {
          "numero": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "N√∫mero √∫nico do contrato",
            "example": "CTR-2025-001"
          },
          "valor": {
            "type": "number",
            "minimum": 0.01,
            "description": "Valor do contrato",
            "example": 5000
          },
          "moeda": {
            "type": "string",
            "minLength": 3,
            "maxLength": 3,
            "description": "C√≥digo ISO 4217 da moeda (3 letras)",
            "default": "BRL",
            "example": "BRL"
          },
          "data_inicio": {
            "type": "string",
            "format": "date-time",
            "description": "Data de in√≠cio do contrato",
            "example": "2025-01-01T00:00:00Z"
          },
          "data_fim": {
            "type": "string",
            "format": "date-time",
            "description": "Data de t√©rmino do contrato",
            "example": "2025-12-31T23:59:59Z"
          },
          "servicos": {
            "type": "string",
            "minLength": 1,
            "description": "Descri√ß√£o dos servi√ßos contratados",
            "example": "Licen√ßa de software SaaS - Plano Premium"
          },
          "condicoes": {
            "type": "string",
            "nullable": true,
            "description": "Condi√ß√µes especiais do contrato",
            "example": "Renova√ß√£o autom√°tica com reajuste de 10%"
          },
          "status": {
            "type": "string",
            "enum": [
              "VIGENTE",
              "VENCIDO",
              "RENOVADO",
              "CANCELADO",
              "VIGENTE",
              "VENCIDO",
              "RENOVADO",
              "CANCELADO"
            ],
            "default": "VIGENTE",
            "description": "Status do contrato"
          },
          "arquivo_url": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "URL do arquivo PDF do contrato",
            "example": "https://storage.example.com/contracts/ctr-2025-001.pdf"
          }
        }
      },
      "UpdateContractData": {
        "type": "object",
        "properties": {
          "valor": {
            "type": "number",
            "minimum": 0.01,
            "description": "Novo valor do contrato",
            "example": 5500
          },
          "servicos": {
            "type": "string",
            "minLength": 1,
            "description": "Nova descri√ß√£o dos servi√ßos",
            "example": "Licen√ßa de software SaaS - Plano Enterprise"
          },
          "condicoes": {
            "type": "string",
            "nullable": true,
            "description": "Novas condi√ß√µes especiais",
            "example": "Renova√ß√£o autom√°tica com reajuste de 12%"
          },
          "status": {
            "type": "string",
            "enum": [
              "VIGENTE",
              "VENCIDO",
              "RENOVADO",
              "CANCELADO",
              "VIGENTE",
              "VENCIDO",
              "RENOVADO",
              "CANCELADO"
            ],
            "description": "Novo status do contrato"
          },
          "arquivo_url": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "Nova URL do arquivo PDF",
            "example": "https://storage.example.com/contracts/ctr-2025-001-v2.pdf"
          }
        }
      },
      "RenewContractData": {
        "type": "object",
        "required": [
          "numero",
          "valor",
          "data_inicio",
          "data_fim",
          "servicos",
          "numero",
          "valor",
          "data_inicio",
          "data_fim",
          "servicos"
        ],
        "properties": {
          "numero": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "N√∫mero do novo contrato (renova√ß√£o)",
            "example": "CTR-2026-001"
          },
          "valor": {
            "type": "number",
            "minimum": 0.01,
            "description": "Valor do contrato renovado",
            "example": 5500
          },
          "moeda": {
            "type": "string",
            "minLength": 3,
            "maxLength": 3,
            "description": "C√≥digo ISO 4217 da moeda",
            "default": "BRL",
            "example": "BRL"
          },
          "data_inicio": {
            "type": "string",
            "format": "date-time",
            "description": "Data de in√≠cio do contrato renovado (geralmente = data_fim do contrato anterior)",
            "example": "2026-01-01T00:00:00Z"
          },
          "data_fim": {
            "type": "string",
            "format": "date-time",
            "description": "Nova data de t√©rmino",
            "example": "2026-12-31T23:59:59Z"
          },
          "servicos": {
            "type": "string",
            "minLength": 1,
            "description": "Descri√ß√£o dos servi√ßos renovados",
            "example": "Licen√ßa de software SaaS - Plano Premium"
          },
          "condicoes": {
            "type": "string",
            "nullable": true,
            "description": "Condi√ß√µes do contrato renovado",
            "example": "Renova√ß√£o autom√°tica com reajuste de 10%"
          },
          "arquivo_url": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "URL do arquivo PDF do novo contrato",
            "example": "https://storage.example.com/contracts/ctr-2026-001.pdf"
          }
        }
      },
      "CustomerContractResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "ID √∫nico do contrato",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "customer_id": {
            "type": "string",
            "format": "uuid",
            "description": "ID do cliente",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          },
          "empresa_id": {
            "type": "string",
            "format": "uuid",
            "description": "ID da empresa",
            "example": "123e4567-e89b-12d3-a456-426614174002"
          },
          "numero": {
            "type": "string",
            "description": "N√∫mero do contrato",
            "example": "CTR-2025-001"
          },
          "valor": {
            "type": "number",
            "description": "Valor do contrato",
            "example": 5000
          },
          "moeda": {
            "type": "string",
            "description": "C√≥digo da moeda",
            "example": "BRL"
          },
          "data_inicio": {
            "type": "string",
            "format": "date-time",
            "description": "Data de in√≠cio",
            "example": "2025-01-01T00:00:00Z"
          },
          "data_fim": {
            "type": "string",
            "format": "date-time",
            "description": "Data de t√©rmino",
            "example": "2025-12-31T23:59:59Z"
          },
          "servicos": {
            "type": "string",
            "description": "Descri√ß√£o dos servi√ßos",
            "example": "Licen√ßa de software SaaS - Plano Premium"
          },
          "condicoes": {
            "type": "string",
            "nullable": true,
            "description": "Condi√ß√µes especiais",
            "example": "Renova√ß√£o autom√°tica com reajuste de 10%"
          },
          "status": {
            "type": "string",
            "enum": [
              "VIGENTE",
              "VENCIDO",
              "RENOVADO",
              "CANCELADO",
              "VIGENTE",
              "VENCIDO",
              "RENOVADO",
              "CANCELADO"
            ],
            "description": "Status do contrato",
            "example": "VIGENTE"
          },
          "arquivo_url": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "URL do arquivo PDF",
            "example": "https://storage.example.com/contracts/ctr-2025-001.pdf"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data de cria√ß√£o do registro",
            "example": "2025-01-01T10:00:00Z"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data da √∫ltima atualiza√ß√£o",
            "example": "2025-01-15T15:30:00Z"
          },
          "days_until_end": {
            "type": "number",
            "description": "Dias restantes at√© o t√©rmino do contrato (campo calculado)",
            "example": 300
          }
        }
      },
      "WorkerConfig": {
        "type": "object",
        "properties": {
          "enabled": {
            "type": "boolean",
            "description": "Se o worker est√° habilitado"
          },
          "concurrency": {
            "type": "integer",
            "description": "N√∫mero de inst√¢ncias concorrentes"
          }
        },
        "required": [
          "enabled",
          "concurrency",
          "enabled",
          "concurrency"
        ]
      },
      "WorkerStatus": {
        "type": "object",
        "properties": {
          "googleMapsLinksPublisher": {
            "$ref": "#/components/schemas/WorkerConfig"
          },
          "googleMapsDetailsConsumer": {
            "$ref": "#/components/schemas/WorkerConfig"
          }
        }
      },
      "UpdateConcurrencyRequest": {
        "type": "object",
        "properties": {
          "concurrency": {
            "type": "integer",
            "minimum": 1,
            "description": "N√∫mero de inst√¢ncias concorrentes",
            "example": 5
          }
        },
        "required": [
          "concurrency",
          "concurrency"
        ]
      },
      "Payment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "empresaId": {
            "type": "string",
            "nullable": true
          },
          "value": {
            "type": "number"
          },
          "netValue": {
            "type": "number"
          },
          "description": {
            "type": "string"
          },
          "billingType": {
            "type": "string",
            "enum": [
              "BOLETO",
              "CREDIT_CARD",
              "PIX",
              "UNDEFINED"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "RECEIVED",
              "CONFIRMED",
              "OVERDUE",
              "REFUNDED",
              "CANCELLED"
            ]
          },
          "dueDate": {
            "type": "string",
            "format": "date"
          },
          "paymentDate": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "invoiceUrl": {
            "type": "string",
            "format": "uri"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PaymentListResponse": {
        "type": "object",
        "properties": {
          "totalCount": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "offset": {
            "type": "integer"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Payment"
            }
          }
        }
      },
      "SummaryItem": {
        "type": "object",
        "properties": {
          "count": {
            "type": "integer"
          },
          "amount": {
            "type": "number"
          }
        }
      },
      "FinancialSummary": {
        "type": "object",
        "properties": {
          "totalAmountSpent": {
            "type": "number"
          },
          "payments": {
            "type": "object",
            "properties": {
              "totalCount": {
                "type": "integer"
              },
              "pending": {
                "$ref": "#/components/schemas/SummaryItem"
              },
              "received": {
                "$ref": "#/components/schemas/SummaryItem"
              },
              "overdue": {
                "$ref": "#/components/schemas/SummaryItem"
              }
            }
          },
          "credits": {
            "type": "object",
            "properties": {
              "currentBalance": {
                "type": "number"
              },
              "totalPurchased": {
                "type": "number"
              },
              "totalUsed": {
                "type": "number"
              },
              "amountSpentOnCredits": {
                "type": "number"
              }
            }
          },
          "period": {
            "type": "object",
            "properties": {
              "startDate": {
                "type": "string",
                "format": "date"
              },
              "endDate": {
                "type": "string",
                "format": "date"
              }
            }
          }
        }
      },
      "CreditTransaction": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "empresaId": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "compra",
              "uso",
              "reembolso",
              "bonus"
            ]
          },
          "quantity": {
            "type": "number"
          },
          "previousBalance": {
            "type": "number"
          },
          "newBalance": {
            "type": "number"
          },
          "amountPaid": {
            "type": "number",
            "nullable": true
          },
          "paymentId": {
            "type": "string",
            "nullable": true
          },
          "lead": {
            "type": "object",
            "nullable": true,
            "properties": {
              "id": {
                "type": "string"
              },
              "name": {
                "type": "string"
              }
            }
          },
          "description": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateProjetoData": {
        "type": "object",
        "required": [
          "clienteId",
          "metodologia",
          "titulo"
        ],
        "properties": {
          "clienteId": {
            "type": "integer",
            "description": "ID do cliente ao qual o projeto pertence",
            "example": 123
          },
          "metodologia": {
            "type": "string",
            "enum": [
              "masp",
              "8d",
              "a3"
            ],
            "description": "Metodologia de resolu√ß√£o de problemas a ser utilizada",
            "example": "masp"
          },
          "titulo": {
            "type": "string",
            "minLength": 5,
            "maxLength": 200,
            "description": "T√≠tulo descritivo do projeto",
            "example": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o"
          },
          "problemaDescricao": {
            "type": "string",
            "maxLength": 2000,
            "description": "Descri√ß√£o detalhada do problema a ser resolvido",
            "example": "Alto √≠ndice de pe√ßas rejeitadas no setor de usinagem"
          },
          "impacto": {
            "type": "string",
            "maxLength": 1000,
            "description": "Impacto do problema no neg√≥cio",
            "example": "Perda de 15% da produ√ß√£o mensal - R$ 45.000/m√™s"
          },
          "responsavelId": {
            "type": "integer",
            "description": "ID do usu√°rio respons√°vel pelo projeto",
            "example": 45
          }
        }
      },
      "UpdateProjetoData": {
        "type": "object",
        "properties": {
          "titulo": {
            "type": "string",
            "minLength": 5,
            "maxLength": 200,
            "description": "Novo t√≠tulo do projeto",
            "example": "Redu√ß√£o de desperd√≠cio - Fase 2"
          },
          "resumo": {
            "type": "string",
            "maxLength": 500,
            "description": "Resumo executivo do projeto",
            "example": "Implementa√ß√£o de melhorias identificadas na fase de an√°lise"
          },
          "problemaDescricao": {
            "type": "string",
            "maxLength": 2000,
            "description": "Atualiza√ß√£o da descri√ß√£o do problema",
            "example": "Desperd√≠cio reduzido de 15% para 6% ap√≥s implementa√ß√£o"
          },
          "impacto": {
            "type": "string",
            "maxLength": 1000,
            "description": "Atualiza√ß√£o do impacto",
            "example": "Economia de R$ 25.000/m√™s"
          },
          "status": {
            "type": "string",
            "enum": [
              "rascunho",
              "em_andamento",
              "concluido",
              "cancelado",
              "arquivado"
            ],
            "description": "Novo status do projeto",
            "example": "em_andamento"
          },
          "versao": {
            "type": "string",
            "maxLength": 20,
            "description": "Vers√£o do projeto",
            "example": "2.0"
          },
          "responsavelId": {
            "type": "integer",
            "description": "Novo respons√°vel pelo projeto",
            "example": 67
          },
          "dataEncerramento": {
            "type": "string",
            "format": "date",
            "nullable": true,
            "description": "Data de encerramento do projeto",
            "example": "2024-03-15"
          }
        }
      },
      "ProjetoResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID √∫nico do projeto",
            "example": 1
          },
          "empresaId": {
            "type": "string",
            "format": "uuid",
            "description": "ID da empresa propriet√°ria",
            "example": "uuid-empresa-123"
          },
          "clienteId": {
            "type": "integer",
            "description": "ID do cliente",
            "example": 123
          },
          "metodologia": {
            "type": "string",
            "enum": [
              "masp",
              "8d",
              "a3"
            ],
            "description": "Metodologia utilizada",
            "example": "masp"
          },
          "titulo": {
            "type": "string",
            "description": "T√≠tulo do projeto",
            "example": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o"
          },
          "resumo": {
            "type": "string",
            "nullable": true,
            "description": "Resumo executivo",
            "example": "Projeto focado em reduzir desperd√≠cios atrav√©s da metodologia MASP"
          },
          "problemaDescricao": {
            "type": "string",
            "nullable": true,
            "description": "Descri√ß√£o do problema",
            "example": "Alto √≠ndice de pe√ßas rejeitadas no setor de usinagem"
          },
          "impacto": {
            "type": "string",
            "nullable": true,
            "description": "Impacto do problema",
            "example": "Perda de 15% da produ√ß√£o mensal"
          },
          "status": {
            "type": "string",
            "enum": [
              "rascunho",
              "em_andamento",
              "concluido",
              "cancelado",
              "arquivado"
            ],
            "description": "Status atual do projeto",
            "example": "em_andamento"
          },
          "versao": {
            "type": "string",
            "nullable": true,
            "description": "Vers√£o do projeto",
            "example": "1.0"
          },
          "responsavelId": {
            "type": "integer",
            "nullable": true,
            "description": "ID do respons√°vel",
            "example": 45
          },
          "dataAbertura": {
            "type": "string",
            "format": "date",
            "nullable": true,
            "description": "Data de abertura do projeto",
            "example": "2024-01-15"
          },
          "dataEncerramento": {
            "type": "string",
            "format": "date",
            "nullable": true,
            "description": "Data de encerramento",
            "example": null
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data de cria√ß√£o do registro",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data da √∫ltima atualiza√ß√£o",
            "example": "2024-01-20T15:45:00.000Z"
          }
        }
      },
      "CreateSearchTermData": {
        "type": "object",
        "required": [
          "termo",
          "categoria"
        ],
        "properties": {
          "termo": {
            "type": "string",
            "minLength": 2,
            "maxLength": 200,
            "description": "Termo de busca",
            "example": "pizzaria"
          },
          "categoria": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "pattern": "^[a-zA-Z0-9_-]+$",
            "description": "Categoria do termo (apenas letras, n√∫meros, h√≠fens e underscores)",
            "example": "restaurante"
          },
          "descricao": {
            "type": "string",
            "maxLength": 500,
            "nullable": true,
            "description": "Descri√ß√£o opcional do termo",
            "example": "Estabelecimentos que servem pizza"
          },
          "ativo": {
            "type": "boolean",
            "default": true,
            "description": "Se o termo est√° ativo",
            "example": true
          }
        }
      },
      "UpdateSearchTermData": {
        "type": "object",
        "properties": {
          "termo": {
            "type": "string",
            "minLength": 2,
            "maxLength": 200,
            "description": "Termo de busca",
            "example": "pizzaria"
          },
          "categoria": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "pattern": "^[a-zA-Z0-9_-]+$",
            "description": "Categoria do termo",
            "example": "restaurante"
          },
          "descricao": {
            "type": "string",
            "maxLength": 500,
            "nullable": true,
            "description": "Descri√ß√£o do termo",
            "example": "Estabelecimentos que servem pizza"
          },
          "ativo": {
            "type": "boolean",
            "description": "Se o termo est√° ativo",
            "example": true
          }
        }
      },
      "SearchTermResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "ID √∫nico do termo",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "empresaId": {
            "type": "string",
            "format": "uuid",
            "description": "ID da empresa propriet√°ria",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          },
          "termo": {
            "type": "string",
            "description": "Termo de busca",
            "example": "pizzaria"
          },
          "categoria": {
            "type": "string",
            "description": "Categoria do termo",
            "example": "restaurante"
          },
          "descricao": {
            "type": "string",
            "nullable": true,
            "description": "Descri√ß√£o do termo",
            "example": "Estabelecimentos que servem pizza"
          },
          "ativo": {
            "type": "boolean",
            "description": "Se o termo est√° ativo",
            "example": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data de cria√ß√£o",
            "example": "2025-09-06T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Data de √∫ltima atualiza√ß√£o",
            "example": "2025-09-06T10:30:00Z"
          }
        }
      },
      "ListSearchTermsResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SearchTermResponse"
            }
          },
          "pagination": {
            "type": "object",
            "properties": {
              "page": {
                "type": "integer",
                "minimum": 1,
                "description": "P√°gina atual",
                "example": 1
              },
              "limit": {
                "type": "integer",
                "minimum": 1,
                "maximum": 100,
                "description": "Registros por p√°gina",
                "example": 20
              },
              "total": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de registros",
                "example": 45
              },
              "totalPages": {
                "type": "integer",
                "minimum": 0,
                "description": "Total de p√°ginas",
                "example": 3
              },
              "hasNextPage": {
                "type": "boolean",
                "description": "Existe pr√≥xima p√°gina",
                "example": false
              },
              "hasPreviousPage": {
                "type": "boolean",
                "description": "Existe p√°gina anterior",
                "example": false
              }
            }
          }
        }
      },
      "SearchTermCategoriesResponse": {
        "type": "object",
        "properties": {
          "categories": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "categoria": {
                  "type": "string",
                  "description": "Nome da categoria",
                  "example": "restaurante"
                },
                "count": {
                  "type": "integer",
                  "description": "N√∫mero de termos nesta categoria",
                  "example": 5
                }
              }
            }
          }
        }
      },
      "SearchTermStatsResponse": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "description": "Total de termos",
            "example": 25
          },
          "active": {
            "type": "integer",
            "description": "Termos ativos",
            "example": 20
          },
          "inactive": {
            "type": "integer",
            "description": "Termos inativos",
            "example": 5
          },
          "categoriesCount": {
            "type": "integer",
            "description": "N√∫mero de categorias",
            "example": 4
          },
          "topCategories": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "categoria": {
                  "type": "string",
                  "description": "Nome da categoria",
                  "example": "restaurante"
                },
                "count": {
                  "type": "integer",
                  "description": "N√∫mero de termos",
                  "example": 8
                }
              }
            }
          }
        }
      },
      "DashboardMetricsResponse": {
        "type": "object",
        "properties": {
          "leads": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number",
                "example": 1250
              },
              "novosUltimos30Dias": {
                "type": "number",
                "example": 180
              },
              "emProcessamento": {
                "type": "number",
                "example": 45
              },
              "convertidos": {
                "type": "number",
                "example": 35
              },
              "taxaConversao": {
                "type": "number",
                "example": 2.8
              },
              "porOrigem": {
                "type": "object",
                "additionalProperties": {
                  "type": "number"
                },
                "example": {
                  "Google Maps": 650,
                  "Importa√ß√£o Manual": 300
                }
              }
            }
          },
          "campanhas": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number",
                "example": 5
              },
              "ativas": {
                "type": "number",
                "example": 3
              },
              "pausadas": {
                "type": "number",
                "example": 2
              },
              "melhorPerformance": {
                "type": "object",
                "nullable": true,
                "properties": {
                  "nome": {
                    "type": "string",
                    "example": "Campanha Principal"
                  },
                  "leads": {
                    "type": "number",
                    "example": 85
                  },
                  "conversoes": {
                    "type": "number",
                    "example": 12
                  }
                }
              }
            }
          },
          "searchTerms": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number",
                "example": 25
              },
              "ativos": {
                "type": "number",
                "example": 20
              },
              "inativos": {
                "type": "number",
                "example": 5
              },
              "categorias": {
                "type": "number",
                "example": 8
              },
              "maiorCategoria": {
                "type": "object",
                "nullable": true,
                "properties": {
                  "nome": {
                    "type": "string",
                    "example": "alimenta√ß√£o"
                  },
                  "quantidade": {
                    "type": "number",
                    "example": 8
                  }
                }
              }
            }
          },
          "scraping": {
            "type": "object",
            "properties": {
              "totalJobs": {
                "type": "number",
                "example": 45
              },
              "sucessosUltimos7Dias": {
                "type": "number",
                "example": 38
              },
              "errosUltimos7Dias": {
                "type": "number",
                "example": 7
              },
              "taxaSucesso": {
                "type": "number",
                "example": 84.4
              },
              "ultimaExecucao": {
                "type": "string",
                "nullable": true,
                "format": "date-time"
              },
              "tempoMedioExecucao": {
                "type": "number",
                "example": 12.5
              }
            }
          },
          "sistema": {
            "type": "object",
            "properties": {
              "ultimaAtualizacao": {
                "type": "string",
                "format": "date-time"
              },
              "statusGeral": {
                "type": "string",
                "enum": [
                  "excelente",
                  "bom",
                  "atencao",
                  "critico"
                ]
              },
              "alertas": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "tipo": {
                      "type": "string",
                      "enum": [
                        "info",
                        "warning",
                        "error"
                      ]
                    },
                    "mensagem": {
                      "type": "string"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "graficos": {
            "type": "object",
            "properties": {
              "leadsUltimos30Dias": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "string",
                      "format": "date"
                    },
                    "leads": {
                      "type": "number"
                    },
                    "conversoes": {
                      "type": "number"
                    }
                  }
                }
              },
              "performanceCampanhas": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "campanha": {
                      "type": "string"
                    },
                    "leads": {
                      "type": "number"
                    },
                    "conversoes": {
                      "type": "number"
                    },
                    "custoTotal": {
                      "type": "number"
                    }
                  }
                }
              },
              "distribuicaoOrigem": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "origem": {
                      "type": "string"
                    },
                    "quantidade": {
                      "type": "number"
                    },
                    "porcentagem": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "QuickStatsResponse": {
        "type": "object",
        "properties": {
          "leadsHoje": {
            "type": "number",
            "example": 8
          },
          "leadsOntem": {
            "type": "number",
            "example": 12
          },
          "campanhasAtivas": {
            "type": "number",
            "example": 2
          },
          "ultimoScraping": {
            "type": "string",
            "nullable": true,
            "format": "date-time"
          },
          "statusSistema": {
            "type": "string",
            "enum": [
              "online",
              "offline",
              "manutencao"
            ],
            "example": "online"
          }
        }
      },
      "DashboardExportRequest": {
        "type": "object",
        "required": [
          "formato",
          "incluir"
        ],
        "properties": {
          "formato": {
            "type": "string",
            "enum": [
              "pdf",
              "excel",
              "csv"
            ],
            "description": "Formato do arquivo de exporta√ß√£o",
            "example": "pdf"
          },
          "incluir": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "leads",
                "campanhas",
                "scraping",
                "graficos"
              ]
            },
            "description": "Se√ß√µes a incluir na exporta√ß√£o",
            "example": [
              "leads",
              "campanhas"
            ]
          },
          "dataInicio": {
            "type": "string",
            "format": "date",
            "description": "Data de in√≠cio para filtrar dados",
            "example": "2024-01-01"
          },
          "dataFim": {
            "type": "string",
            "format": "date",
            "description": "Data de fim para filtrar dados",
            "example": "2024-01-31"
          },
          "campanhaIds": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs das campanhas para filtrar"
          },
          "origens": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Origens dos leads para filtrar"
          }
        }
      },
      "StartProcessingRequest": {
        "type": "object",
        "properties": {
          "batchSize": {
            "type": "number",
            "minimum": 1,
            "maximum": 1000,
            "default": 100,
            "description": "Tamanho do lote de processamento",
            "example": 100
          },
          "maxConcurrency": {
            "type": "number",
            "minimum": 1,
            "maximum": 10,
            "default": 3,
            "description": "M√°ximo de processamentos simult√¢neos",
            "example": 3
          },
          "filters": {
            "type": "object",
            "description": "Filtros para sele√ß√£o de leads",
            "example": {
              "status": "novo",
              "minScore": 70
            }
          }
        }
      },
      "ProcessingJobResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "jobId": {
                "type": "string",
                "description": "ID do job de processamento",
                "example": "job-12345-abcde"
              }
            }
          },
          "message": {
            "type": "string",
            "example": "Processamento iniciado com sucesso"
          }
        }
      },
      "ProcessingStatusResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "isRunning": {
                "type": "boolean",
                "description": "Se h√° processamento ativo",
                "example": true
              },
              "totalLeads": {
                "type": "number",
                "description": "Total de leads",
                "example": 1250
              },
              "processedLeads": {
                "type": "number",
                "description": "Leads processados",
                "example": 850
              },
              "pendingLeads": {
                "type": "number",
                "description": "Leads pendentes",
                "example": 300
              },
              "errorLeads": {
                "type": "number",
                "description": "Leads com erro",
                "example": 100
              },
              "currentBatch": {
                "type": "object",
                "nullable": true,
                "properties": {
                  "batchId": {
                    "type": "string"
                  },
                  "size": {
                    "type": "number"
                  },
                  "progress": {
                    "type": "number"
                  }
                }
              }
            }
          },
          "message": {
            "type": "string",
            "example": "Status obtido com sucesso"
          }
        }
      },
      "ProcessingReportResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "periodo": {
                "type": "object",
                "properties": {
                  "inicio": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2024-01-01T00:00:00Z"
                  },
                  "fim": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2024-01-31T23:59:59Z"
                  }
                }
              },
              "estatisticas": {
                "type": "object",
                "properties": {
                  "totalProcessados": {
                    "type": "number",
                    "example": 5420
                  },
                  "sucessos": {
                    "type": "number",
                    "example": 4850
                  },
                  "erros": {
                    "type": "number",
                    "example": 570
                  },
                  "tempoMedioProcessamento": {
                    "type": "number",
                    "format": "float",
                    "description": "Tempo m√©dio em segundos",
                    "example": 2.5
                  },
                  "taxaSucesso": {
                    "type": "number",
                    "format": "float",
                    "description": "Taxa de sucesso em porcentagem",
                    "example": 89.48
                  }
                }
              },
              "detalhes": {
                "type": "object",
                "properties": {
                  "errosPorTipo": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "number"
                    },
                    "example": {
                      "timeout": 150,
                      "invalid_data": 320,
                      "network_error": 100
                    }
                  },
                  "processamentoPorDia": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "string",
                          "format": "date"
                        },
                        "total": {
                          "type": "number"
                        },
                        "sucessos": {
                          "type": "number"
                        },
                        "erros": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "message": {
            "type": "string",
            "example": "Relat√≥rio gerado com sucesso"
          }
        }
      },
      "StuckLeadsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "stuckLeads": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "nomeEmpresa": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string"
                    },
                    "lastProcessedAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "stuckDuration": {
                      "type": "number",
                      "description": "Tempo em minutos"
                    },
                    "errorMessage": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              },
              "total": {
                "type": "number",
                "example": 15
              }
            }
          },
          "message": {
            "type": "string",
            "example": "Leads travados listados com sucesso"
          }
        }
      },
      "ScrapingJobRequest": {
        "type": "object",
        "required": [
          "parametros_busca"
        ],
        "properties": {
          "parametros_busca": {
            "type": "object",
            "required": [
              "termo_busca"
            ],
            "properties": {
              "termo_busca": {
                "type": "string",
                "description": "Termo para busca no Google Maps",
                "example": "restaurante italiano"
              },
              "localizacao": {
                "type": "string",
                "description": "Localiza√ß√£o para a busca",
                "example": "S√£o Paulo, SP"
              },
              "maxResultados": {
                "type": "number",
                "minimum": 1,
                "maximum": 100,
                "description": "N√∫mero m√°ximo de resultados",
                "example": 20
              }
            }
          },
          "prioridade": {
            "type": "string",
            "enum": [
              "baixa",
              "normal",
              "alta",
              "urgente"
            ],
            "default": "normal",
            "description": "Prioridade do job",
            "example": "normal"
          }
        }
      },
      "BulkJobsRequest": {
        "type": "object",
        "required": [
          "termosBusca",
          "cidade"
        ],
        "properties": {
          "termosBusca": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Array de termos para busca",
            "example": [
              "restaurante italiano",
              "pizzaria",
              "padaria"
            ]
          },
          "cidade": {
            "type": "string",
            "description": "Cidade para todas as buscas",
            "example": "S√£o Paulo, SP"
          }
        }
      },
      "SegmentedJobsRequest": {
        "type": "object",
        "required": [
          "segmento",
          "cidade"
        ],
        "properties": {
          "segmento": {
            "type": "string",
            "description": "Segmento de neg√≥cio para usar template predefinido",
            "example": "restaurantes"
          },
          "cidade": {
            "type": "string",
            "description": "Cidade para a busca",
            "example": "S√£o Paulo, SP"
          }
        }
      },
      "WorkerStatusResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "isRunning": {
                "type": "boolean",
                "description": "Se o worker est√° executando",
                "example": true
              },
              "queueSize": {
                "type": "number",
                "description": "N√∫mero de jobs na fila",
                "example": 5
              },
              "currentJobs": {
                "type": "number",
                "description": "Jobs em execu√ß√£o",
                "example": 2
              },
              "totalJobsProcessed": {
                "type": "number",
                "description": "Total de jobs processados",
                "example": 150
              },
              "totalLeadsScraped": {
                "type": "number",
                "description": "Total de leads coletados",
                "example": 3420
              },
              "errorCount": {
                "type": "number",
                "description": "N√∫mero de erros",
                "example": 5
              },
              "lastRunAt": {
                "type": "string",
                "format": "date-time",
                "nullable": true,
                "description": "√öltima execu√ß√£o"
              }
            }
          },
          "message": {
            "type": "string",
            "example": "Status do worker obtido com sucesso"
          }
        }
      },
      "ScrapingStatsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "totalJobs": {
                "type": "number",
                "description": "Total de jobs",
                "example": 45
              },
              "completedJobs": {
                "type": "number",
                "description": "Jobs conclu√≠dos",
                "example": 38
              },
              "pendingJobs": {
                "type": "number",
                "description": "Jobs pendentes",
                "example": 5
              },
              "errorJobs": {
                "type": "number",
                "description": "Jobs com erro",
                "example": 2
              },
              "totalLeads": {
                "type": "number",
                "description": "Total de leads coletados",
                "example": 1250
              },
              "averageLeadsPerJob": {
                "type": "number",
                "format": "float",
                "description": "M√©dia de leads por job",
                "example": 32.9
              }
            }
          },
          "message": {
            "type": "string",
            "example": "Estat√≠sticas obtidas com sucesso"
          }
        }
      },
      "ScrapingTemplatesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "segmento": {
                  "type": "string",
                  "description": "Nome do segmento",
                  "example": "restaurantes"
                },
                "termos": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Primeiros 5 termos do template",
                  "example": [
                    "restaurante",
                    "pizzaria",
                    "lanchonete"
                  ]
                },
                "totalTermos": {
                  "type": "number",
                  "description": "Total de termos no template",
                  "example": 15
                },
                "filtros": {
                  "type": "object",
                  "description": "Filtros aplicados",
                  "example": {
                    "categoria": "alimentacao",
                    "avaliacao_min": 4
                  }
                },
                "categorias": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Primeiras 3 categorias",
                  "example": [
                    "comida italiana",
                    "delivery",
                    "familiar"
                  ]
                }
              }
            }
          },
          "message": {
            "type": "string",
            "example": "Templates listados com sucesso"
          }
        }
      },
      "TrackMessageData": {
        "type": "object",
        "required": [
          "empresa_id",
          "device_id",
          "device_fingerprint",
          "telefone",
          "codigo_whatsapp"
        ],
        "properties": {
          "empresa_id": {
            "type": "string",
            "format": "uuid",
            "description": "UUID da empresa propriet√°ria dos dados",
            "example": "7e0f8b36-41f8-4f4d-a7f4-21b7c4ae9023"
          },
          "device_id": {
            "type": "string",
            "description": "Identificador √∫nico do dispositivo que enviou a mensagem",
            "example": "ext-chrome-abc123"
          },
          "device_fingerprint": {
            "type": "string",
            "description": "Fingerprint do navegador/extens√£o para auditoria",
            "example": "fp-3f4ad8f8f1354210a2a4b1f8a7f8c1e2"
          },
          "telefone": {
            "type": "string",
            "description": "Telefone do contato (formato livre)",
            "example": "+5511998887777"
          },
          "codigo_whatsapp": {
            "type": "string",
            "description": "C√≥digo WhatsApp sem sufixo (@c.us)",
            "example": "5511998887777"
          },
          "nome": {
            "type": "string",
            "nullable": true,
            "description": "Nome do contato",
            "example": "Jo√£o Silva"
          },
          "mensagem_enviada": {
            "type": "string",
            "nullable": true,
            "description": "Corpo da mensagem enviada",
            "example": "Ol√° Jo√£o, podemos falar da proposta?"
          },
          "whatsapp_message_id": {
            "type": "string",
            "nullable": true,
            "description": "ID da mensagem no WhatsApp (source_id)",
            "example": "true_5511998887777@c.us_3EB08EBF171578DA991B68"
          },
          "ack": {
            "type": "integer",
            "minimum": 0,
            "maximum": 3,
            "nullable": true,
            "description": "Status ack do WhatsApp (0=pending, 1=sent, 2=delivered, 3=read)",
            "example": 2
          }
        }
      },
      "TrackMessageResult": {
        "type": "object",
        "properties": {
          "conversation_id": {
            "type": "integer",
            "description": "ID interno da conversa",
            "example": 123
          },
          "message_id": {
            "type": "integer",
            "description": "ID interno da mensagem registrada",
            "example": 456
          },
          "codigo_whatsapp": {
            "type": "string",
            "description": "C√≥digo WhatsApp da conversa",
            "example": "5511998887777"
          },
          "is_new_conversation": {
            "type": "boolean",
            "description": "Indica se foi criada nova conversa",
            "example": false
          },
          "lead_associated": {
            "type": "boolean",
            "description": "Indica se um lead foi associado automaticamente",
            "example": true
          },
          "lead_id": {
            "type": "string",
            "format": "uuid",
            "nullable": true,
            "description": "UUID do lead associado (quando houver)",
            "example": "f1b03783-1f2b-4d2d-9455-4bd83f1f9a72"
          }
        }
      },
      "TrackMessageSuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "$ref": "#/components/schemas/TrackMessageResult"
          },
          "message": {
            "type": "string",
            "example": "Mensagem registrada com sucesso"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "DisparoRapidoConversationSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 123
          },
          "codigoWhatsapp": {
            "type": "string",
            "example": "5511998887777"
          },
          "telefone": {
            "type": "string",
            "example": "+5511998887777"
          },
          "nome": {
            "type": "string",
            "nullable": true,
            "example": "Jo√£o Silva"
          },
          "leadId": {
            "type": "string",
            "nullable": true,
            "format": "uuid",
            "example": "f1b03783-1f2b-4d2d-9455-4bd83f1f9a72"
          },
          "lastActivityAt": {
            "type": "string",
            "format": "date-time",
            "example": "2025-11-09T14:30:00Z"
          }
        }
      },
      "DisparoRapidoMessageSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 456
          },
          "content": {
            "type": "string",
            "nullable": true,
            "example": "Ol√°! Temos uma proposta comercial."
          },
          "messageType": {
            "type": "integer",
            "example": 0,
            "description": "0=outgoing, 1=incoming"
          },
          "status": {
            "type": "integer",
            "example": 1,
            "description": "0=sent,1=delivered,2=read,3=failed"
          },
          "sourceId": {
            "type": "string",
            "nullable": true,
            "example": "true_5511998887777@c.us_3EB..."
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2025-11-09T14:30:00Z"
          }
        }
      },
      "DisparoRapidoMessageItem": {
        "type": "object",
        "properties": {
          "conversation": {
            "$ref": "#/components/schemas/DisparoRapidoConversationSummary"
          },
          "message": {
            "$ref": "#/components/schemas/DisparoRapidoMessageSummary"
          }
        }
      },
      "DisparoRapidoPaginationMeta": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "example": 150
          },
          "page": {
            "type": "integer",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "example": 50
          },
          "totalPages": {
            "type": "integer",
            "example": 3
          },
          "hasNext": {
            "type": "boolean",
            "example": true
          },
          "hasPrev": {
            "type": "boolean",
            "example": false
          },
          "firstPage": {
            "type": "integer",
            "example": 1
          },
          "lastPage": {
            "type": "integer",
            "example": 3
          }
        }
      },
      "DisparoRapidoMessagesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DisparoRapidoMessageItem"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/DisparoRapidoPaginationMeta"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "VinculacaoPendente": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "conversation_id": {
            "type": "integer"
          },
          "empresa_id": {
            "type": "string",
            "format": "uuid"
          },
          "dados_conversa": {
            "type": "object",
            "properties": {
              "nome": {
                "type": "string",
                "nullable": true
              },
              "telefone": {
                "type": "string"
              },
              "codigo_whatsapp": {
                "type": "string"
              }
            }
          },
          "candidatos": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LeadCandidato"
            }
          },
          "revisado": {
            "type": "boolean"
          },
          "criado_em": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LeadCandidato": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "nome": {
            "type": "string"
          },
          "telefone": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "empresa": {
            "type": "string",
            "nullable": true
          },
          "score": {
            "type": "number",
            "description": "Score de similaridade (0-100)"
          }
        }
      }
    },
    "examples": {
      "TrackMessageRequestExample": {
        "summary": "Exemplo completo de rastreamento",
        "value": {
          "empresa_id": "7e0f8b36-41f8-4f4d-a7f4-21b7c4ae9023",
          "device_id": "ext-chrome-abc123",
          "device_fingerprint": "fp-3f4ad8f8f1354210a2a4b1f8a7f8c1e2",
          "telefone": "+5511998887777",
          "codigo_whatsapp": "5511998887777",
          "nome": "Jo√£o Silva",
          "mensagem_enviada": "Ol√° Jo√£o, podemos falar da proposta?",
          "whatsapp_message_id": "true_5511998887777@c.us_3EB08EBF171578DA991B68",
          "ack": 2
        }
      },
      "TrackMessageResponseExample": {
        "summary": "Resposta de sucesso",
        "value": {
          "success": true,
          "message": "Mensagem registrada com sucesso",
          "data": {
            "conversation_id": 321,
            "message_id": 654,
            "codigo_whatsapp": "5511998887777",
            "is_new_conversation": false,
            "lead_associated": true,
            "lead_id": "f1b03783-1f2b-4d2d-9455-4bd83f1f9a72"
          },
          "timestamp": "2025-11-09T14:30:01.123Z"
        }
      },
      "QueryMessagesResponseExample": {
        "summary": "Consulta paginada",
        "value": {
          "success": true,
          "data": [
            {
              "conversation": {
                "id": 123,
                "codigoWhatsapp": "5511998887777",
                "telefone": "+5511998887777",
                "nome": "Jo√£o Silva",
                "leadId": "f1b03783-1f2b-4d2d-9455-4bd83f1f9a72",
                "lastActivityAt": "2025-11-09T14:30:00Z"
              },
              "message": {
                "id": 456,
                "content": "Ol√° Jo√£o, podemos falar da proposta?",
                "messageType": 0,
                "status": 1,
                "sourceId": "true_5511998887777@c.us_3EB08EBF171578DA991B68",
                "createdAt": "2025-11-09T14:30:00Z"
              }
            }
          ],
          "pagination": {
            "total": 150,
            "page": 1,
            "limit": 50,
            "totalPages": 3,
            "hasNext": true,
            "hasPrev": false,
            "firstPage": 1,
            "lastPage": 3
          },
          "timestamp": "2025-11-09T14:32:10.987Z"
        }
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    },
    {
      "bearerAuth": []
    },
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Informa√ß√µes da API",
        "description": "Retorna informa√ß√µes b√°sicas sobre a API",
        "responses": {
          "200": {
            "description": "Informa√ß√µes da API retornadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiInfo"
                }
              }
            }
          }
        }
      }
    },
    "/status": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Status da API",
        "description": "Retorna o status atual da API",
        "responses": {
          "200": {
            "description": "Status da API retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Status"
                }
              }
            }
          }
        }
      }
    },
    "/admin/session-limits": {
      "get": {
        "summary": "Obter limites de sess√£o da empresa",
        "description": "Endpoint administrativo para recuperar configura√ß√£o de limites de sess√£o da empresa atual.\nRetorna limites atuais com contagem em tempo real de sess√µes ativas e estat√≠sticas de uso.\n",
        "tags": [
          "Admin - Sess√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Limites de sess√£o recuperados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SessionLimitsResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Permiss√µes insuficientes - Administrador necess√°rio"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar limites de sess√£o da empresa",
        "description": "Endpoint administrativo para atualizar configura√ß√£o de limites de sess√£o da empresa atual.\nAs altera√ß√µes s√£o auditadas e podem incluir avisos se os novos limites estiverem abaixo do uso atual.\n",
        "tags": [
          "Admin - Sess√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "max_concurrent_sessions": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 1000,
                    "description": "M√°ximo de sess√µes simult√¢neas permitidas",
                    "example": 15
                  },
                  "enforcement_mode": {
                    "type": "string",
                    "enum": [
                      "block",
                      "warn",
                      "allow_with_audit"
                    ],
                    "description": "Como aplicar os limites de sess√£o",
                    "example": "block"
                  }
                },
                "minProperties": 1
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Limites de sess√£o atualizados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SessionLimitsResponse"
                    },
                    "warning": {
                      "type": "string",
                      "description": "Mensagem de aviso se aplic√°vel",
                      "example": "Novo limite (2) est√° abaixo das sess√µes ativas atuais (5)"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisi√ß√£o inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Permiss√µes insuficientes - Administrador necess√°rio"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/admin/session-limits/all": {
      "get": {
        "summary": "Obter todos os limites de sess√£o das empresas",
        "description": "Endpoint de super administrador para recuperar limites de sess√£o de todas as empresas.\nInclui pagina√ß√£o e estat√≠sticas de uso.\n",
        "tags": [
          "Admin - Sess√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "description": "N√∫mero de resultados por p√°gina"
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "number",
              "minimum": 0,
              "default": 0
            },
            "description": "N√∫mero de resultados a pular"
          }
        ],
        "responses": {
          "200": {
            "description": "Todos os limites de sess√£o recuperados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "limits": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SessionLimitsResponse"
                          }
                        },
                        "total": {
                          "type": "number",
                          "example": 150
                        },
                        "statistics": {
                          "type": "object",
                          "properties": {
                            "total_companies": {
                              "type": "number",
                              "example": 150
                            },
                            "companies_at_limit": {
                              "type": "number",
                              "example": 5
                            },
                            "companies_over_limit": {
                              "type": "number",
                              "example": 2
                            },
                            "companies_nearing_limit": {
                              "type": "number",
                              "example": 12
                            },
                            "average_usage": {
                              "type": "number",
                              "format": "float",
                              "example": 67.5
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Permiss√µes insuficientes - Super administrador necess√°rio"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/admin/sessions/companies/approaching-limits": {
      "get": {
        "summary": "Obter empresas se aproximando dos limites de sess√£o",
        "description": "Endpoint administrativo para obter empresas que est√£o se aproximando dos seus limites de sess√£o.\nUsado para monitoramento proativo e planejamento de capacidade.\n",
        "tags": [
          "Admin - Sess√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "threshold",
            "schema": {
              "type": "number",
              "minimum": 50,
              "maximum": 100,
              "default": 80
            },
            "description": "Limite percentual de uso"
          }
        ],
        "responses": {
          "200": {
            "description": "Empresas se aproximando dos limites recuperadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/SessionLimitsResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Permiss√µes insuficientes - Administrador necess√°rio"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/admin/sessions/companies/at-or-over-limits": {
      "get": {
        "summary": "Obter empresas no limite ou acima dos limites de sess√£o",
        "description": "Endpoint administrativo para obter empresas que est√£o no limite ou acima dos seus limites de sess√£o.\nRequer aten√ß√£o imediata para continuidade do servi√ßo.\n",
        "tags": [
          "Admin - Sess√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Empresas no limite ou acima recuperadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "at_limit": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SessionLimitsResponse"
                          }
                        },
                        "over_limit": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SessionLimitsResponse"
                          }
                        },
                        "total_affected": {
                          "type": "number",
                          "example": 7
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Permiss√µes insuficientes - Administrador necess√°rio"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/admin/sessions/revoke-company": {
      "post": {
        "summary": "Revogar todas as sess√µes da empresa",
        "description": "Endpoint administrativo para revogar todas as sess√µes de uma empresa espec√≠fica.\nUsado para incidentes de seguran√ßa ou desativa√ß√£o de empresa.\nEsta √© uma opera√ß√£o destrutiva que afeta todos os usu√°rios da empresa.\n",
        "tags": [
          "Admin - Sess√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "empresa_id",
                  "reason"
                ],
                "properties": {
                  "empresa_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Company ID to revoke sessions for",
                    "example": "empresa-uuid"
                  },
                  "reason": {
                    "type": "string",
                    "description": "Reason for revoking all company sessions",
                    "example": "security_incident"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sess√µes da empresa revogadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Successfully revoked 25 company session(s)"
                        },
                        "revoked_count": {
                          "type": "number",
                          "example": 25
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request data"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Insufficient permissions - Admin required"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/afiliados/meu-codigo": {
      "get": {
        "summary": "Obter ou gerar c√≥digo de afiliado",
        "description": "Retorna o c√≥digo de afiliado da empresa autenticada.\nSe a empresa ainda n√£o tiver c√≥digo, gera um novo automaticamente.\nO c√≥digo gerado √© √∫nico, possui 7 caracteres alfanum√©ricos min√∫sculos,\ne permite que a empresa indique outras empresas para receber comiss√µes.\n",
        "tags": [
          "Afiliados"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "C√≥digo de afiliado retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "success",
                    "data"
                  ],
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "required": [
                        "codigoAfiliado",
                        "comissaoPadraoTipo",
                        "comissaoPadraoValor",
                        "ativo",
                        "linkIndicacao"
                      ],
                      "properties": {
                        "codigoAfiliado": {
                          "type": "string",
                          "pattern": "^[a-z0-9]{7}$",
                          "example": "x7k9m2p",
                          "description": "C√≥digo √∫nico de 7 caracteres para compartilhar"
                        },
                        "comissaoPadraoTipo": {
                          "type": "string",
                          "enum": [
                            "percentual",
                            "fixo"
                          ],
                          "example": "percentual",
                          "description": "Tipo de comiss√£o configurada"
                        },
                        "comissaoPadraoValor": {
                          "type": "number",
                          "format": "float",
                          "example": 10,
                          "description": "Valor da comiss√£o (% ou cr√©ditos fixos)"
                        },
                        "ativo": {
                          "type": "boolean",
                          "example": true,
                          "description": "Se o c√≥digo est√° ativo para receber comiss√µes"
                        },
                        "linkIndicacao": {
                          "type": "string",
                          "format": "uri",
                          "example": "https://app.leadsrapido.com.br/checkout?ref=x7k9m2p",
                          "description": "Link pronto para compartilhar com indica√ß√µes"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Usu√°rio n√£o autenticado"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/afiliados/estatisticas": {
      "get": {
        "summary": "Obter estat√≠sticas de afiliado",
        "description": "Retorna estat√≠sticas agregadas do afiliado autenticado:\ntotal de indica√ß√µes, cr√©ditos recebidos, valor gerado e √∫ltimas 5 comiss√µes.\n",
        "tags": [
          "Afiliados"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estat√≠sticas retornadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "success",
                    "data"
                  ],
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "required": [
                        "codigoAfiliado",
                        "totalIndicacoes",
                        "totalComissoesCreditos",
                        "totalValorGeradoCentavos",
                        "ativo",
                        "createdAt",
                        "ultimasComissoes"
                      ],
                      "properties": {
                        "codigoAfiliado": {
                          "type": "string",
                          "example": "x7k9m2p"
                        },
                        "totalIndicacoes": {
                          "type": "integer",
                          "example": 15,
                          "description": "Total de empresas indicadas"
                        },
                        "totalComissoesCreditos": {
                          "type": "integer",
                          "example": 450,
                          "description": "Total de cr√©ditos recebidos em comiss√µes"
                        },
                        "totalValorGeradoCentavos": {
                          "type": "integer",
                          "example": 150000,
                          "description": "Valor total gerado pelas indica√ß√µes (em centavos)"
                        },
                        "ativo": {
                          "type": "boolean",
                          "example": true
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "ultimasComissoes": {
                          "type": "array",
                          "description": "√öltimas 5 comiss√µes recebidas",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "tipoOrigem": {
                                "type": "string",
                                "enum": [
                                  "subscription",
                                  "subscription_payment",
                                  "credit_purchase",
                                  "subscription_renewal"
                                ]
                              },
                              "comissaoCreditos": {
                                "type": "integer"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "pending",
                                  "credited",
                                  "failed"
                                ]
                              },
                              "criadoEm": {
                                "type": "string",
                                "format": "date-time"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Afiliado n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/afiliados/minhas-comissoes": {
      "get": {
        "summary": "Listar comiss√µes recebidas",
        "description": "Retorna hist√≥rico detalhado de comiss√µes recebidas pelo afiliado,\ncom suporte a pagina√ß√£o.\n",
        "tags": [
          "Afiliados"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "description": "Quantidade m√°xima de registros por p√°gina"
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            },
            "description": "N√∫mero de registros a pular (para pagina√ß√£o)"
          }
        ],
        "responses": {
          "200": {
            "description": "Comiss√µes listadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "success",
                    "data"
                  ],
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "required": [
                        "items",
                        "total",
                        "limit",
                        "offset",
                        "hasMore"
                      ],
                      "properties": {
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "afiliadoId": {
                                "type": "string"
                              },
                              "empresaIndicadaNome": {
                                "type": "string",
                                "description": "Nome da empresa indicada"
                              },
                              "tipoOrigem": {
                                "type": "string",
                                "enum": [
                                  "subscription",
                                  "subscription_payment",
                                  "credit_purchase",
                                  "subscription_renewal"
                                ]
                              },
                              "valorPagamentoCentavos": {
                                "type": "integer"
                              },
                              "comissaoCreditos": {
                                "type": "integer"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "pending",
                                  "credited",
                                  "failed"
                                ]
                              },
                              "criadoEm": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "creditadoEm": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                              }
                            }
                          }
                        },
                        "total": {
                          "type": "integer",
                          "example": 50,
                          "description": "Total de comiss√µes"
                        },
                        "limit": {
                          "type": "integer",
                          "example": 20
                        },
                        "offset": {
                          "type": "integer",
                          "example": 0
                        },
                        "hasMore": {
                          "type": "boolean",
                          "example": true,
                          "description": "Se h√° mais registros dispon√≠veis"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Afiliado n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/ai/conversations": {
      "post": {
        "summary": "Criar nova thread de conversa com agente IA",
        "tags": [
          "AI Conversations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "agentSlug"
                ],
                "properties": {
                  "agentSlug": {
                    "type": "string",
                    "example": "problem_solver",
                    "description": "Slug do agente IA (problem_solver, support_assistant, data_analyst)"
                  },
                  "contextType": {
                    "type": "string",
                    "enum": [
                      "problema_masp",
                      "problema_8d",
                      "problema_a3",
                      "custom",
                      "suporte_ticket"
                    ],
                    "description": "Tipo de contexto da conversa"
                  },
                  "contextId": {
                    "type": "string",
                    "description": "ID do contexto (ex: projeto_id para MASP, ticket_id para suporte)"
                  },
                  "title": {
                    "type": "string",
                    "maxLength": 255,
                    "description": "T√≠tulo personalizado da thread"
                  },
                  "systemPromptOverride": {
                    "type": "string",
                    "maxLength": 5000,
                    "description": "System prompt customizado para este agente"
                  },
                  "additionalContext": {
                    "type": "object",
                    "description": "Contexto adicional em JSON (ex: dados do projeto)"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Metadados customizados"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Thread criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "agentId": {
                          "type": "string"
                        },
                        "agentSlug": {
                          "type": "string"
                        },
                        "agentName": {
                          "type": "string"
                        },
                        "title": {
                          "type": "string"
                        },
                        "contextType": {
                          "type": "string"
                        },
                        "contextId": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "active",
                            "archived",
                            "closed",
                            "paused"
                          ]
                        },
                        "messageCount": {
                          "type": "number"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          }
        }
      },
      "get": {
        "summary": "Listar threads de conversa de uma empresa",
        "tags": [
          "AI Conversations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "archived",
                "closed",
                "paused"
              ]
            },
            "description": "Filtrar por status"
          },
          {
            "in": "query",
            "name": "agentSlug",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por agent slug"
          },
          {
            "in": "query",
            "name": "contextType",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por tipo de contexto"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Threads listadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "threads": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          }
                        },
                        "total": {
                          "type": "number"
                        },
                        "limit": {
                          "type": "number"
                        },
                        "offset": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          }
        }
      }
    },
    "/ai/conversations/{id}/messages": {
      "post": {
        "summary": "Enviar mensagem em uma thread",
        "tags": [
          "AI Conversations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da thread"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "content"
                ],
                "properties": {
                  "content": {
                    "type": "string",
                    "maxLength": 10000,
                    "description": "Conte√∫do da mensagem"
                  },
                  "contentType": {
                    "type": "string",
                    "enum": [
                      "text",
                      "markdown",
                      "json"
                    ],
                    "default": "text"
                  },
                  "attachments": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string"
                        },
                        "type": {
                          "type": "string"
                        },
                        "url": {
                          "type": "string",
                          "format": "uri"
                        }
                      }
                    }
                  },
                  "metadata": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mensagem enviada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "conversationId": {
                            "type": "string"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "user",
                              "assistant",
                              "system"
                            ]
                          },
                          "content": {
                            "type": "string"
                          },
                          "contentType": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Thread n√£o encontrada"
          }
        }
      }
    },
    "/ai/conversations/{id}": {
      "get": {
        "summary": "Obter hist√≥rico completo de uma conversa",
        "tags": [
          "AI Conversations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da thread"
          }
        ],
        "responses": {
          "200": {
            "description": "Hist√≥rico obtido com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "thread": {
                          "type": "object"
                        },
                        "messages": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Thread n√£o encontrada"
          }
        }
      },
      "patch": {
        "summary": "Atualizar status de uma thread",
        "tags": [
          "AI Conversations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da thread"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "archived",
                      "closed",
                      "paused"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status atualizado com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Thread n√£o encontrada"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "summary": "Fazer login no sistema",
        "description": "Autentica usu√°rio e opcionalmente cria sess√£o se device_id for fornecido",
        "tags": [
          "Autentica√ß√£o"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email do usu√°rio"
                  },
                  "password": {
                    "type": "string",
                    "description": "Senha do usu√°rio"
                  },
                  "device_id": {
                    "type": "string",
                    "description": "ID √∫nico do dispositivo (opcional - habilita gerenciamento de sess√µes)"
                  },
                  "device_fingerprint": {
                    "type": "string",
                    "description": "Fingerprint do dispositivo (opcional)"
                  },
                  "client_type": {
                    "type": "string",
                    "enum": [
                      "web",
                      "extension"
                    ],
                    "description": "Tipo de cliente (opcional - padr√£o 'web')"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login realizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string",
                      "description": "JWT token de autentica√ß√£o"
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "role": {
                          "type": "string"
                        },
                        "empresa_id": {
                          "type": "string"
                        }
                      }
                    },
                    "session": {
                      "type": "object",
                      "description": "Informa√ß√µes da sess√£o criada (apenas se device_id fornecido)",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "device_id": {
                          "type": "string"
                        },
                        "expires_at": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "Credenciais inv√°lidas"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/auth/google/callback": {
      "post": {
        "summary": "Login com Google OAuth",
        "description": "Processa o login via Google OAuth.\nO frontend deve primeiro fazer o OAuth flow com Supabase e enviar o access_token resultante.\n\n**Fluxo no Frontend:**\n1. Chamar `supabase.auth.signInWithOAuth({ provider: 'google' })`\n2. Usu√°rio √© redirecionado para o Google\n3. Ap√≥s autentica√ß√£o, Supabase redireciona para sua URL de callback\n4. No callback, obter a sess√£o com `supabase.auth.getSession()`\n5. Enviar o `access_token` da sess√£o para este endpoint\n",
        "tags": [
          "Autentica√ß√£o"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "access_token"
                ],
                "properties": {
                  "access_token": {
                    "type": "string",
                    "description": "Access token recebido do Supabase ap√≥s OAuth com Google"
                  },
                  "device_id": {
                    "type": "string",
                    "description": "ID √∫nico do dispositivo (opcional - habilita gerenciamento de sess√µes)"
                  },
                  "device_fingerprint": {
                    "type": "string",
                    "description": "Fingerprint do dispositivo (opcional)"
                  },
                  "client_type": {
                    "type": "string",
                    "enum": [
                      "web",
                      "extension"
                    ],
                    "description": "Tipo de cliente (opcional - padr√£o 'web')"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login via Google realizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "type": "string",
                          "description": "JWT token de autentica√ß√£o"
                        },
                        "refresh_token": {
                          "type": "string",
                          "description": "Refresh token (apenas se device_id fornecido)"
                        },
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "empresa_id": {
                              "type": "string",
                              "nullable": true
                            },
                            "roles": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        "empresa": {
                          "type": "object",
                          "nullable": true,
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "nome": {
                              "type": "string"
                            },
                            "cnpj": {
                              "type": "string"
                            }
                          }
                        },
                        "session": {
                          "type": "object",
                          "description": "Informa√ß√µes da sess√£o (apenas se device_id fornecido)",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "device_id": {
                              "type": "string"
                            },
                            "expires_at": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        },
                        "is_new_user": {
                          "type": "boolean",
                          "description": "Indica se √© o primeiro login (usu√°rio sem empresa)"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "Token OAuth inv√°lido"
          },
          "409": {
            "description": "Limite de sess√µes atingido"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "summary": "Solicitar redefini√ß√£o de senha",
        "tags": [
          "Autentica√ß√£o"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email do usu√°rio"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Solicita√ß√£o de reset processada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Se o email estiver correto, um link para redefini√ß√£o de senha foi enviado."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "404": {
            "description": "Usu√°rio n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "summary": "Registrar novo usu√°rio (com ou sem empresa)",
        "description": "Cria um novo usu√°rio. Se dados de empresa (nome + CNPJ/CPF) forem fornecidos, cria tamb√©m a empresa e vincula o usu√°rio",
        "tags": [
          "Autentica√ß√£o"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password",
                  "cnpj",
                  "nome empresa"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email do usu√°rio (ser√° o login)"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "description": "Senha do usu√°rio"
                  },
                  "cnpj": {
                    "type": "string",
                    "description": "CNPJ/CPF da empresa (√∫nico no sistema) - aceita 11 ou 14 d√≠gitos"
                  },
                  "empresa": {
                    "type": "string",
                    "description": "Nome da empresa"
                  },
                  "telefone": {
                    "type": "string",
                    "description": "Telefone da empresa"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usu√°rio e empresa criados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Usu√°rio e empresa criados com sucesso."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "role": {
                              "type": "string"
                            },
                            "empresa_id": {
                              "type": "string"
                            }
                          }
                        },
                        "empresa": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "cnpj": {
                              "type": "string"
                            },
                            "nome": {
                              "type": "string"
                            },
                            "telefone": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "409": {
            "description": "CNPJ/CPF j√° cadastrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/auth/confirm-reset-password": {
      "post": {
        "summary": "Confirmar nova senha com token de reset",
        "tags": [
          "Autentica√ß√£o"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token",
                  "password"
                ],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "Token de reset recebido por email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "description": "Nova senha do usu√°rio"
                  },
                  "newPassword": {
                    "type": "string",
                    "minLength": 8,
                    "description": "Nova senha do usu√°rio (alternativa ao campo password)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Senha alterada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Senha alterada com sucesso."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou token expirado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/auth/resend-confirmation": {
      "post": {
        "summary": "Reenviar email de confirma√ß√£o",
        "description": "Reenvia o email de confirma√ß√£o para usu√°rios que n√£o confirmaram seu email",
        "tags": [
          "Autentica√ß√£o"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email do usu√°rio para reenvio da confirma√ß√£o"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email de confirma√ß√£o reenviado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Se o email estiver correto, um novo link de confirma√ß√£o foi enviado."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/campanha/{id}/contacts": {
      "post": {
        "summary": "Adicionar contatos √† campanha",
        "tags": [
          "Campaign Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contact_ids": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "description": "IDs dos contatos a serem adicionados"
                  }
                },
                "required": [
                  "contact_ids"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contatos adicionados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/CampaignContact"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          }
        }
      },
      "get": {
        "summary": "Listar contatos da campanha",
        "tags": [
          "Campaign Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "ordering_strategy",
            "description": "Estrat√©gia de ordena√ß√£o dos contatos",
            "schema": {
              "type": "string",
              "enum": [
                "alphabetical",
                "random"
              ],
              "default": "alphabetical"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contatos da campanha",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/CampaignContact"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          },
          "423": {
            "description": "Fora do hor√°rio de envio configurado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Fora do hor√°rio de envio configurado para esta campanha"
                    },
                    "next_available_time": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Pr√≥ximo hor√°rio dispon√≠vel para envio"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/campanha/{id}/contacts/sync": {
      "post": {
        "summary": "Sincronizar dados de contato ou empresa na campanha",
        "tags": [
          "Campaign Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contact": {
                    "type": "object",
                    "description": "Dados do contato para deduplica√ß√£o e atualiza√ß√£o",
                    "properties": {
                      "nome": {
                        "type": "string"
                      },
                      "telefone_whatsapp": {
                        "type": "string",
                        "example": "+5511999999999"
                      },
                      "metadata": {
                        "type": "object"
                      },
                      "status": {
                        "type": "string"
                      },
                      "stage_id": {
                        "type": "string",
                        "format": "uuid"
                      }
                    }
                  },
                  "lead": {
                    "type": "object",
                    "description": "Dados da empresa/lead para deduplica√ß√£o e atualiza√ß√£o",
                    "properties": {
                      "nome_empresa": {
                        "type": "string"
                      },
                      "telefone": {
                        "type": "string"
                      },
                      "email": {
                        "type": "string",
                        "format": "email"
                      },
                      "cnpj": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string"
                      },
                      "stage_id": {
                        "type": "string",
                        "format": "uuid"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Dados sincronizados com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          }
        }
      }
    },
    "/campanha/{id}/contacts/{contact_id}": {
      "delete": {
        "summary": "Remover contato da campanha",
        "tags": [
          "Campaign Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "contact_id",
            "required": true,
            "description": "ID do contato a ser removido",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Contato removido com sucesso"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha ou contato n√£o encontrado"
          }
        }
      }
    },
    "/campaign-lead-stages": {
      "post": {
        "summary": "Criar novo est√°gio de lead de campanha",
        "tags": [
          "CampaignLeadStages"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCampaignLeadStageData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Est√°gio criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampaignLeadStageResponse"
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          }
        }
      },
      "get": {
        "summary": "Listar est√°gios de leads de campanha",
        "tags": [
          "CampaignLeadStages"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "isAtivo",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtra est√°gios ativos"
          },
          {
            "in": "query",
            "name": "categoria",
            "schema": {
              "type": "string"
            },
            "description": "Filtra por categoria do est√°gio"
          },
          {
            "in": "query",
            "name": "isInicial",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtra est√°gios marcados como iniciais"
          },
          {
            "in": "query",
            "name": "isFinal",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtra est√°gios marcados como finais"
          },
          {
            "in": "query",
            "name": "cobraCreditos",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtra est√°gios que cobram cr√©ditos"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de est√°gios retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CampaignLeadStageResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          }
        }
      }
    },
    "/campaign-lead-stages/{id}": {
      "get": {
        "summary": "Buscar est√°gio de lead de campanha por ID",
        "tags": [
          "CampaignLeadStages"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID do est√°gio"
          }
        ],
        "responses": {
          "200": {
            "description": "Est√°gio encontrado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampaignLeadStageResponse"
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Est√°gio n√£o encontrado"
          }
        }
      },
      "put": {
        "summary": "Atualizar est√°gio de lead de campanha",
        "tags": [
          "CampaignLeadStages"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID do est√°gio"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCampaignLeadStageData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Est√°gio atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampaignLeadStageResponse"
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Est√°gio n√£o encontrado"
          }
        }
      },
      "delete": {
        "summary": "Remover est√°gio de lead de campanha",
        "tags": [
          "CampaignLeadStages"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID do est√°gio"
          }
        ],
        "responses": {
          "200": {
            "description": "Est√°gio removido com sucesso"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Est√°gio n√£o encontrado"
          }
        }
      }
    },
    "/campaign-lead-stages/reorder": {
      "put": {
        "summary": "Reordenar est√°gios de leads de campanha",
        "tags": [
          "CampaignLeadStages"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReorderStagesData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Est√°gios reordenados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CampaignLeadStageResponse"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          }
        }
      }
    },
    "/campaigns/{campaignId}/funnel": {
      "get": {
        "summary": "Obter m√©tricas de funil da campanha",
        "description": "Retorna visualiza√ß√£o de funil com contagem de leads por est√°gio, taxas de convers√£o e dura√ß√£o m√©dia",
        "tags": [
          "Campaign Metrics"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "campaignId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da campanha"
          }
        ],
        "responses": {
          "200": {
            "description": "M√©tricas de funil retornadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "campaignId": {
                          "type": "string"
                        },
                        "campaignName": {
                          "type": "string"
                        },
                        "totalLeads": {
                          "type": "integer"
                        },
                        "stages": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "stageId": {
                                "type": "string"
                              },
                              "stageName": {
                                "type": "string"
                              },
                              "ordem": {
                                "type": "integer"
                              },
                              "leadCount": {
                                "type": "integer"
                              },
                              "percentage": {
                                "type": "number"
                              },
                              "conversionFromPrevious": {
                                "type": "number",
                                "nullable": true
                              },
                              "averageDurationHours": {
                                "type": "number",
                                "nullable": true
                              },
                              "averageDurationFormatted": {
                                "type": "string",
                                "nullable": true
                              }
                            }
                          }
                        },
                        "overallConversionRate": {
                          "type": "number"
                        },
                        "averageTimeToConversion": {
                          "type": "number",
                          "nullable": true
                        },
                        "averageTimeToConversionFormatted": {
                          "type": "string",
                          "nullable": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/campaigns/{campaignId}/stage-metrics": {
      "get": {
        "summary": "Obter m√©tricas detalhadas por est√°gio",
        "description": "Retorna estat√≠sticas detalhadas para cada est√°gio da campanha",
        "tags": [
          "Campaign Metrics"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "campaignId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da campanha"
          }
        ],
        "responses": {
          "200": {
            "description": "M√©tricas de est√°gios retornadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "stageId": {
                            "type": "string"
                          },
                          "stageName": {
                            "type": "string"
                          },
                          "ordem": {
                            "type": "integer"
                          },
                          "categoria": {
                            "type": "string"
                          },
                          "currentLeadCount": {
                            "type": "integer"
                          },
                          "totalLeadsEverInStage": {
                            "type": "integer"
                          },
                          "leadsMovedIn": {
                            "type": "integer"
                          },
                          "leadsMovedOut": {
                            "type": "integer"
                          },
                          "conversionRate": {
                            "type": "number"
                          },
                          "dropoffRate": {
                            "type": "number"
                          },
                          "averageDurationHours": {
                            "type": "number",
                            "nullable": true
                          },
                          "medianDurationHours": {
                            "type": "number",
                            "nullable": true
                          },
                          "cobraCreditos": {
                            "type": "boolean"
                          },
                          "custoCentavos": {
                            "type": "integer",
                            "nullable": true
                          },
                          "totalChargedCentavos": {
                            "type": "integer"
                          },
                          "totalChargedFormatado": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/campaign-stage-charges/campaign/{campaignId}": {
      "get": {
        "summary": "Listar cobran√ßas de est√°gios por campanha",
        "tags": [
          "Campaign Stage Charges"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "campaignId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "stageId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "foiCobrado",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de cobran√ßas"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          }
        }
      }
    },
    "/campaign-stage-charges/stage/{stageId}": {
      "get": {
        "summary": "Listar cobran√ßas por est√°gio",
        "tags": [
          "Campaign Stage Charges"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "stageId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "foiCobrado",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de cobran√ßas"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Est√°gio n√£o encontrado"
          }
        }
      }
    },
    "/campaign-stage-charges/summary/{campaignId}": {
      "get": {
        "summary": "Obter resumo de cobran√ßas da campanha",
        "tags": [
          "Campaign Stage Charges"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "campaignId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resumo de cobran√ßas"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          }
        }
      }
    },
    "/campaign-stage-charges/config": {
      "put": {
        "summary": "Atualizar configura√ß√£o de cobran√ßa da empresa (admin only)",
        "tags": [
          "Campaign Stage Charges"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "modeloCobrancaCampanha": {
                    "type": "string",
                    "enum": [
                      "mudanca_estagio",
                      "acesso_lead",
                      "execucao_agente"
                    ],
                    "example": "mudanca_estagio"
                  },
                  "debitarMudancaEstagio": {
                    "type": "boolean",
                    "example": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Configura√ß√£o atualizada com sucesso"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Apenas administradores"
          }
        }
      }
    },
    "/campanhas": {
      "post": {
        "summary": "Criar nova campanha",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCampanhaData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Campanha criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "409": {
            "description": "Campanha com nome j√° existe"
          }
        }
      },
      "get": {
        "summary": "Listar campanhas",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "P√°gina"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Itens por p√°gina"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Busca por nome ou descri√ß√£o"
          },
          {
            "in": "query",
            "name": "tipo",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "scraping_web",
                  "lista_importada",
                  "api_externa",
                  "manual"
                ]
              }
            },
            "description": "Filtrar por tipo"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "rascunho",
                  "ativa",
                  "pausada",
                  "concluida",
                  "cancelada"
                ]
              }
            },
            "description": "Filtrar por status"
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "default": "created_at"
            },
            "description": "Campo para ordena√ß√£o"
          },
          {
            "in": "query",
            "name": "sortOrder",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "description": "Ordem da classifica√ß√£o"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de campanhas",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaListResponse"
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          }
        }
      }
    },
    "/campanhas/{id}": {
      "get": {
        "summary": "Buscar campanha por ID",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da campanha"
          }
        ],
        "responses": {
          "200": {
            "description": "Dados da campanha",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaResponse"
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          }
        }
      },
      "put": {
        "summary": "Atualizar campanha",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da campanha"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCampanhaData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Campanha atualizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          }
        }
      },
      "delete": {
        "summary": "Deletar campanha",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da campanha"
          }
        ],
        "responses": {
          "204": {
            "description": "Campanha deletada com sucesso"
          },
          "400": {
            "description": "Campanha n√£o pode ser deletada"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          }
        }
      }
    },
    "/campanhas/{id}/status": {
      "patch": {
        "summary": "Atualizar status da campanha",
        "tags": [
          "Campanhas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da campanha"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCampanhaStatusData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status da campanha atualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampanhaResponse"
                }
              }
            }
          },
          "400": {
            "description": "Transi√ß√£o de status inv√°lida"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          }
        }
      }
    },
    "/api/v1/webhooks/chatwoot": {
      "post": {
        "summary": "Receber webhook do ChatWoot",
        "tags": [
          "Webhooks"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatwootWebhookDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook processado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "processed": {
                      "type": "boolean"
                    },
                    "qualificationStatus": {
                      "type": "string"
                    },
                    "priorityScore": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados do webhook inv√°lidos"
          },
          "401": {
            "description": "Webhook n√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/webhooks/chatwoot/test": {
      "post": {
        "summary": "Testar processamento de webhook ChatWoot",
        "tags": [
          "Webhooks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "webhookData": {
                    "$ref": "#/components/schemas/ChatwootWebhookDTO"
                  },
                  "empresaId": {
                    "type": "string"
                  },
                  "leadId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Teste executado com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          }
        }
      }
    },
    "/api/v1/webhooks/chatwoot/validate": {
      "get": {
        "summary": "Validar configura√ß√£o do webhook ChatWoot",
        "tags": [
          "Webhooks"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "empresa_id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da empresa"
          }
        ],
        "responses": {
          "200": {
            "description": "Configura√ß√£o v√°lida"
          },
          "400": {
            "description": "Configura√ß√£o inv√°lida"
          }
        }
      }
    },
    "/cidades": {
      "get": {
        "summary": "Listar cidades brasileiras",
        "description": "Lista todas as cidades brasileiras com filtros e pagina√ß√£o",
        "tags": [
          "Cidades"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "description": "N√∫mero m√°ximo de resultados por p√°gina"
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            },
            "description": "N√∫mero de registros para pular"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string",
              "minLength": 2
            },
            "description": "Busca por nome da cidade"
          },
          {
            "in": "query",
            "name": "ativo",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtrar apenas cidades ativas"
          },
          {
            "in": "query",
            "name": "estadoId",
            "schema": {
              "type": "integer"
            },
            "description": "Filtrar por ID do estado"
          },
          {
            "in": "query",
            "name": "estadoSigla",
            "schema": {
              "type": "string",
              "pattern": "^[A-Z]{2}$"
            },
            "description": "Filtrar por sigla do estado"
          },
          {
            "in": "query",
            "name": "includeEstado",
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "Incluir dados do estado na resposta"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de cidades retornada com sucesso"
          },
          "400": {
            "description": "Par√¢metros inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/cidades/{id}": {
      "get": {
        "summary": "Buscar cidade por ID",
        "description": "Retorna uma cidade espec√≠fica pelo seu ID",
        "tags": [
          "Cidades"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "description": "ID da cidade"
          },
          {
            "in": "query",
            "name": "includeEstado",
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "Incluir dados do estado na resposta"
          }
        ],
        "responses": {
          "200": {
            "description": "Cidade encontrada"
          },
          "400": {
            "description": "ID inv√°lido"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Cidade n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/cidades/por-estado/{estadoId}": {
      "get": {
        "summary": "Listar cidades por estado (ID)",
        "description": "Lista todas as cidades de um estado espec√≠fico pelo ID do estado",
        "tags": [
          "Cidades"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "estadoId",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "description": "ID do estado"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "description": "N√∫mero m√°ximo de resultados por p√°gina"
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            },
            "description": "N√∫mero de registros para pular"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string",
              "minLength": 2
            },
            "description": "Busca por nome da cidade"
          },
          {
            "in": "query",
            "name": "ativo",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtrar apenas cidades ativas"
          },
          {
            "in": "query",
            "name": "includeEstado",
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "Incluir dados do estado em cada cidade"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de cidades do estado retornada com sucesso"
          },
          "400": {
            "description": "ID do estado inv√°lido"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Estado n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/cidades/por-estado-sigla/{sigla}": {
      "get": {
        "summary": "Listar cidades por estado (sigla)",
        "description": "Lista todas as cidades de um estado espec√≠fico pela sigla do estado",
        "tags": [
          "Cidades"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "sigla",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^[A-Z]{2}$"
            },
            "description": "Sigla do estado (2 letras mai√∫sculas)",
            "example": "SP"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "description": "N√∫mero m√°ximo de resultados por p√°gina"
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            },
            "description": "N√∫mero de registros para pular"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string",
              "minLength": 2
            },
            "description": "Busca por nome da cidade"
          },
          {
            "in": "query",
            "name": "ativo",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtrar apenas cidades ativas"
          },
          {
            "in": "query",
            "name": "includeEstado",
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "Incluir dados do estado em cada cidade"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de cidades do estado retornada com sucesso"
          },
          "400": {
            "description": "Sigla do estado inv√°lida"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Estado n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/jobs/by-cities": {
      "post": {
        "summary": "Criar jobs de scraping por cidades",
        "description": "Cria jobs de scraping para todas as cidades de um estado ou para cidades espec√≠ficas",
        "tags": [
          "Scraping Jobs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "oneOf": [
                  {
                    "title": "Por Estado (ID)",
                    "properties": {
                      "estadoId": {
                        "type": "integer",
                        "example": 1
                      },
                      "termosBusca": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "example": [
                          "farmacia",
                          "clinica"
                        ]
                      },
                      "parametrosComuns": {
                        "$ref": "#/components/schemas/ParametrosComuns"
                      }
                    },
                    "required": [
                      "estadoId"
                    ]
                  },
                  {
                    "title": "Por Estado (Sigla)",
                    "properties": {
                      "estadoSigla": {
                        "type": "string",
                        "pattern": "^[A-Z]{2}$",
                        "example": "SP"
                      },
                      "termosBusca": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "example": [
                          "restaurante",
                          "lanchonete"
                        ]
                      },
                      "parametrosComuns": {
                        "$ref": "#/components/schemas/ParametrosComuns"
                      }
                    },
                    "required": [
                      "estadoSigla"
                    ]
                  },
                  {
                    "title": "Por Cidades Espec√≠ficas",
                    "properties": {
                      "cidadeIds": {
                        "type": "array",
                        "items": {
                          "type": "integer"
                        },
                        "example": [
                          1,
                          2,
                          3
                        ]
                      },
                      "segmento": {
                        "type": "string",
                        "enum": [
                          "saude",
                          "alimentacao",
                          "educacao",
                          "comercio",
                          "servicos"
                        ],
                        "example": "saude"
                      },
                      "parametrosComuns": {
                        "$ref": "#/components/schemas/ParametrosComuns"
                      }
                    },
                    "required": [
                      "cidadeIds"
                    ]
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Jobs criados com sucesso"
          },
          "400": {
            "description": "Par√¢metros inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Cr√©ditos insuficientes"
          },
          "404": {
            "description": "Estado ou cidades n√£o encontradas"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/jobs/by-cities/estimate": {
      "post": {
        "summary": "Estimar jobs de scraping por cidades",
        "description": "Calcula estimativa de jobs e cr√©ditos necess√°rios sem criar os jobs",
        "tags": [
          "Scraping Jobs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "estadoId": {
                    "type": "integer",
                    "example": 1
                  },
                  "estadoSigla": {
                    "type": "string",
                    "pattern": "^[A-Z]{2}$",
                    "example": "SP"
                  },
                  "cidadeIds": {
                    "type": "array",
                    "items": {
                      "type": "integer"
                    },
                    "example": [
                      1,
                      2,
                      3
                    ]
                  },
                  "termosBusca": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": [
                      "farmacia",
                      "clinica"
                    ]
                  },
                  "segmento": {
                    "type": "string",
                    "enum": [
                      "saude",
                      "alimentacao",
                      "educacao",
                      "comercio",
                      "servicos"
                    ],
                    "example": "saude"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Estimativa calculada com sucesso"
          },
          "400": {
            "description": "Par√¢metros inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Estado ou cidades n√£o encontradas"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/contatos": {
      "post": {
        "summary": "Criar novo contato WhatsApp",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nome",
                  "telefone_whatsapp"
                ],
                "properties": {
                  "nome": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255,
                    "description": "Nome do contato",
                    "example": "Jo√£o Silva"
                  },
                  "telefone_whatsapp": {
                    "type": "string",
                    "pattern": "^\\\\+[1-9]\\\\d{1,14}$",
                    "description": "Telefone WhatsApp no formato internacional",
                    "example": "+5511999999999"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Dados adicionais do contato",
                    "example": {
                      "empresa": "Tech Corp",
                      "cargo": "Gerente"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Contato criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "nome": {
                          "type": "string"
                        },
                        "telefone_whatsapp": {
                          "type": "string"
                        },
                        "empresa_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "metadata": {
                          "type": "object"
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updated_at": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou telefone j√° existe",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "J√° existe um contato com o telefone WhatsApp +5511999999999"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar contatos com filtros e pagina√ß√£o",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "P√°gina da consulta"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "description": "Itens por p√°gina"
          },
          {
            "in": "query",
            "name": "order_by",
            "schema": {
              "type": "string",
              "enum": [
                "nome",
                "created_at",
                "updated_at",
                "total_mensagens"
              ],
              "default": "created_at"
            },
            "description": "Campo para ordena√ß√£o"
          },
          {
            "in": "query",
            "name": "order_direction",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "description": "Dire√ß√£o da ordena√ß√£o"
          },
          {
            "in": "query",
            "name": "nome",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por nome (busca parcial)"
          },
          {
            "in": "query",
            "name": "telefone_whatsapp",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por telefone (busca parcial)"
          },
          {
            "in": "query",
            "name": "tipo_acesso",
            "schema": {
              "type": "string",
              "enum": [
                "proprietario",
                "compartilhado",
                "demonstracao"
              ]
            },
            "description": "Filtrar por tipo de acesso"
          },
          {
            "in": "query",
            "name": "ativo",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtrar por status ativo"
          },
          {
            "in": "query",
            "name": "include_acesso",
            "schema": {
              "type": "boolean",
              "default": true
            },
            "description": "Incluir dados de acesso"
          },
          {
            "in": "query",
            "name": "include_mensagens",
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "Incluir mensagens dos contatos"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contatos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "description": "Dados do contato"
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer"
                        },
                        "limit": {
                          "type": "integer"
                        },
                        "total": {
                          "type": "integer"
                        },
                        "pages": {
                          "type": "integer"
                        },
                        "has_next": {
                          "type": "boolean"
                        },
                        "has_prev": {
                          "type": "boolean"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/contatos/{id}": {
      "get": {
        "summary": "Buscar contato por ID",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do contato"
          },
          {
            "in": "query",
            "name": "include_acesso",
            "schema": {
              "type": "boolean",
              "default": true
            },
            "description": "Incluir dados de acesso"
          },
          {
            "in": "query",
            "name": "include_mensagens",
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "Incluir mensagens do contato"
          },
          {
            "in": "query",
            "name": "mensagens_limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "description": "Limite de mensagens a retornar"
          }
        ],
        "responses": {
          "200": {
            "description": "Contato encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "description": "Dados do contato (formato varia conforme par√¢metros)"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Contato n√£o encontrado ou sem acesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Empresa n√£o tem acesso a este contato"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar contato",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do contato"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nome": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255,
                    "description": "Novo nome do contato"
                  },
                  "telefone_whatsapp": {
                    "type": "string",
                    "pattern": "^\\\\+[1-9]\\\\d{1,14}$",
                    "description": "Novo telefone WhatsApp no formato internacional"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Novos dados adicionais do contato"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contato atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "description": "Dados atualizados do contato"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou telefone j√° existe"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Contato n√£o encontrado ou sem acesso"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Excluir contato (soft delete)",
        "tags": [
          "Contatos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do contato"
          }
        ],
        "responses": {
          "200": {
            "description": "Contato exclu√≠do com sucesso"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Contato n√£o encontrado ou sem acesso"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/copilot/messages": {
      "post": {
        "summary": "Enviar mensagem ao assistente AI",
        "description": "Envia uma mensagem para o assistente de IA e recebe uma resposta inteligente com insights sobre o lead",
        "tags": [
          "Copilot"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "lead_id",
                  "message"
                ],
                "properties": {
                  "thread_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID da thread para continuar conversa existente"
                  },
                  "lead_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID do lead a ser analisado"
                  },
                  "message": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 2000,
                    "description": "Mensagem para o assistente AI"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mensagem processada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "conversation_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "thread_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "message": {
                          "type": "object",
                          "properties": {
                            "role": {
                              "type": "string",
                              "example": "assistant"
                            },
                            "content": {
                              "type": "string"
                            },
                            "timestamp": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "metadata": {
                              "type": "object"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Mensagem n√£o pode estar vazia"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Token de autentica√ß√£o inv√°lido"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Lead n√£o acess√≠vel",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Lead n√£o encontrado ou sem permiss√£o de acesso"
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Limite de requisi√ß√µes excedido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Rate limit excedido"
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Servi√ßo de AI indispon√≠vel",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Servi√ßo de AI temporariamente indispon√≠vel"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/copilot/conversations/{thread_id}": {
      "get": {
        "summary": "Obter hist√≥rico de conversa",
        "description": "Recupera o hist√≥rico completo de uma conversa incluindo todas as mensagens e metadados",
        "tags": [
          "Copilot"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "thread_id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da thread da conversa"
          }
        ],
        "responses": {
          "200": {
            "description": "Hist√≥rico recuperado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "conversation": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "thread_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "lead_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "message_count": {
                              "type": "number"
                            },
                            "total_tokens": {
                              "type": "number"
                            },
                            "total_cost_usd": {
                              "type": "number"
                            }
                          }
                        },
                        "messages": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "role": {
                                "type": "string"
                              },
                              "content": {
                                "type": "string"
                              },
                              "timestamp": {
                                "type": "string",
                                "format": "date-time"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Thread ID inv√°lido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Thread ID deve ser um UUID v√°lido"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Token de autentica√ß√£o inv√°lido"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Conversa n√£o acess√≠vel",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Conversa n√£o encontrada ou sem permiss√£o de acesso"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Conversa n√£o encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Conversa n√£o encontrada"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/copilot/empresa-context": {
      "get": {
        "summary": "Obter contexto de IA da empresa",
        "description": "Recupera as diretrizes configuradas para personalizar os prompts do agente de IA com informa√ß√µes da empresa.",
        "tags": [
          "Copilot"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Contexto encontrado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "nullable": true,
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "tone_of_voice": {
                              "type": "string",
                              "example": "Tono consultivo e acolhedor"
                            },
                            "business_area": {
                              "type": "string",
                              "example": "Tecnologia para CRM B2B"
                            },
                            "company_summary": {
                              "type": "string",
                              "example": "SaaS especializado em acelera√ß√£o de vendas com IA"
                            },
                            "key_details": {
                              "type": "object",
                              "additionalProperties": true
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar contexto de IA da empresa",
        "description": "Cria ou atualiza o contexto utilizado pelo agente de IA com informa√ß√µes espec√≠ficas da empresa.",
        "tags": [
          "Copilot"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "tone_of_voice",
                  "business_area",
                  "company_summary"
                ],
                "properties": {
                  "tone_of_voice": {
                    "type": "string",
                    "example": "Tono consultivo e acolhedor"
                  },
                  "business_area": {
                    "type": "string",
                    "example": "Tecnologia para CRM B2B"
                  },
                  "company_summary": {
                    "type": "string",
                    "example": "SaaS especializado em acelera√ß√£o de vendas com IA"
                  },
                  "key_details": {
                    "type": "object",
                    "additionalProperties": true,
                    "example": {
                      "principais_produtos": [
                        "Lead Finder",
                        "CRM IA"
                      ],
                      "pilares": [
                        "Agilidade",
                        "Transpar√™ncia"
                      ]
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contexto salvo com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/copilotkit": {
      "post": {
        "summary": "CopilotKit Runtime endpoint",
        "description": "Endpoint para processar requisi√ß√µes do CopilotKit frontend. Recebe mensagens do chat, processa com OpenAI e executa a√ß√µes.",
        "tags": [
          "CopilotKit"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Corpo da requisi√ß√£o do CopilotKit (formato interno do framework)"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Requisi√ß√£o processada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Resposta do CopilotKit Runtime"
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado (JWT inv√°lido ou ausente)"
          },
          "500": {
            "description": "Erro ao processar requisi√ß√£o do CopilotKit"
          }
        }
      }
    },
    "/api/copilotkit/health": {
      "get": {
        "summary": "Health check do CopilotKit Runtime",
        "description": "Verifica se o servi√ßo CopilotKit est√° funcionando corretamente",
        "tags": [
          "CopilotKit"
        ],
        "responses": {
          "200": {
            "description": "Servi√ßo operacional",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "status": {
                      "type": "string"
                    },
                    "service": {
                      "type": "string"
                    },
                    "timestamp": {
                      "type": "string"
                    },
                    "openai_configured": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro no servi√ßo"
          }
        }
      }
    },
    "/credits/balance": {
      "get": {
        "summary": "Consultar saldo de cr√©ditos da empresa",
        "tags": [
          "Credits"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Saldo retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "empresaId": {
                          "type": "string"
                        },
                        "empresaNome": {
                          "type": "string"
                        },
                        "saldoCreditosCentavos": {
                          "type": "number"
                        },
                        "saldoFormatado": {
                          "type": "string"
                        },
                        "ultimaTransacao": {
                          "type": "object"
                        },
                        "estatisticas": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Empresa n√£o encontrada"
          }
        }
      }
    },
    "/credits/purchase-lead": {
      "post": {
        "summary": "Comprar acesso a um lead usando cr√©ditos",
        "tags": [
          "Credits"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "empresaId",
                  "leadId",
                  "userId"
                ],
                "properties": {
                  "empresaId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "leadId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "userId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "tipoAcesso": {
                    "type": "string",
                    "enum": [
                      "comprado",
                      "compartilhado"
                    ],
                    "default": "comprado"
                  },
                  "limiteVisualizacoes": {
                    "type": "number",
                    "default": 999
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead comprado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "leadAcessoId": {
                          "type": "string"
                        },
                        "custoCreditos": {
                          "type": "number"
                        },
                        "saldoRestante": {
                          "type": "number"
                        },
                        "leadData": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou saldo insuficiente"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Lead n√£o encontrado"
          }
        }
      }
    },
    "/credits/packages/purchase": {
      "post": {
        "summary": "Comprar pacote de cr√©ditos",
        "tags": [
          "Credits"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "packageId",
                  "paymentMethod"
                ],
                "properties": {
                  "packageId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "paymentMethod": {
                    "type": "string",
                    "enum": [
                      "pix",
                      "boleto",
                      "credit_card"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cobran√ßa criada com sucesso"
          }
        }
      }
    },
    "/credits/packages": {
      "get": {
        "summary": "Listar pacotes de cr√©ditos dispon√≠veis",
        "tags": [
          "Credits"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de pacotes retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          }
        }
      }
    },
    "/customers/{customerId}/activities": {
      "post": {
        "summary": "Registrar nova atividade para um cliente",
        "tags": [
          "Customer Activities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateActivityData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Atividade criada com sucesso"
          },
          "400": {
            "description": "Dados invalidos"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar atividades do cliente",
        "tags": [
          "Customer Activities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de atividades"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/activities/{id}": {
      "patch": {
        "summary": "Atualizar atividade",
        "tags": [
          "Customer Activities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateActivityData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Atividade atualizada"
          },
          "400": {
            "description": "Dados invalidos"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "404": {
            "description": "Atividade nao encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Remover atividade (soft-delete)",
        "tags": [
          "Customer Activities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Atividade removida"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "404": {
            "description": "Atividade nao encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/customers/{customerId}/contacts": {
      "post": {
        "summary": "Adicionar contato ao cliente",
        "tags": [
          "Customer Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddContactData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Contato criado com sucesso"
          },
          "400": {
            "description": "Dados invalidos"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar contatos do cliente",
        "tags": [
          "Customer Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contatos"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/customers/{customerId}/contacts/{id}": {
      "patch": {
        "summary": "Atualizar contato do cliente",
        "tags": [
          "Customer Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateContactData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contato atualizado"
          },
          "400": {
            "description": "Dados invalidos"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "404": {
            "description": "Contato nao encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Remover contato do cliente",
        "tags": [
          "Customer Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Contato removido"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "404": {
            "description": "Contato nao encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/customers/{customerId}/contacts/{id}/set-primary": {
      "post": {
        "summary": "Definir contato principal do cliente",
        "tags": [
          "Customer Contacts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Contato definido como principal"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "404": {
            "description": "Contato nao encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/customers/{customerId}/contracts": {
      "post": {
        "summary": "Criar contrato para cliente",
        "tags": [
          "Customer Contracts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateContractData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Contrato criado com sucesso"
          },
          "400": {
            "description": "Dados invalidos"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "409": {
            "description": "Numero de contrato ja existe"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar contratos do cliente",
        "tags": [
          "Customer Contracts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contratos"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/contracts/near-renewal": {
      "get": {
        "summary": "Listar contratos proximos de renovacao",
        "tags": [
          "Customer Contracts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contratos proximos de renovacao"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/contracts/{id}": {
      "patch": {
        "summary": "Atualizar contrato",
        "tags": [
          "Customer Contracts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateContractData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contrato atualizado"
          },
          "400": {
            "description": "Dados invalidos"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "404": {
            "description": "Contrato nao encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/contracts/{id}/renew": {
      "post": {
        "summary": "Renovar contrato",
        "tags": [
          "Customer Contracts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RenewContractData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contrato renovado com sucesso"
          },
          "400": {
            "description": "Dados invalidos"
          },
          "401": {
            "description": "Nao autorizado"
          },
          "404": {
            "description": "Contrato nao encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/customers": {
      "get": {
        "summary": "Listar clientes com pagina√ß√£o e filtros",
        "tags": [
          "Customers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          },
          {
            "name": "cursor",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "ATIVO",
                "INATIVO",
                "SUSPENSO",
                "CANCELADO"
              ]
            }
          },
          {
            "name": "categoria",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "OURO",
                "PRATA",
                "BRONZE",
                "STANDARD"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de clientes"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/customers/{id}": {
      "get": {
        "summary": "Buscar cliente por ID",
        "tags": [
          "Customers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cliente encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "empresa_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "opportunity_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "lead_id": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true
                        },
                        "nome": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "nullable": true
                        },
                        "telefone": {
                          "type": "string",
                          "nullable": true
                        },
                        "cnpj": {
                          "type": "string",
                          "nullable": true
                        },
                        "categoria": {
                          "type": "string",
                          "enum": [
                            "OURO",
                            "PRATA",
                            "BRONZE",
                            "STANDARD"
                          ]
                        },
                        "contract_value": {
                          "type": "number"
                        },
                        "contract_start_date": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "contract_renewal_date": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "days_until_renewal": {
                          "type": "integer",
                          "description": "Calculado (contract_renewal_date - NOW())"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "ATIVO",
                            "INATIVO",
                            "SUSPENSO",
                            "CANCELADO"
                          ]
                        },
                        "canceled_reason": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updated_at": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Cliente n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "patch": {
        "summary": "Atualizar dados do cliente",
        "tags": [
          "Customers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCustomerRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cliente atualizado"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Cliente n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/customers/{id}/status": {
      "patch": {
        "summary": "Atualizar status do cliente",
        "tags": [
          "Customers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "ATIVO",
                      "INATIVO",
                      "SUSPENSO",
                      "CANCELADO"
                    ]
                  },
                  "canceled_reason": {
                    "type": "string",
                    "description": "Obrigat√≥rio se status = CANCELADO"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status atualizado"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Cliente n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/customers/{id}/timeline": {
      "get": {
        "summary": "Obter timeline completa do cliente (hist√≥rico + atividades)",
        "tags": [
          "Customers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Timeline do cliente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "event_type": {
                            "type": "string",
                            "enum": [
                              "status_change",
                              "activity",
                              "contract_created",
                              "contact_added"
                            ]
                          },
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "created_at": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "old_status": {
                            "type": "string",
                            "nullable": true
                          },
                          "new_status": {
                            "type": "string",
                            "nullable": true
                          },
                          "activity_type": {
                            "type": "string",
                            "nullable": true
                          },
                          "activity_result": {
                            "type": "string",
                            "nullable": true
                          },
                          "changed_by_user_id": {
                            "type": "string",
                            "format": "uuid"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Cliente n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/customers/{id}/health-score": {
      "get": {
        "summary": "Calcular score de sa√∫de do cliente em tempo real",
        "tags": [
          "Customers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Health score calculado"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Cliente n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/dashboard/metrics": {
      "get": {
        "summary": "Obter m√©tricas completas do dashboard",
        "description": "Retorna todas as m√©tricas necess√°rias para o dashboard principal incluindo leads, campanhas, search terms, scraping e gr√°ficos",
        "tags": [
          "Dashboard"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "dataInicio",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Data de in√≠cio para filtrar m√©tricas (formato YYYY-MM-DD)",
            "example": "2024-01-01"
          },
          {
            "in": "query",
            "name": "dataFim",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Data de fim para filtrar m√©tricas (formato YYYY-MM-DD)",
            "example": "2024-01-31"
          },
          {
            "in": "query",
            "name": "campanhaIds",
            "style": "form",
            "explode": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "IDs das campanhas para filtrar",
            "example": [
              "uuid1",
              "uuid2"
            ]
          },
          {
            "in": "query",
            "name": "origens",
            "style": "form",
            "explode": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "Origens dos leads para filtrar",
            "example": [
              "Google Maps",
              "Importa√ß√£o Manual"
            ]
          }
        ],
        "responses": {
          "200": {
            "description": "M√©tricas do dashboard obtidas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardMetricsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros de filtro inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/dashboard/quick-stats": {
      "get": {
        "summary": "Obter estat√≠sticas r√°pidas do dashboard",
        "description": "Retorna estat√≠sticas b√°sicas para widgets de dashboard - ideal para atualiza√ß√µes frequentes",
        "tags": [
          "Dashboard"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estat√≠sticas r√°pidas obtidas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/QuickStatsResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "ID da empresa √© obrigat√≥rio"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/dashboard/health": {
      "get": {
        "summary": "Verificar sa√∫de do sistema dashboard",
        "description": "Retorna indicadores de sa√∫de espec√≠ficos para funcionalidades do dashboard",
        "tags": [
          "Dashboard"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status de sa√∫de do sistema",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "healthy",
                            "degraded",
                            "unhealthy"
                          ],
                          "example": "healthy"
                        },
                        "services": {
                          "type": "object",
                          "properties": {
                            "database": {
                              "type": "string",
                              "enum": [
                                "operational",
                                "degraded",
                                "down"
                              ],
                              "example": "operational"
                            },
                            "scraping": {
                              "type": "string",
                              "enum": [
                                "operational",
                                "degraded",
                                "down"
                              ],
                              "example": "operational"
                            },
                            "campaigns": {
                              "type": "string",
                              "enum": [
                                "operational",
                                "degraded",
                                "down"
                              ],
                              "example": "operational"
                            }
                          }
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T10:30:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/dashboard/export": {
      "post": {
        "summary": "Exportar dados do dashboard",
        "description": "Gera e retorna um arquivo com os dados do dashboard no formato especificado",
        "tags": [
          "Dashboard"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DashboardExportRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Arquivo gerado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "downloadUrl": {
                          "type": "string",
                          "example": "/downloads/dashboard-export-12345.pdf"
                        },
                        "expiresAt": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2024-01-15T12:00:00Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros de exporta√ß√£o inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/data-dossie/consult": {
      "post": {
        "summary": "Consulta DataDossie completo (PH3A + Negative Media + Web Search)",
        "description": "Inicia uma consulta completa de DataDossie que agrega:\n- Dossi√™ PH3A (scores, telefones, emails, processos)\n- Investiga√ß√£o de M√≠dia Negativa (busca e an√°lise de fontes)\n- Busca Web (Firecrawl search)\n\nA consulta √© executada em paralelo e retorna o resultado agregado.\n",
        "tags": [
          "DataDossie"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "leadId",
                  "document",
                  "documentType"
                ],
                "properties": {
                  "leadId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID do lead a ser consultado"
                  },
                  "document": {
                    "type": "string",
                    "minLength": 11,
                    "maxLength": 18,
                    "description": "CPF (11 d√≠gitos) ou CNPJ (14 d√≠gitos)",
                    "example": "12345678901"
                  },
                  "documentType": {
                    "type": "string",
                    "enum": [
                      "cpf",
                      "cnpj"
                    ],
                    "description": "Tipo do documento"
                  },
                  "options": {
                    "type": "object",
                    "properties": {
                      "includePh3a": {
                        "type": "boolean",
                        "default": true,
                        "description": "Incluir consulta PH3A"
                      },
                      "includeNegativeMedia": {
                        "type": "boolean",
                        "default": true,
                        "description": "Incluir investiga√ß√£o de m√≠dia negativa"
                      },
                      "includeWebSearch": {
                        "type": "boolean",
                        "default": true,
                        "description": "Incluir busca web"
                      },
                      "maxWebResults": {
                        "type": "number",
                        "minimum": 1,
                        "maximum": 50,
                        "default": 10,
                        "description": "M√°ximo de resultados web"
                      },
                      "forceRefresh": {
                        "type": "boolean",
                        "default": false,
                        "description": "For√ßar nova consulta (ignorar cache)"
                      },
                      "ph3aPackageId": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID do pacote PH3A customizado"
                      },
                      "searchTemplateId": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID do template de busca para m√≠dia negativa"
                      },
                      "analysisPromptId": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID do prompt de an√°lise para m√≠dia negativa"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "DataDossie criado e consulta iniciada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "leadId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pendente",
                            "processando",
                            "concluido",
                            "erro",
                            "parcial"
                          ]
                        },
                        "overallRiskScore": {
                          "type": "number",
                          "nullable": true
                        },
                        "ph3aData": {
                          "type": "object",
                          "nullable": true
                        },
                        "negativeMediaData": {
                          "type": "object",
                          "nullable": true
                        },
                        "webSearchResults": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/data-dossie/{id}/status": {
      "get": {
        "summary": "Consulta status de DataDossie",
        "description": "Retorna o status atual da consulta de DataDossie com progresso de cada parte",
        "tags": [
          "DataDossie"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do DataDossie"
          }
        ],
        "responses": {
          "200": {
            "description": "Status retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pendente",
                            "processando",
                            "concluido",
                            "erro",
                            "parcial"
                          ]
                        },
                        "progress": {
                          "type": "object",
                          "properties": {
                            "ph3a": {
                              "type": "string",
                              "enum": [
                                "pending",
                                "running",
                                "completed",
                                "failed"
                              ]
                            },
                            "negativeMedia": {
                              "type": "string",
                              "enum": [
                                "pending",
                                "running",
                                "completed",
                                "failed"
                              ]
                            },
                            "webSearch": {
                              "type": "string",
                              "enum": [
                                "pending",
                                "running",
                                "completed",
                                "failed"
                              ]
                            }
                          }
                        },
                        "overallRiskScore": {
                          "type": "number",
                          "nullable": true
                        },
                        "completedAt": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "DataDossie n√£o encontrado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/disparo-rapido/messages/track": {
      "post": {
        "summary": "Registrar mensagem enviada via DisparoRapido",
        "tags": [
          "DisparoRapido"
        ],
        "security": [
          {
            "apiKey": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TrackMessageData"
              },
              "examples": {
                "exemplo": {
                  "$ref": "#/components/examples/TrackMessageRequestExample"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mensagem registrada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TrackMessageSuccessResponse"
                },
                "examples": {
                  "sucesso": {
                    "$ref": "#/components/examples/TrackMessageResponseExample"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "API key inv√°lida"
          },
          "403": {
            "description": "empresa_id n√£o autorizado"
          },
          "429": {
            "description": "Limite de requisi√ß√µes excedido"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/disparo-rapido/messages": {
      "get": {
        "summary": "Consultar mensagens enviadas pelo DisparoRapido",
        "tags": [
          "DisparoRapido"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "data_inicio",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filtrar mensagens a partir desta data/hora"
          },
          {
            "in": "query",
            "name": "data_fim",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filtrar mensagens at√© esta data/hora"
          },
          {
            "in": "query",
            "name": "telefone",
            "schema": {
              "type": "string"
            },
            "description": "Telefone do contato"
          },
          {
            "in": "query",
            "name": "codigo_whatsapp",
            "schema": {
              "type": "string"
            },
            "description": "C√≥digo WhatsApp do contato"
          },
          {
            "in": "query",
            "name": "device_id",
            "schema": {
              "type": "string"
            },
            "description": "Identificador do dispositivo"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "default": 1
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            },
            "default": 50
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de mensagens retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DisparoRapidoMessagesResponse"
                },
                "examples": {
                  "sucesso": {
                    "$ref": "#/components/examples/QueryMessagesResponseExample"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/disparo-rapido/vinculacoes/pendentes": {
      "get": {
        "summary": "Listar vincula√ß√µes de leads pendentes de revis√£o manual",
        "tags": [
          "DisparoRapido"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "apenas_nao_revisadas",
            "schema": {
              "type": "boolean",
              "default": true
            },
            "description": "Retornar apenas vincula√ß√µes n√£o revisadas"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de vincula√ß√µes pendentes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/VinculacaoPendente"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/disparo-rapido/vinculacoes/manual": {
      "post": {
        "summary": "Vincular lead manualmente a uma conversa",
        "tags": [
          "DisparoRapido"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "conversation_id",
                  "lead_id"
                ],
                "properties": {
                  "conversation_id": {
                    "type": "integer",
                    "description": "ID da conversa"
                  },
                  "lead_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID do lead a ser vinculado"
                  },
                  "observacoes": {
                    "type": "string",
                    "description": "Observa√ß√µes sobre a vincula√ß√£o manual"
                  }
                }
              },
              "example": {
                "conversation_id": 123,
                "lead_id": "550e8400-e29b-41d4-a716-446655440000",
                "observacoes": "Lead confirmado via telefone"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead vinculado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Conversa ou lead n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/empresas": {
      "get": {
        "summary": "Listar todas as empresas",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de empresas retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/EmpresaResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "post": {
        "summary": "Criar nova empresa",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateEmpresaData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Empresa criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/EmpresaResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/empresas/stats": {
      "get": {
        "summary": "Obter estat√≠sticas da empresa",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estat√≠sticas retornadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalLeads": {
                          "type": "number"
                        },
                        "totalCampanhas": {
                          "type": "number"
                        },
                        "creditsUsed": {
                          "type": "number"
                        },
                        "creditsRemaining": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/empresas/{id}": {
      "get": {
        "summary": "Obter empresa por ID",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da empresa"
          }
        ],
        "responses": {
          "200": {
            "description": "Empresa encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/EmpresaResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Empresa n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar empresa",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da empresa"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateEmpresaData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Empresa atualizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/EmpresaResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Empresa n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Deletar empresa",
        "tags": [
          "Empresas"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID da empresa"
          }
        ],
        "responses": {
          "204": {
            "description": "Empresa deletada com sucesso"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Empresa n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads-advanced/{id}/enrich": {
      "post": {
        "summary": "Enriquecer dados de um lead",
        "tags": [
          "Lead Advanced"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do lead"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "providerNames": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1
                  },
                  "complexity": {
                    "type": "string"
                  },
                  "forceRefresh": {
                    "type": "boolean",
                    "description": "For√ßar re-enriquecimento mesmo se j√° enriquecido"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Enriquecimento executado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "leadId": {
                          "type": "string"
                        },
                        "enriched": {
                          "type": "boolean"
                        },
                        "fieldsUpdated": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "sources": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "errors": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "202": {
            "description": "Job criado com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Lead n√£o encontrado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/leads-advanced/{id}/enrichment": {
      "get": {
        "summary": "Consulta status de enriquecimento de lead",
        "tags": [
          "Enrichment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status de enriquecimento retornado"
          },
          "404": {
            "description": "Lead ou enriquecimento n√£o encontrado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/enrichment/providers": {
      "get": {
        "summary": "Lista providers de enriquecimento ativos",
        "tags": [
          "Enrichment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "type",
            "schema": {
              "type": "string",
              "enum": [
                "web_search",
                "location",
                "company_data"
              ]
            },
            "description": "Filtrar por tipo de provider (opcional)"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de providers ativos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/enrichment/providers/{id}": {
      "patch": {
        "summary": "Atualiza configura√ß√£o de provider",
        "tags": [
          "Enrichment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do provider"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean"
                  },
                  "priority": {
                    "type": "number"
                  },
                  "config": {
                    "type": "object"
                  },
                  "rateLimitPerMinute": {
                    "type": "number"
                  },
                  "costPerRequestCents": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Provider atualizado com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Provider n√£o encontrado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/admin/enrichment/stats": {
      "get": {
        "summary": "Obt√©m estat√≠sticas de uso e custos dos providers",
        "tags": [
          "Enrichment"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Data inicial (ISO 8601). Padr√£o: 7 dias atr√°s"
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Data final (ISO 8601). Padr√£o: hoje"
          },
          {
            "in": "query",
            "name": "providerName",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por provider espec√≠fico (opcional)"
          }
        ],
        "responses": {
          "200": {
            "description": "Estat√≠sticas retornadas com sucesso"
          },
          "400": {
            "description": "Datas inv√°lidas"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/estados": {
      "get": {
        "summary": "Listar estados brasileiros",
        "description": "Lista todos os estados brasileiros com filtros e pagina√ß√£o",
        "tags": [
          "Estados"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "description": "N√∫mero m√°ximo de resultados por p√°gina"
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            },
            "description": "N√∫mero de registros para pular"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string",
              "minLength": 2
            },
            "description": "Busca por nome ou sigla do estado"
          },
          {
            "in": "query",
            "name": "ativo",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtrar apenas estados ativos"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de estados retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "example": 1
                          },
                          "codigoIbge": {
                            "type": "integer",
                            "example": 35
                          },
                          "sigla": {
                            "type": "string",
                            "example": "SP"
                          },
                          "nome": {
                            "type": "string",
                            "example": "S√£o Paulo"
                          },
                          "ativo": {
                            "type": "boolean",
                            "example": true
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer",
                          "example": 27
                        },
                        "limit": {
                          "type": "integer",
                          "example": 50
                        },
                        "offset": {
                          "type": "integer",
                          "example": 0
                        },
                        "hasMore": {
                          "type": "boolean",
                          "example": false
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros inv√°lidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Termo de busca deve ter pelo menos 2 caracteres"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/estados/{id}": {
      "get": {
        "summary": "Buscar estado por ID",
        "description": "Retorna um estado espec√≠fico pelo seu ID",
        "tags": [
          "Estados"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "description": "ID do estado"
          }
        ],
        "responses": {
          "200": {
            "description": "Estado encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "example": 1
                        },
                        "codigoIbge": {
                          "type": "integer",
                          "example": 35
                        },
                        "sigla": {
                          "type": "string",
                          "example": "SP"
                        },
                        "nome": {
                          "type": "string",
                          "example": "S√£o Paulo"
                        },
                        "ativo": {
                          "type": "boolean",
                          "example": true
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "ID inv√°lido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "ID do estado √© obrigat√≥rio e deve ser positivo"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Estado n√£o encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Estado n√£o encontrado"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/estados/sigla/{sigla}": {
      "get": {
        "summary": "Buscar estado por sigla",
        "description": "Retorna um estado espec√≠fico pela sua sigla (ex SP, RJ)",
        "tags": [
          "Estados"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "sigla",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^[A-Z]{2}$"
            },
            "description": "Sigla do estado (2 letras mai√∫sculas)",
            "example": "SP"
          }
        ],
        "responses": {
          "200": {
            "description": "Estado encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "example": 1
                        },
                        "codigoIbge": {
                          "type": "integer",
                          "example": 35
                        },
                        "sigla": {
                          "type": "string",
                          "example": "SP"
                        },
                        "nome": {
                          "type": "string",
                          "example": "S√£o Paulo"
                        },
                        "ativo": {
                          "type": "boolean",
                          "example": true
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Sigla inv√°lida",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Formato da sigla inv√°lido. Deve conter exatamente 2 letras mai√∫sculas"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Estado n√£o encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Estado n√£o encontrado"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/status": {
      "get": {
        "summary": "Obter status do worker de scraping",
        "description": "Retorna o status atual do worker de scraping do Google Maps",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status obtido com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "isRunning": {
                          "type": "boolean",
                          "description": "Se o worker est√° executando"
                        },
                        "queueSize": {
                          "type": "number",
                          "description": "N√∫mero de jobs na fila"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Status do worker obtido com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/start": {
      "post": {
        "summary": "Iniciar worker de scraping",
        "description": "Inicia o worker de scraping do Google Maps",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Worker iniciado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker de scraping iniciado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "409": {
            "description": "Worker j√° est√° executando"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/stop": {
      "post": {
        "summary": "Parar worker de scraping",
        "description": "Para o worker de scraping do Google Maps",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Worker parado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker de scraping parado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/jobs": {
      "post": {
        "summary": "Adicionar job de scraping",
        "description": "Adiciona um novo job de scraping do Google Maps",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "parametros_busca"
                ],
                "properties": {
                  "parametros_busca": {
                    "type": "object",
                    "required": [
                      "termo_busca"
                    ],
                    "properties": {
                      "termo_busca": {
                        "type": "string",
                        "description": "Termo para busca no Google Maps",
                        "example": "restaurante italiano"
                      },
                      "localizacao": {
                        "type": "string",
                        "description": "Localiza√ß√£o para a busca",
                        "example": "S√£o Paulo, SP"
                      }
                    }
                  },
                  "prioridade": {
                    "type": "string",
                    "enum": [
                      "baixa",
                      "normal",
                      "alta",
                      "urgente"
                    ],
                    "default": "normal",
                    "description": "Prioridade do job"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Job adicionado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "jobId": {
                          "type": "string",
                          "description": "ID do job criado"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Job adicionado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/jobs/bulk": {
      "post": {
        "summary": "Adicionar jobs em lote",
        "description": "Adiciona m√∫ltiplos jobs de scraping do Google Maps de uma vez",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "termosBusca",
                  "cidade"
                ],
                "properties": {
                  "termosBusca": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Array de termos para busca",
                    "example": [
                      "restaurante italiano",
                      "pizzaria",
                      "padaria"
                    ]
                  },
                  "cidade": {
                    "type": "string",
                    "description": "Cidade para todas as buscas",
                    "example": "S√£o Paulo, SP"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Jobs adicionados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "jobIds": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "description": "IDs dos jobs criados"
                        },
                        "total": {
                          "type": "number",
                          "description": "Total de jobs criados"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Jobs adicionados com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/jobs/segmented": {
      "post": {
        "summary": "Adicionar jobs segmentados",
        "description": "Adiciona jobs de scraping baseados em templates de segmento predefinidos",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "segmento",
                  "cidade"
                ],
                "properties": {
                  "segmento": {
                    "type": "string",
                    "description": "Segmento de neg√≥cio para usar template predefinido",
                    "example": "restaurantes"
                  },
                  "cidade": {
                    "type": "string",
                    "description": "Cidade para a busca",
                    "example": "S√£o Paulo, SP"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Jobs segmentados adicionados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "jobIds": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "description": "IDs dos jobs criados"
                        },
                        "segmento": {
                          "type": "string",
                          "description": "Segmento utilizado"
                        },
                        "cidade": {
                          "type": "string",
                          "description": "Cidade utilizada"
                        },
                        "total": {
                          "type": "number",
                          "description": "Total de jobs criados"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Jobs segmentados adicionados com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou segmento n√£o encontrado"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/stats": {
      "get": {
        "summary": "Obter estat√≠sticas de scraping",
        "description": "Retorna estat√≠sticas dos jobs de scraping do Google Maps",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "empresaId",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da empresa (opcional, usa contexto da autentica√ß√£o se n√£o fornecido)"
          }
        ],
        "responses": {
          "200": {
            "description": "Estat√≠sticas obtidas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalJobs": {
                          "type": "number",
                          "description": "Total de jobs"
                        },
                        "completedJobs": {
                          "type": "number",
                          "description": "Jobs conclu√≠dos"
                        },
                        "pendingJobs": {
                          "type": "number",
                          "description": "Jobs pendentes"
                        },
                        "errorJobs": {
                          "type": "number",
                          "description": "Jobs com erro"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Estat√≠sticas obtidas com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/scraping/templates": {
      "get": {
        "summary": "Listar templates de segmento",
        "description": "Retorna os templates de busca dispon√≠veis por segmento de neg√≥cio",
        "tags": [
          "Google Maps Scraping"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Templates listados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "segmento": {
                            "type": "string",
                            "description": "Nome do segmento"
                          },
                          "termos": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            },
                            "description": "Primeiros 5 termos do template"
                          },
                          "totalTermos": {
                            "type": "number",
                            "description": "Total de termos no template"
                          },
                          "filtros": {
                            "type": "object",
                            "description": "Filtros aplicados"
                          },
                          "categorias": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            },
                            "description": "Primeiras 3 categorias"
                          }
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Templates listados com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads-advanced/{id}/validate-contacts": {
      "post": {
        "summary": "Validar contatos de um lead (email e telefone)",
        "tags": [
          "Lead Advanced"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID do lead"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "validateEmail": {
                    "type": "boolean",
                    "description": "Validar email"
                  },
                  "validatePhone": {
                    "type": "boolean",
                    "description": "Validar telefone"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Valida√ß√£o executada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "leadId": {
                          "type": "string"
                        },
                        "email": {
                          "type": "object",
                          "properties": {
                            "isValid": {
                              "type": "boolean"
                            },
                            "reason": {
                              "type": "string"
                            },
                            "provider": {
                              "type": "string"
                            },
                            "disposable": {
                              "type": "boolean"
                            }
                          }
                        },
                        "phone": {
                          "type": "object",
                          "properties": {
                            "isValid": {
                              "type": "boolean"
                            },
                            "reason": {
                              "type": "string"
                            },
                            "country": {
                              "type": "string"
                            },
                            "type": {
                              "type": "string",
                              "enum": [
                                "mobile",
                                "landline",
                                "voip"
                              ]
                            }
                          }
                        },
                        "updated": {
                          "type": "boolean"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "404": {
            "description": "Lead n√£o encontrado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/leads-advanced/detect-duplicates": {
      "post": {
        "summary": "Detectar leads duplicados",
        "tags": [
          "Lead Advanced"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nomeEmpresa": {
                    "type": "string",
                    "description": "Nome da empresa"
                  },
                  "email": {
                    "type": "string",
                    "description": "Email do contato"
                  },
                  "telefone": {
                    "type": "string",
                    "description": "Telefone"
                  },
                  "cnpj": {
                    "type": "string",
                    "description": "CNPJ da empresa"
                  },
                  "threshold": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 100,
                    "description": "Score m√≠nimo para considerar duplicata (padr√£o 70)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Detec√ß√£o executada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "hasDuplicates": {
                          "type": "boolean"
                        },
                        "matches": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "leadId": {
                                "type": "string"
                              },
                              "similarityScore": {
                                "type": "number"
                              },
                              "matchReasons": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              }
                            }
                          }
                        },
                        "recommendation": {
                          "type": "string",
                          "enum": [
                            "create",
                            "merge",
                            "review"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/leads-advanced/{id}/calculate-score": {
      "post": {
        "summary": "Calcular score de qualifica√ß√£o do lead",
        "tags": [
          "Lead Advanced"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID do lead"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "customRules": {
                    "type": "array",
                    "description": "Regras customizadas de score (opcional)",
                    "items": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "type": "string"
                        },
                        "weight": {
                          "type": "number"
                        },
                        "points": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "C√°lculo executado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "leadId": {
                          "type": "string"
                        },
                        "oldScore": {
                          "type": "number"
                        },
                        "newScore": {
                          "type": "number"
                        },
                        "breakdown": {
                          "type": "object",
                          "properties": {
                            "totalScore": {
                              "type": "number"
                            },
                            "percentage": {
                              "type": "number"
                            },
                            "category": {
                              "type": "string",
                              "enum": [
                                "low",
                                "medium",
                                "high",
                                "excellent"
                              ]
                            },
                            "appliedRules": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "ruleName": {
                                    "type": "string"
                                  },
                                  "points": {
                                    "type": "number"
                                  },
                                  "applied": {
                                    "type": "boolean"
                                  }
                                }
                              }
                            }
                          }
                        },
                        "updated": {
                          "type": "boolean"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "404": {
            "description": "Lead n√£o encontrado"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/leads": {
      "post": {
        "tags": [
          "Leads"
        ],
        "summary": "Criar um novo lead",
        "description": "Cria um novo lead no sistema com valida√ß√£o completa dos dados",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateLeadDTO"
              },
              "example": {
                "nomeEmpresa": "Empresa Exemplo Ltda",
                "nomeContato": "Jo√£o Silva",
                "cargoContato": "Diretor Executivo",
                "email": "joao.silva@empresa.com",
                "telefone": "+55 11 99999-9999",
                "linkedinUrl": "https://linkedin.com/in/joaosilva",
                "siteEmpresa": "https://empresa.com",
                "cnpj": "12.345.678/0001-90",
                "segmento": "Tecnologia",
                "porteEmpresa": "M√©dio",
                "numFuncionarios": 50,
                "receitaAnualEstimada": 5000000,
                "endereco": {
                  "rua": "Rua das Flores",
                  "numero": "123",
                  "cidade": "S√£o Paulo",
                  "estado": "SP",
                  "cep": "01234-567",
                  "pais": "Brasil"
                },
                "status": "novo",
                "tags": [
                  "tecnologia",
                  "b2b"
                ],
                "observacoes": "Lead identificado via LinkedIn",
                "fonte": "linkedin",
                "dadosOriginais": {},
                "custoAquisicao": 150
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Lead criado com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "tags": [
          "Leads"
        ],
        "summary": "Listar leads com filtros e pagina√ß√£o",
        "description": "Lista leads da organiza√ß√£o com suporte a filtros avan√ßados e pagina√ß√£o",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "N√∫mero da p√°gina"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "description": "N√∫mero de itens por p√°gina"
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "enum": [
                "createdAt",
                "updatedAt",
                "nomeEmpresa",
                "scoreQualificacao"
              ],
              "default": "createdAt"
            },
            "description": "Campo para ordena√ß√£o"
          },
          {
            "in": "query",
            "name": "sortOrder",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "description": "Ordem de ordena√ß√£o"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "novo",
                "contato_inicial",
                "qualificado",
                "proposta",
                "fechado",
                "perdido"
              ]
            },
            "description": "Filtrar por status do lead"
          },
          {
            "in": "query",
            "name": "scoreMin",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            },
            "description": "Score m√≠nimo de qualifica√ß√£o"
          },
          {
            "in": "query",
            "name": "scoreMax",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            },
            "description": "Score m√°ximo de qualifica√ß√£o"
          },
          {
            "in": "query",
            "name": "segmento",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por segmento da empresa"
          },
          {
            "in": "query",
            "name": "porteEmpresa",
            "schema": {
              "type": "string",
              "enum": [
                "Pequeno",
                "M√©dio",
                "Grande"
              ]
            },
            "description": "Filtrar por porte da empresa"
          },
          {
            "in": "query",
            "name": "fonte",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por fonte de origem"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Busca textual em nome da empresa, contato e email"
          },
          {
            "in": "query",
            "name": "tags",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "Filtrar por tags (m√∫ltiplas tags separadas por v√≠rgula)"
          },
          {
            "in": "query",
            "name": "createdAfter",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Leads criados ap√≥s esta data"
          },
          {
            "in": "query",
            "name": "createdBefore",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Leads criados antes desta data"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de leads retornada com sucesso"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/{id}": {
      "get": {
        "tags": [
          "Leads"
        ],
        "summary": "Buscar lead por ID",
        "description": "Busca um lead espec√≠fico pelo seu ID √∫nico",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID √∫nico do lead",
            "example": "lead-123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "responses": {
          "200": {
            "description": "Lead encontrado"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Acesso negado"
          },
          "404": {
            "description": "Lead n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "tags": [
          "Leads"
        ],
        "summary": "Atualizar lead",
        "description": "Atualiza os dados de um lead existente. Todos os campos s√£o opcionais, permitindo atualiza√ß√µes parciais.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID √∫nico do lead",
            "example": "lead-123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLeadDTO"
              },
              "example": {
                "nomeContato": "Jo√£o Silva Santos",
                "cargoContato": "Diretor Executivo",
                "email": "joao.silva@empresa.com",
                "telefone": "+55 11 99999-9999",
                "linkedinUrl": "https://linkedin.com/in/joaosilva",
                "siteEmpresa": "https://empresa.com",
                "cnpj": "12.345.678/0001-90",
                "segmento": "Tecnologia",
                "porteEmpresa": "M√©dio",
                "numFuncionarios": 150,
                "receitaAnualEstimada": 10000000,
                "endereco": {
                  "rua": "Rua das Flores",
                  "numero": "123",
                  "cidade": "S√£o Paulo",
                  "estado": "SP",
                  "cep": "01234-567",
                  "pais": "Brasil",
                  "latitude": -23.5505,
                  "longitude": -46.6333
                },
                "tags": [
                  "tecnologia",
                  "b2b",
                  "qualificado"
                ],
                "observacoes": "Lead qualificado ap√≥s reuni√£o inicial. Empresa demonstrou interesse em solu√ß√£o completa.",
                "dadosOriginais": {
                  "fonteOriginal": "linkedin",
                  "dataCaptura": "2024-01-15T10:30:00Z",
                  "perfilLinkedin": "https://linkedin.com/in/joaosilva"
                },
                "custoAquisicao": 250
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead atualizado com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Dados de endere√ßo inv√°lidos"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Acesso negado"
          },
          "404": {
            "description": "Lead n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "tags": [
          "Leads"
        ],
        "summary": "Deletar lead",
        "description": "Remove permanentemente um lead do sistema",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID √∫nico do lead",
            "example": "lead-123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "responses": {
          "204": {
            "description": "Lead deletado com sucesso"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Acesso negado"
          },
          "404": {
            "description": "Lead n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/start": {
      "post": {
        "summary": "Iniciar processamento de leads",
        "description": "Inicia um job de processamento de leads com configura√ß√µes espec√≠ficas",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "batchSize": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 1000,
                    "default": 100,
                    "description": "Tamanho do lote de processamento"
                  },
                  "maxConcurrency": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 10,
                    "default": 3,
                    "description": "M√°ximo de processamentos simult√¢neos"
                  },
                  "filters": {
                    "type": "object",
                    "description": "Filtros para sele√ß√£o de leads"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Processamento iniciado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "jobId": {
                          "type": "string",
                          "description": "ID do job de processamento"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Processamento iniciado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Configura√ß√£o inv√°lida"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/status/{empresaId}": {
      "get": {
        "summary": "Obter status do processamento",
        "description": "Retorna o status atual do processamento de leads de uma empresa",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "empresaId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da empresa"
          }
        ],
        "responses": {
          "200": {
            "description": "Status obtido com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "isRunning": {
                          "type": "boolean",
                          "description": "Se h√° processamento ativo"
                        },
                        "totalLeads": {
                          "type": "number",
                          "description": "Total de leads"
                        },
                        "processedLeads": {
                          "type": "number",
                          "description": "Leads processados"
                        },
                        "pendingLeads": {
                          "type": "number",
                          "description": "Leads pendentes"
                        },
                        "errorLeads": {
                          "type": "number",
                          "description": "Leads com erro"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Status obtido com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Empresa n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/report/{empresaId}": {
      "get": {
        "summary": "Obter relat√≥rio detalhado de processamento",
        "description": "Retorna relat√≥rio detalhado do processamento de leads em um per√≠odo espec√≠fico",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "empresaId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da empresa"
          },
          {
            "in": "query",
            "name": "periodoEmDias",
            "schema": {
              "type": "number",
              "minimum": 1,
              "maximum": 365,
              "default": 30
            },
            "description": "Per√≠odo em dias para o relat√≥rio"
          }
        ],
        "responses": {
          "200": {
            "description": "Relat√≥rio gerado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "periodo": {
                          "type": "object",
                          "properties": {
                            "inicio": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "fim": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        },
                        "estatisticas": {
                          "type": "object",
                          "properties": {
                            "totalProcessados": {
                              "type": "number"
                            },
                            "sucessos": {
                              "type": "number"
                            },
                            "erros": {
                              "type": "number"
                            },
                            "tempoMedioProcessamento": {
                              "type": "number"
                            }
                          }
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Relat√≥rio gerado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Empresa n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/stuck/{empresaId}": {
      "get": {
        "summary": "Obter leads travados",
        "description": "Retorna leads que est√£o travados no processamento h√° mais tempo que o especificado",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "empresaId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da empresa"
          },
          {
            "in": "query",
            "name": "minutosMinimos",
            "schema": {
              "type": "number",
              "minimum": 5,
              "maximum": 1440,
              "default": 30
            },
            "description": "Tempo m√≠nimo em minutos para considerar um lead travado"
          }
        ],
        "responses": {
          "200": {
            "description": "Leads travados obtidos com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "nome": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "tempoTravado": {
                            "type": "number",
                            "description": "Tempo travado em minutos"
                          },
                          "ultimaAtualizacao": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Empresa n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/leads/processing/reset-stuck": {
      "post": {
        "summary": "Resetar leads travados (Admin)",
        "description": "Reseta o status de leads que est√£o travados no processamento.\n**Apenas administradores podem executar esta opera√ß√£o.**\n",
        "tags": [
          "Lead Processing"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "minutosMinimos"
                ],
                "properties": {
                  "minutosMinimos": {
                    "type": "number",
                    "minimum": 5,
                    "maximum": 1440,
                    "description": "Tempo m√≠nimo em minutos para considerar um lead travado",
                    "example": 30
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Leads resetados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "leadsResetados": {
                          "type": "number",
                          "description": "N√∫mero de leads resetados"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Leads resetados com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Acesso negado - apenas administradores"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/mcp/disparo-rapido/tools": {
      "get": {
        "summary": "Lista ferramentas MCP dispon√≠veis para Disparo R√°pido",
        "tags": [
          "MCP - Disparo R√°pido"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de ferramentas MCP retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tools": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          },
                          "inputSchema": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - token JWT inv√°lido"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este cliente"
          }
        }
      }
    },
    "/mcp/disparo-rapido/call-tool": {
      "post": {
        "summary": "Executa uma ferramenta MCP do Disparo R√°pido",
        "tags": [
          "MCP - Disparo R√°pido"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Nome da ferramenta a executar"
                  },
                  "arguments": {
                    "type": "object",
                    "description": "Argumentos da ferramenta"
                  }
                },
                "required": [
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ferramenta executada com sucesso"
          },
          "400": {
            "description": "Ferramenta n√£o encontrada ou argumentos inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este cliente"
          }
        }
      }
    },
    "/mcp/disparo-rapido/health": {
      "get": {
        "summary": "Verifica sa√∫de do endpoint MCP Disparo R√°pido",
        "tags": [
          "MCP - Disparo R√°pido"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Endpoint MCP operacional"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este cliente"
          }
        }
      }
    },
    "/mcp/lean-quality/tools": {
      "get": {
        "summary": "Lista ferramentas MCP dispon√≠veis para Lean Quality",
        "tags": [
          "MCP - Lean Quality"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de ferramentas MCP retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tools": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          },
                          "inputSchema": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - token JWT inv√°lido"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este cliente"
          }
        }
      }
    },
    "/mcp/lean-quality/call-tool": {
      "post": {
        "summary": "Executa uma ferramenta MCP do Lean Quality",
        "tags": [
          "MCP - Lean Quality"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Nome da ferramenta a executar"
                  },
                  "arguments": {
                    "type": "object",
                    "description": "Argumentos da ferramenta"
                  }
                },
                "required": [
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ferramenta executada com sucesso"
          },
          "400": {
            "description": "Ferramenta n√£o encontrada ou argumentos inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este cliente"
          }
        }
      }
    },
    "/mcp/lean-quality/health": {
      "get": {
        "summary": "Verifica sa√∫de do endpoint MCP Lean Quality",
        "tags": [
          "MCP - Lean Quality"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Endpoint MCP operacional"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este cliente"
          }
        }
      }
    },
    "/mcp/ph3a/health": {
      "get": {
        "summary": "Health check do servi√ßo MCP PH3A",
        "tags": [
          "MCP - PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Servi√ßo operacional",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "service": {
                      "type": "string",
                      "example": "ph3a-mcp"
                    },
                    "version": {
                      "type": "string",
                      "example": "1.0.0"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este client_type"
          }
        }
      }
    },
    "/mcp/ph3a/tools": {
      "get": {
        "summary": "Lista todas as ferramentas MCP dispon√≠veis",
        "tags": [
          "MCP - PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de ferramentas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "tools": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string",
                            "example": "query_empresas"
                          },
                          "description": {
                            "type": "string"
                          },
                          "inputSchema": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel"
          }
        }
      }
    },
    "/mcp/ph3a/tools/query_empresas": {
      "post": {
        "summary": "Query empresas (PJ) no banco PH3A",
        "tags": [
          "MCP - PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Ver QueryPJTool.inputSchema para campos exatos"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Query executada com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/mcp/ph3a/tools/query_pessoas": {
      "post": {
        "summary": "Query pessoas f√≠sicas (PF) no banco PH3A",
        "tags": [
          "MCP - PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Ver QueryPFTool.inputSchema para campos exatos"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Query executada com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/mcp/ph3a/tools/enrich_lead": {
      "post": {
        "summary": "Enriquecimento de lead com dados externos",
        "tags": [
          "MCP - PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Ver EnrichLeadTool.inputSchema para campos exatos"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead enriquecido com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/mcp/ph3a/tools/stream_dados": {
      "post": {
        "summary": "Streaming de dados em tempo real",
        "tags": [
          "MCP - PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Ver StreamDataTool.inputSchema para campos exatos"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Stream iniciado com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/mcp/ph3a/tools/dashboard_stats": {
      "post": {
        "summary": "Estat√≠sticas do dashboard PH3A",
        "tags": [
          "MCP - PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Ver DashboardStatsTool.inputSchema para campos exatos"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Estat√≠sticas retornadas com sucesso"
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/mcp/ph3a/agent/chat": {
      "post": {
        "summary": "Chat com o agente de insights PH3A (conversas persistentes)",
        "description": "Endpoint para interagir com o agente PH3A (Problem-Hypothesis-Analysis-Action) atrav√©s de conversa√ß√£o em linguagem natural.\n\n**Funcionalidades:**\n- ‚úÖ Conversas persistentes - mensagens s√£o salvas no banco de dados\n- ‚úÖ Continuidade de contexto - use o conversationId retornado para continuar conversas\n- ‚úÖ An√°lise inteligente de leads e empresas com filtros din√¢micos\n- ‚úÖ Insights autom√°ticos baseados em padr√µes de dados\n- ‚úÖ Integra√ß√£o com dashboard - pode receber e modificar filtros\n- ‚úÖ Rastreamento de tool calls (SQL queries, an√°lises, etc)\n\n**Casos de Uso:**\n1. An√°lise explorat√≥ria de leads (\"Mostre empresas de tecnologia em SP\")\n2. Identifica√ß√£o de padr√µes (\"Quais segmentos t√™m maior taxa de convers√£o?\")\n3. Recomenda√ß√µes estrat√©gicas (\"Quais leads devo priorizar?\")\n4. Refinamento de filtros (\"Adicione filtro de faturamento > 1M\")\n5. An√°lise comparativa (\"Compare performance por regi√£o\")\n\n**Fluxo de Conversa√ß√£o:**\n1. Primeira mensagem: N√£o enviar conversationId (novo thread ser√° criado)\n2. Mensagens seguintes: Enviar conversationId retornado para manter contexto\n3. Resposta sempre inclui: mensagem do agente + insights + filtros atualizados + tool calls\n",
        "tags": [
          "MCP - PH3A Agent"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "message"
                ],
                "properties": {
                  "message": {
                    "type": "string",
                    "description": "Mensagem do usu√°rio em linguagem natural",
                    "minLength": 1,
                    "maxLength": 4000,
                    "example": "Mostre empresas de tecnologia em S√£o Paulo com faturamento acima de 1 milh√£o"
                  },
                  "conversationId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID da conversa para continuidade de contexto.\n- Omitir na primeira mensagem (novo thread ser√° criado)\n- Usar o ID retornado em conversas subsequentes\n",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "filters": {
                    "type": "object",
                    "description": "Filtros atuais do dashboard que o agente pode modificar.\nEstrutura flex√≠vel baseada nas entidades dispon√≠veis.\n",
                    "example": {
                      "segmento": "Tecnologia",
                      "cidade": "S√£o Paulo",
                      "faturamentoMin": 1000000
                    }
                  },
                  "dashboardData": {
                    "type": "object",
                    "description": "Dados do dashboard para contexto adicional (ex: totais, KPIs).\nPermite ao agente fazer an√°lises mais precisas.\n",
                    "example": {
                      "totalLeads": 1250,
                      "taxaConversao": 0.15,
                      "valorMedioContrato": 45000
                    }
                  }
                }
              },
              "examples": {
                "nova_conversa": {
                  "summary": "Nova conversa - An√°lise explorat√≥ria",
                  "value": {
                    "message": "Mostre empresas de tecnologia em S√£o Paulo com mais de 50 funcion√°rios"
                  }
                },
                "continuar_conversa": {
                  "summary": "Continuar conversa - Refinamento de filtros",
                  "value": {
                    "message": "Agora adicione filtro de faturamento acima de 5 milh√µes",
                    "conversationId": "550e8400-e29b-41d4-a716-446655440000",
                    "filters": {
                      "segmento": "Tecnologia",
                      "cidade": "S√£o Paulo",
                      "funcionariosMin": 50
                    }
                  }
                },
                "analise_padroes": {
                  "summary": "Identifica√ß√£o de padr√µes",
                  "value": {
                    "message": "Quais segmentos t√™m a maior taxa de convers√£o nos √∫ltimos 30 dias?",
                    "dashboardData": {
                      "totalLeads": 3450,
                      "periodo": "ultimos_30_dias"
                    }
                  }
                },
                "recomendacao": {
                  "summary": "Recomenda√ß√£o estrat√©gica",
                  "value": {
                    "message": "Baseado nos dados, quais leads devo priorizar esta semana?",
                    "conversationId": "550e8400-e29b-41d4-a716-446655440000",
                    "dashboardData": {
                      "leadsAtivos": 125,
                      "capacidadeTime": 50
                    }
                  }
                },
                "comparacao": {
                  "summary": "An√°lise comparativa",
                  "value": {
                    "message": "Compare a performance de leads de S√£o Paulo vs Rio de Janeiro no √∫ltimo trimestre",
                    "filters": {
                      "periodo": "ultimo_trimestre"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resposta bem-sucedida do agente PH3A",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "success",
                    "message",
                    "conversationId"
                  ],
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "description": "Resposta do agente em linguagem natural",
                      "example": "Encontrei 47 empresas de tecnologia em S√£o Paulo com mais de 50 funcion√°rios. Dessas, 23 t√™m faturamento acima de 5 milh√µes. Os principais segmentos s√£o: SaaS (15), E-commerce (8) e Fintech (7). Recomendo priorizar as empresas de SaaS, pois apresentam taxa de convers√£o 35% maior."
                    },
                    "conversationId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "ID do thread de conversa (persistente).\nUse este ID em mensagens subsequentes para manter o contexto.\n",
                      "example": "550e8400-e29b-41d4-a716-446655440000"
                    },
                    "filters": {
                      "type": "object",
                      "description": "Filtros atualizados pelo agente baseado na conversa.\nPode incluir novos filtros ou modificar existentes.\n",
                      "example": {
                        "segmento": "Tecnologia",
                        "cidade": "S√£o Paulo",
                        "funcionariosMin": 50,
                        "faturamentoMin": 5000000,
                        "subSegmentos": [
                          "SaaS",
                          "E-commerce",
                          "Fintech"
                        ]
                      }
                    },
                    "insights": {
                      "type": "array",
                      "description": "Lista de insights gerados pelo agente durante a an√°lise.\nCada insight representa um padr√£o ou recomenda√ß√£o identificada.\n",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "example": "pattern"
                          },
                          "title": {
                            "type": "string",
                            "example": "SaaS tem maior taxa de convers√£o"
                          },
                          "description": {
                            "type": "string",
                            "example": "Empresas de SaaS apresentam taxa de convers√£o 35% maior que outros segmentos"
                          },
                          "metric": {
                            "type": "object",
                            "example": {
                              "value": 0.35,
                              "unit": "percentage"
                            }
                          }
                        }
                      },
                      "example": [
                        {
                          "type": "pattern",
                          "title": "SaaS tem maior taxa de convers√£o",
                          "description": "Empresas de SaaS apresentam taxa de convers√£o 35% maior",
                          "metric": {
                            "value": 0.35,
                            "unit": "percentage"
                          }
                        },
                        {
                          "type": "recommendation",
                          "title": "Priorizar empresas com 100-500 funcion√°rios",
                          "description": "Faixa com melhor ROI e ciclo de venda mais curto",
                          "priority": "high"
                        }
                      ]
                    },
                    "toolCalls": {
                      "type": "array",
                      "description": "Lista de ferramentas executadas pelo agente durante o processamento.\n√ötil para debugging e auditoria de queries executadas.\n",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string",
                            "example": "query_database"
                          },
                          "args": {
                            "type": "object",
                            "example": {
                              "query": "SELECT * FROM empresas WHERE segmento = 'Tecnologia'"
                            }
                          },
                          "result": {
                            "type": "object",
                            "example": {
                              "rowCount": 47
                            }
                          }
                        }
                      },
                      "example": [
                        {
                          "name": "query_database",
                          "args": {
                            "query": "SELECT segmento, COUNT(*) as total FROM empresas WHERE cidade = 'S√£o Paulo' GROUP BY segmento"
                          },
                          "result": {
                            "rowCount": 47
                          }
                        },
                        {
                          "name": "calculate_metrics",
                          "args": {
                            "metric": "conversion_rate",
                            "segment": "SaaS"
                          },
                          "result": {
                            "value": 0.35
                          }
                        }
                      ]
                    }
                  }
                },
                "examples": {
                  "analise_exploratoria": {
                    "summary": "Resposta de an√°lise explorat√≥ria",
                    "value": {
                      "success": true,
                      "message": "Encontrei 47 empresas de tecnologia em S√£o Paulo com mais de 50 funcion√°rios. Dessas, 23 t√™m faturamento acima de 5 milh√µes. Os principais segmentos s√£o: SaaS (15), E-commerce (8) e Fintech (7). Recomendo priorizar as empresas de SaaS, pois apresentam taxa de convers√£o 35% maior.",
                      "conversationId": "550e8400-e29b-41d4-a716-446655440000",
                      "filters": {
                        "segmento": "Tecnologia",
                        "cidade": "S√£o Paulo",
                        "funcionariosMin": 50,
                        "faturamentoMin": 5000000
                      },
                      "insights": [
                        {
                          "type": "pattern",
                          "title": "SaaS tem maior taxa de convers√£o",
                          "description": "Empresas de SaaS apresentam taxa de convers√£o 35% maior",
                          "metric": {
                            "value": 0.35,
                            "unit": "percentage"
                          }
                        }
                      ],
                      "toolCalls": [
                        {
                          "name": "query_database",
                          "args": {
                            "query": "SELECT * FROM empresas WHERE segmento = 'Tecnologia' AND cidade = 'S√£o Paulo'"
                          },
                          "result": {
                            "rowCount": 47
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Requisi√ß√£o inv√°lida - dados malformados ou faltando campos obrigat√≥rios",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                },
                "examples": {
                  "mensagem_vazia": {
                    "summary": "Mensagem vazia",
                    "value": {
                      "success": false,
                      "error": [
                        {
                          "code": "invalid_type",
                          "expected": "string",
                          "received": "undefined",
                          "path": [
                            "message"
                          ],
                          "message": "Required"
                        }
                      ]
                    }
                  },
                  "mensagem_muito_longa": {
                    "summary": "Mensagem excede limite de caracteres",
                    "value": {
                      "success": false,
                      "error": [
                        {
                          "code": "too_big",
                          "maximum": 4000,
                          "type": "string",
                          "path": [
                            "message"
                          ],
                          "message": "String must contain at most 4000 character(s)"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - token JWT inv√°lido ou expirado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Token inv√°lido ou expirado"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel - Agente PH3A n√£o configurado para esta empresa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "PH3A Agent n√£o est√° dispon√≠vel para sua empresa. Entre em contato com o suporte."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string"
                    }
                  }
                },
                "examples": {
                  "erro_agente": {
                    "summary": "Erro durante processamento do agente",
                    "value": {
                      "success": false,
                      "error": "Falha ao processar mensagem com o agente PH3A"
                    }
                  },
                  "erro_database": {
                    "summary": "Erro ao salvar conversa",
                    "value": {
                      "success": false,
                      "error": "Falha ao salvar mensagem na conversa"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/mcp/vendas-ia/tools": {
      "get": {
        "summary": "Lista ferramentas MCP exclusivas para Vendas IA (platform admin)",
        "tags": [
          "MCP - Vendas IA"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de ferramentas MCP administrativas retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tools": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "description": {
                            "type": "string"
                          },
                          "inputSchema": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - token JWT inv√°lido"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este cliente"
          }
        }
      }
    },
    "/mcp/vendas-ia/call-tool": {
      "post": {
        "summary": "Executa uma ferramenta administrativa MCP do Vendas IA",
        "tags": [
          "MCP - Vendas IA"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Nome da ferramenta a executar"
                  },
                  "arguments": {
                    "type": "object",
                    "description": "Argumentos da ferramenta"
                  }
                },
                "required": [
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ferramenta executada com sucesso"
          },
          "400": {
            "description": "Ferramenta n√£o encontrada ou argumentos inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este cliente"
          }
        }
      }
    },
    "/mcp/vendas-ia/health": {
      "get": {
        "summary": "Verifica sa√∫de do endpoint MCP Vendas IA",
        "tags": [
          "MCP - Vendas IA"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Endpoint MCP operacional"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Feature n√£o dispon√≠vel para este cliente"
          }
        }
      }
    },
    "/campaigns/{id}/messages": {
      "post": {
        "summary": "Registrar nova mensagem enviada",
        "tags": [
          "Message Status"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contact_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID do contato que recebeu a mensagem"
                  },
                  "message_content": {
                    "type": "string",
                    "description": "Conte√∫do da mensagem enviada"
                  },
                  "external_message_id": {
                    "type": "string",
                    "description": "ID da mensagem na plataforma externa (WhatsApp, etc.)"
                  },
                  "platform": {
                    "type": "string",
                    "enum": [
                      "whatsapp",
                      "telegram",
                      "sms"
                    ],
                    "description": "Plataforma de envio"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "queued",
                      "sent",
                      "delivered",
                      "failed",
                      "bounce"
                    ],
                    "default": "sent",
                    "description": "Status inicial da mensagem"
                  }
                },
                "required": [
                  "contact_id",
                  "message_content",
                  "platform"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mensagem registrada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/MessageStatus"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha n√£o encontrada"
          }
        }
      }
    },
    "/campaigns/{id}/messages/{message_id}/status": {
      "put": {
        "summary": "Atualizar status de uma mensagem",
        "tags": [
          "Message Status"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID da campanha",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "message_id",
            "required": true,
            "description": "ID da mensagem",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "pending",
                      "queued",
                      "sent",
                      "delivered",
                      "failed",
                      "bounce"
                    ],
                    "description": "Novo status da mensagem"
                  },
                  "error_message": {
                    "type": "string",
                    "description": "Mensagem de erro (obrigat√≥ria se status for 'failed' ou 'bounce')"
                  },
                  "delivered_at": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Timestamp de entrega (obrigat√≥rio se status for 'delivered')"
                  },
                  "retry_count": {
                    "type": "integer",
                    "description": "N√∫mero de tentativas de reenvio"
                  }
                },
                "required": [
                  "status"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/MessageStatus"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Campanha ou mensagem n√£o encontrada"
          }
        }
      }
    },
    "/negative-media/analysis-prompts": {
      "post": {
        "summary": "Create analysis prompt",
        "tags": [
          "Negative Media - Analysis Prompts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "promptTemplate",
                  "targetType",
                  "aiModel"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Prompt created"
          },
          "400": {
            "description": "Validation error"
          }
        }
      },
      "get": {
        "summary": "List analysis prompts",
        "tags": [
          "Negative Media - Analysis Prompts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "is_active",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "ai_model",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Prompts list"
          }
        }
      }
    },
    "/negative-media/analysis-prompts/{id}": {
      "get": {
        "summary": "Get analysis prompt by ID",
        "tags": [
          "Negative Media - Analysis Prompts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Prompt found"
          },
          "404": {
            "description": "Prompt not found"
          }
        }
      },
      "put": {
        "summary": "Update analysis prompt",
        "tags": [
          "Negative Media - Analysis Prompts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Prompt updated"
          },
          "404": {
            "description": "Prompt not found"
          }
        }
      },
      "delete": {
        "summary": "Delete analysis prompt",
        "tags": [
          "Negative Media - Analysis Prompts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Prompt deleted"
          },
          "404": {
            "description": "Prompt not found"
          }
        }
      }
    },
    "/negative-media/categories": {
      "post": {
        "summary": "Create category",
        "tags": [
          "Negative Media - Categories"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "slug",
                  "defaultImpact",
                  "severityWeight"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Category created"
          },
          "400": {
            "description": "Validation error"
          }
        }
      },
      "get": {
        "summary": "List categories",
        "tags": [
          "Negative Media - Categories"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "is_active",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "parent_category_id",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Categories list"
          }
        }
      }
    },
    "/negative-media/categories/{id}": {
      "get": {
        "summary": "Get category by ID",
        "tags": [
          "Negative Media - Categories"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Category found"
          },
          "404": {
            "description": "Category not found"
          }
        }
      },
      "put": {
        "summary": "Update category",
        "tags": [
          "Negative Media - Categories"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Category updated"
          },
          "404": {
            "description": "Category not found"
          }
        }
      },
      "delete": {
        "summary": "Delete category",
        "tags": [
          "Negative Media - Categories"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Category deleted"
          },
          "404": {
            "description": "Category not found"
          }
        }
      }
    },
    "/negative-media/investigations": {
      "post": {
        "summary": "Create a new negative media investigation",
        "tags": [
          "Negative Media - Investigations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "ph3aDossierId",
                  "searchTemplateId"
                ],
                "properties": {
                  "ph3aDossierId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "searchTemplateId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "analysisPromptId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "options": {
                    "type": "object",
                    "properties": {
                      "maxSources": {
                        "type": "number"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Investigation created and queued for processing"
          },
          "400": {
            "description": "Invalid request data"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "get": {
        "summary": "List investigations with filters",
        "tags": [
          "Negative Media - Investigations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "ph3aDossierId",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "number"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of investigations"
          }
        }
      }
    },
    "/negative-media/investigations/{id}": {
      "get": {
        "summary": "Get investigation details",
        "tags": [
          "Negative Media - Investigations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Investigation found"
          },
          "404": {
            "description": "Investigation not found"
          }
        }
      },
      "delete": {
        "summary": "Cancel/delete an investigation",
        "tags": [
          "Negative Media - Investigations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Investigation cancelled"
          },
          "404": {
            "description": "Investigation not found"
          }
        }
      }
    },
    "/negative-media/investigations/{id}/sources": {
      "get": {
        "summary": "List sources for an investigation",
        "tags": [
          "Negative Media - Investigations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "number"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of sources"
          }
        }
      }
    },
    "/negative-media/sources/{id}/analyses": {
      "get": {
        "summary": "List analyses for a source",
        "tags": [
          "Negative Media - Investigations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "evaluation",
            "schema": {
              "type": "string",
              "enum": [
                "positive",
                "neutral",
                "suspect",
                "negative"
              ]
            }
          },
          {
            "in": "query",
            "name": "analysisStatus",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "completed",
                "failed"
              ]
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "number"
            }
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of analyses"
          }
        }
      }
    },
    "/negative-media/sources/{id}/reanalyze": {
      "post": {
        "summary": "Re-analyze a source with a new or updated analysis prompt",
        "tags": [
          "Negative Media - Investigations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "analysisPromptId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Optional - uses default active prompt if not provided"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Re-analysis queued successfully"
          },
          "400": {
            "description": "Invalid request"
          },
          "404": {
            "description": "Source not found"
          }
        }
      }
    },
    "/negative-media/sources/{id}": {
      "get": {
        "summary": "Get source details",
        "tags": [
          "Negative Media - Investigations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Source found"
          },
          "404": {
            "description": "Source not found"
          }
        }
      }
    },
    "/admin/negative-media/summary/{ph3aDossierId}": {
      "get": {
        "summary": "Get investigation summary for PH3A dossier (Admin only)",
        "tags": [
          "Admin - Negative Media"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "ph3aDossierId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "includeDeleted",
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "Include soft-deleted investigations"
          }
        ],
        "responses": {
          "200": {
            "description": "Investigation summary retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Dossier not found"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/admin/negative-media/usage-stats": {
      "get": {
        "summary": "Get API usage statistics (Admin only)",
        "tags": [
          "Admin - Negative Media"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "empresaId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "month",
            "schema": {
              "type": "string",
              "pattern": "^\\d{4}-\\d{2}$"
            },
            "description": "Month in YYYY-MM format"
          }
        ],
        "responses": {
          "200": {
            "description": "Usage statistics retrieved"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/admin/negative-media/dlq-stats": {
      "get": {
        "summary": "Get Dead Letter Queue statistics (Admin only)",
        "tags": [
          "Admin - Negative Media"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "DLQ statistics retrieved"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/admin/negative-media/dlq/{queue}/retry/{messageId}": {
      "post": {
        "summary": "Retry a failed message from DLQ (Admin only)",
        "tags": [
          "Admin - Negative Media"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "queue",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "negative-media.investigations.dlq",
                "negative-media.scraping.dlq",
                "negative-media.analysis.dlq"
              ]
            }
          },
          {
            "in": "path",
            "name": "messageId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Message retry initiated"
          },
          "400": {
            "description": "Invalid queue name"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Message not found"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/negative-media/search-templates": {
      "post": {
        "summary": "Create search template",
        "tags": [
          "Negative Media - Search Templates"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "baseQuery",
                  "orTerms",
                  "targetType"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "baseQuery": {
                    "type": "string"
                  },
                  "orTerms": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "targetType": {
                    "type": "string",
                    "enum": [
                      "pessoa_fisica",
                      "pessoa_juridica",
                      "pep"
                    ]
                  },
                  "isActive": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Template created"
          },
          "400": {
            "description": "Validation error"
          }
        }
      },
      "get": {
        "summary": "List search templates",
        "tags": [
          "Negative Media - Search Templates"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "is_active",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "target_type",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Templates list"
          }
        }
      }
    },
    "/negative-media/search-templates/{id}": {
      "get": {
        "summary": "Get search template by ID",
        "tags": [
          "Negative Media - Search Templates"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Template found"
          },
          "404": {
            "description": "Template not found"
          }
        }
      },
      "put": {
        "summary": "Update search template",
        "tags": [
          "Negative Media - Search Templates"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Template updated"
          },
          "404": {
            "description": "Template not found"
          }
        }
      },
      "delete": {
        "summary": "Delete search template",
        "tags": [
          "Negative Media - Search Templates"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Template deleted"
          },
          "404": {
            "description": "Template not found"
          }
        }
      }
    },
    "/opportunities": {
      "post": {
        "summary": "Criar nova oportunidade",
        "tags": [
          "Opportunities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nome",
                  "valor_estimado",
                  "probabilidade",
                  "estagio",
                  "expected_close_date"
                ],
                "properties": {
                  "lead_id": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true,
                    "description": "Lead que originou oportunidade (NULL se origem manual)"
                  },
                  "nome": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255,
                    "example": "Venda Software ABC - Empresa XYZ"
                  },
                  "descricao": {
                    "type": "string",
                    "nullable": true,
                    "example": "Oportunidade de venda do pacote premium para cliente enterprise"
                  },
                  "valor_estimado": {
                    "type": "number",
                    "format": "decimal",
                    "minimum": 0,
                    "example": 50000,
                    "description": "Valor estimado da venda em reais"
                  },
                  "probabilidade": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 100,
                    "example": 75,
                    "description": "Probabilidade de fechamento (0-100%)"
                  },
                  "estagio": {
                    "type": "string",
                    "maxLength": 100,
                    "example": "Proposta Enviada",
                    "description": "Est√°gio customiz√°vel da oportunidade"
                  },
                  "expected_close_date": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-03-15T00:00:00Z",
                    "description": "Data esperada de fechamento (deve ser no futuro)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Oportunidade criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "empresa_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "lead_id": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true
                        },
                        "nome": {
                          "type": "string"
                        },
                        "descricao": {
                          "type": "string",
                          "nullable": true
                        },
                        "valor_estimado": {
                          "type": "number"
                        },
                        "probabilidade": {
                          "type": "integer"
                        },
                        "estagio": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "ABERTA",
                            "EM_PROGRESSO",
                            "GANHA",
                            "PERDIDA",
                            "ARQUIVADA"
                          ]
                        },
                        "expected_close_date": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "actual_close_date": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true
                        },
                        "lost_reason": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updated_at": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar oportunidades com pagina√ß√£o cursor-based",
        "tags": [
          "Opportunities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          },
          {
            "name": "cursor",
            "in": "query",
            "description": "Cursor para pagina√ß√£o (base64 encoded)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Filtrar por status",
            "schema": {
              "type": "string",
              "enum": [
                "ABERTA",
                "EM_PROGRESSO",
                "GANHA",
                "PERDIDA",
                "ARQUIVADA"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de oportunidades",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "empresa_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "lead_id": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                          },
                          "nome": {
                            "type": "string"
                          },
                          "descricao": {
                            "type": "string",
                            "nullable": true
                          },
                          "valor_estimado": {
                            "type": "number"
                          },
                          "probabilidade": {
                            "type": "integer"
                          },
                          "estagio": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "expected_close_date": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "actual_close_date": {
                            "type": "string",
                            "format": "date-time",
                            "nullable": true
                          },
                          "lost_reason": {
                            "type": "string",
                            "nullable": true
                          },
                          "created_at": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updated_at": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "cursor": {
                          "type": "string",
                          "nullable": true,
                          "description": "Cursor para pr√≥xima p√°gina (NULL se √∫ltima p√°gina)"
                        },
                        "hasMore": {
                          "type": "boolean",
                          "description": "Se h√° mais resultados"
                        },
                        "count": {
                          "type": "integer",
                          "description": "Quantidade de itens retornados nesta p√°gina"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/opportunities/{id}": {
      "get": {
        "summary": "Buscar oportunidade por ID",
        "tags": [
          "Opportunities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Oportunidade encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "empresa_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "lead_id": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true
                        },
                        "nome": {
                          "type": "string"
                        },
                        "descricao": {
                          "type": "string",
                          "nullable": true
                        },
                        "valor_estimado": {
                          "type": "number"
                        },
                        "probabilidade": {
                          "type": "integer"
                        },
                        "estagio": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string"
                        },
                        "expected_close_date": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "actual_close_date": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true
                        },
                        "lost_reason": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updated_at": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Oportunidade n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "patch": {
        "summary": "Atualizar oportunidade",
        "tags": [
          "Opportunities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nome": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255
                  },
                  "descricao": {
                    "type": "string",
                    "nullable": true
                  },
                  "valor_estimado": {
                    "type": "number",
                    "format": "decimal",
                    "minimum": 0
                  },
                  "probabilidade": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 100
                  },
                  "estagio": {
                    "type": "string",
                    "maxLength": 100
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ABERTA",
                      "EM_PROGRESSO",
                      "ARQUIVADA"
                    ],
                    "description": "Status (GANHA/PERDIDA usam endpoints espec√≠ficos)"
                  },
                  "expected_close_date": {
                    "type": "string",
                    "format": "date-time"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Oportunidade atualizada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "empresa_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "lead_id": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true
                        },
                        "nome": {
                          "type": "string"
                        },
                        "descricao": {
                          "type": "string",
                          "nullable": true
                        },
                        "valor_estimado": {
                          "type": "number"
                        },
                        "probabilidade": {
                          "type": "integer"
                        },
                        "estagio": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string"
                        },
                        "expected_close_date": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "actual_close_date": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true
                        },
                        "lost_reason": {
                          "type": "string",
                          "nullable": true
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "updated_at": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Oportunidade n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/opportunities/{id}/win": {
      "post": {
        "summary": "Marcar oportunidade como ganha e criar cliente",
        "tags": [
          "Opportunities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "customer_nome",
                  "contract_value",
                  "contract_start_date",
                  "contract_renewal_date"
                ],
                "properties": {
                  "customer_nome": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 255,
                    "example": "Empresa ABC Ltda"
                  },
                  "customer_email": {
                    "type": "string",
                    "format": "email",
                    "nullable": true,
                    "example": "contato@empresaabc.com"
                  },
                  "customer_telefone": {
                    "type": "string",
                    "nullable": true,
                    "example": "+5511987654321"
                  },
                  "customer_cnpj": {
                    "type": "string",
                    "pattern": "^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$",
                    "nullable": true,
                    "example": "12.345.678/0001-90"
                  },
                  "categoria": {
                    "type": "string",
                    "enum": [
                      "OURO",
                      "PRATA",
                      "BRONZE",
                      "STANDARD"
                    ],
                    "default": "STANDARD"
                  },
                  "contract_value": {
                    "type": "number",
                    "format": "decimal",
                    "minimum": 0.01,
                    "example": 10000
                  },
                  "contract_start_date": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-01-15T00:00:00Z"
                  },
                  "contract_renewal_date": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2026-01-15T00:00:00Z"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Oportunidade marcada como ganha e cliente criado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "opportunity": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "empresa_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "lead_id": {
                              "type": "string",
                              "format": "uuid",
                              "nullable": true
                            },
                            "nome": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string",
                              "example": "GANHA"
                            },
                            "actual_close_date": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        },
                        "customer": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "empresa_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "opportunity_id": {
                              "type": "string",
                              "format": "uuid"
                            },
                            "lead_id": {
                              "type": "string",
                              "format": "uuid",
                              "nullable": true
                            },
                            "nome": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string",
                              "nullable": true
                            },
                            "telefone": {
                              "type": "string",
                              "nullable": true
                            },
                            "cnpj": {
                              "type": "string",
                              "nullable": true
                            },
                            "categoria": {
                              "type": "string"
                            },
                            "contract_value": {
                              "type": "number"
                            },
                            "contract_start_date": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "contract_renewal_date": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "status": {
                              "type": "string",
                              "example": "ATIVO"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Oportunidade j√° est√° ganha ou dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Oportunidade n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/opportunities/{id}/lose": {
      "post": {
        "summary": "Marcar oportunidade como perdida",
        "tags": [
          "Opportunities"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "lost_reason"
                ],
                "properties": {
                  "lost_reason": {
                    "type": "string",
                    "minLength": 1,
                    "example": "Cliente escolheu concorrente por pre√ßo"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Oportunidade marcada como perdida",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "empresa_id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "lead_id": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true
                        },
                        "nome": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "example": "PERDIDA"
                        },
                        "lost_reason": {
                          "type": "string"
                        },
                        "actual_close_date": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou lost_reason n√£o informado"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Oportunidade n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/payments/history": {
      "get": {
        "summary": "List Payment History",
        "description": "Retrieves a paginated list of payments for the authenticated user/empresa.",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            },
            "description": "Number of items to return."
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "integer",
              "default": 0
            },
            "description": "Offset for pagination."
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "PENDING",
                "RECEIVED",
                "CONFIRMED",
                "OVERDUE",
                "REFUNDED",
                "CANCELLED"
              ]
            },
            "description": "Filter by payment status."
          },
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Filter by start date (ISO 8601)."
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Filter by end date (ISO 8601)."
          }
        ],
        "responses": {
          "200": {
            "description": "A list of payments.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized."
          }
        }
      }
    },
    "/payments/{paymentId}": {
      "get": {
        "summary": "Get Payment Details",
        "description": "Retrieves the full details of a specific payment.",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "paymentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the payment to retrieve."
          }
        ],
        "responses": {
          "200": {
            "description": "The full details of the payment.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Payment"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized."
          },
          "404": {
            "description": "Payment not found."
          }
        }
      }
    },
    "/payments/credits/transactions": {
      "get": {
        "summary": "List Credit Transactions (Cursor Pagination)",
        "description": "Retrieves a cursor-paginated list of credit transactions for the authenticated empresa. Uses secure cursor-based pagination with tenant isolation and filter consistency validation.",
        "tags": [
          "Credits"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 100
            },
            "description": "Number of items to return per page (max 100)."
          },
          {
            "in": "query",
            "name": "cursor",
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from previous response (nextCursor). If omitted, starts from the beginning."
          },
          {
            "in": "query",
            "name": "type",
            "schema": {
              "type": "string",
              "enum": [
                "compra",
                "uso",
                "reembolso",
                "bonus"
              ]
            },
            "description": "Filter by transaction type."
          },
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter transactions created after this date (ISO 8601)."
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter transactions created before this date (ISO 8601)."
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of credit transactions with metadata.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/CreditTransaction"
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "hasMore": {
                          "type": "boolean",
                          "description": "Whether there are more pages available"
                        },
                        "nextCursor": {
                          "type": "string",
                          "nullable": true,
                          "description": "Cursor for next page (use in subsequent requests)"
                        },
                        "limit": {
                          "type": "integer",
                          "description": "Current page limit"
                        },
                        "totalReturned": {
                          "type": "integer",
                          "description": "Number of items returned in this page"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Transa√ß√µes de cr√©dito listadas com sucesso"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "trace": {
                      "type": "object",
                      "properties": {
                        "trace_id": {
                          "type": "string"
                        },
                        "span_id": {
                          "type": "string"
                        },
                        "requestId": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid cursor or filters."
          },
          "401": {
            "description": "Unauthorized."
          }
        }
      }
    },
    "/payments/summary": {
      "get": {
        "summary": "Get Financial Summary",
        "description": "Retrieves an aggregated financial summary for the authenticated user/empresa.",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "period",
            "schema": {
              "type": "string",
              "enum": [
                "last30days",
                "last90days",
                "currentMonth",
                "allTime"
              ],
              "default": "last90days"
            },
            "description": "The time period for the summary."
          }
        ],
        "responses": {
          "200": {
            "description": "The financial summary.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FinancialSummary"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized."
          }
        }
      }
    },
    "/api/v1/ph3a/enrich": {
      "post": {
        "summary": "Enriquecer lead por CPF ou CNPJ",
        "description": "Enriquece um lead com dados completos do PH3A ClickHouse.\n- **CNPJ**: Retorna 94 campos de Pessoa Jur√≠dica (raz√£o social, endere√ßo, telefones, emails, score, etc.)\n- **CPF**: Retorna 152 campos de Pessoa F√≠sica + 26 perfis comportamentais\n\n**Custo de cr√©ditos:**\n- CNPJ: 5 cr√©ditos\n- CPF: 3 cr√©ditos\n\n**Rate limit:** 100 requisi√ß√µes por minuto por empresa\n",
        "tags": [
          "PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "documentoTipo",
                  "documentoValor"
                ],
                "properties": {
                  "documentoTipo": {
                    "type": "string",
                    "enum": [
                      "cnpj",
                      "cpf"
                    ],
                    "description": "Tipo de documento a enriquecer"
                  },
                  "documentoValor": {
                    "type": "string",
                    "description": "Valor do documento (apenas n√∫meros)"
                  },
                  "forceRefresh": {
                    "type": "boolean",
                    "default": false,
                    "description": "For√ßar consulta mesmo se houver cache"
                  }
                }
              },
              "examples": {
                "cnpj": {
                  "summary": "Enriquecer por CNPJ",
                  "value": {
                    "documentoTipo": "cnpj",
                    "documentoValor": "12345678000190"
                  }
                },
                "cpf": {
                  "summary": "Enriquecer por CPF",
                  "value": {
                    "documentoTipo": "cpf",
                    "documentoValor": "12345678901"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Dados enriquecidos retornados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "description": "Objeto com todos os campos da entidade (PJ ou PF)"
                    },
                    "cacheHit": {
                      "type": "boolean",
                      "example": false
                    },
                    "costCredits": {
                      "type": "number",
                      "example": 5
                    }
                  }
                },
                "examples": {
                  "cnpjSuccess": {
                    "summary": "Sucesso - CNPJ encontrado",
                    "value": {
                      "success": true,
                      "data": {
                        "cnpj": "12345678000190",
                        "razaoSocial": "EMPRESA EXEMPLO LTDA",
                        "nomeFantasia": "Exemplo Corp",
                        "status": "Ativa",
                        "emails": [
                          "contato@exemplo.com"
                        ],
                        "telefones": [
                          "+5511999999999"
                        ],
                        "endereco": {
                          "logradouro": "Rua Exemplo",
                          "numero": "123",
                          "cidade": "S√£o Paulo",
                          "uf": "SP",
                          "cep": "01234567"
                        },
                        "score": 850,
                        "porte": "Pequena",
                        "setor": "Tecnologia"
                      },
                      "cacheHit": false,
                      "costCredits": 5
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos (formato de CNPJ/CPF incorreto)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                },
                "example": {
                  "message": "Invalid request body",
                  "errors": [
                    {
                      "path": [
                        "documentoValor"
                      ],
                      "message": "Invalid CNPJ format"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - Token inv√°lido ou ausente"
          },
          "402": {
            "description": "Cr√©ditos insuficientes para realizar a opera√ß√£o",
            "content": {
              "application/json": {
                "example": {
                  "message": "Insufficient credits"
                }
              }
            }
          },
          "404": {
            "description": "Documento n√£o encontrado no banco PH3A",
            "content": {
              "application/json": {
                "example": {
                  "message": "Document not found"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit excedido (100 req/min)"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/api/v1/ph3a/empresas/query": {
      "post": {
        "summary": "Consultar empresas com filtros combinados",
        "description": "Busca empresas (Pessoa Jur√≠dica) no banco PH3A com m√∫ltiplos filtros combinados.\n\n**Filtros dispon√≠veis:**\n- CNPJ, raz√£o social, nome fantasia\n- Email, telefone, URL, placa de ve√≠culo\n- Endere√ßo (CEP, cidade, UF, logradouro)\n- Setor, porte, status fiscal\n- Score (m√≠nimo e m√°ximo)\n\n**Custo de cr√©ditos por volume:**\n- ‚â§10 registros: 5 cr√©ditos\n- 11-50 registros: 15 cr√©ditos\n- 51-100 registros: 50 cr√©ditos\n- 101-1000 registros: 100 cr√©ditos\n\n**Pagina√ß√£o:** Usa cursor opaco com tenant binding para seguran√ßa\n",
        "tags": [
          "PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "cnpj": {
                    "type": "string",
                    "description": "CNPJ (apenas n√∫meros)"
                  },
                  "razaoSocial": {
                    "type": "string",
                    "description": "Raz√£o social (busca parcial com ILIKE)"
                  },
                  "nomeFantasia": {
                    "type": "string",
                    "description": "Nome fantasia (busca parcial)"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Email da empresa (normalizado)"
                  },
                  "telefone": {
                    "type": "string",
                    "description": "Telefone (formato E.164)"
                  },
                  "url": {
                    "type": "string",
                    "format": "uri",
                    "description": "URL/site da empresa"
                  },
                  "placaVeiculo": {
                    "type": "string",
                    "description": "Placa de ve√≠culo (formato ABC1234)"
                  },
                  "endereco": {
                    "type": "object",
                    "properties": {
                      "cep": {
                        "type": "string"
                      },
                      "cidade": {
                        "type": "string"
                      },
                      "uf": {
                        "type": "string",
                        "maxLength": 2
                      },
                      "logradouro": {
                        "type": "string"
                      }
                    }
                  },
                  "uf": {
                    "type": "string",
                    "maxLength": 2,
                    "description": "Unidade Federativa"
                  },
                  "setor": {
                    "type": "string",
                    "description": "Setor de atua√ß√£o"
                  },
                  "porte": {
                    "type": "string",
                    "enum": [
                      "MEI",
                      "Micro",
                      "Pequena",
                      "Media",
                      "Grande"
                    ]
                  },
                  "statusFiscal": {
                    "type": "string",
                    "enum": [
                      "Ativa",
                      "Suspensa",
                      "Baixada",
                      "Nula",
                      "Inapta"
                    ]
                  },
                  "scoreMin": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1000
                  },
                  "scoreMax": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1000
                  },
                  "limit": {
                    "type": "number",
                    "default": 100,
                    "minimum": 1,
                    "maximum": 1000
                  },
                  "cursor": {
                    "type": "string",
                    "description": "Cursor opaco da p√°gina anterior"
                  }
                }
              },
              "examples": {
                "simpleQuery": {
                  "summary": "Busca simples por UF",
                  "value": {
                    "uf": "SP",
                    "limit": 50
                  }
                },
                "advancedQuery": {
                  "summary": "Busca avan√ßada com m√∫ltiplos filtros",
                  "value": {
                    "uf": "SP",
                    "setor": "Tecnologia",
                    "porte": "Pequena",
                    "scoreMin": 700,
                    "statusFiscal": "Ativa",
                    "limit": 100
                  }
                },
                "paginatedQuery": {
                  "summary": "Busca com pagina√ß√£o",
                  "value": {
                    "uf": "RJ",
                    "cursor": "eyJrIjoiMTIzNDU2NzgwMDAxOTAiLCJ0IjoiZW1wcmVzYS0xMjMifQ",
                    "limit": 100
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lista de empresas encontradas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    },
                    "nextCursor": {
                      "type": "string",
                      "description": "Cursor para pr√≥xima p√°gina (se houver mais resultados)"
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "creditsCharged": {
                      "type": "number"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "cnpj": "12345678000190",
                      "razaoSocial": "TECH SOLUTIONS LTDA",
                      "nomeFantasia": "TechSol",
                      "uf": "SP",
                      "setor": "Tecnologia",
                      "porte": "Pequena",
                      "score": 850
                    },
                    {
                      "cnpj": "98765432000111",
                      "razaoSocial": "INOVACAO DIGITAL SA",
                      "nomeFantasia": "InovaDig",
                      "uf": "SP",
                      "setor": "Tecnologia",
                      "porte": "Media",
                      "score": 920
                    }
                  ],
                  "nextCursor": "eyJrIjoiOTg3NjU0MzIwMDAxMTEiLCJ0IjoiZW1wcmVzYS0xMjMifQ",
                  "totalCount": 156,
                  "creditsCharged": 15
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou filtros incorretos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "402": {
            "description": "Cr√©ditos insuficientes"
          },
          "429": {
            "description": "Rate limit excedido (100 req/min)"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/api/v1/ph3a/pessoas/query": {
      "post": {
        "summary": "Consultar pessoas f√≠sicas com filtros combinados",
        "description": "Busca pessoas (Pessoa F√≠sica) no banco PH3A com filtros demogr√°ficos e comportamentais.\n\n**Filtros dispon√≠veis:**\n- CPF, nome completo\n- Email, telefone, URL/perfil social, placa de ve√≠culo\n- Endere√ßo (CEP, cidade, UF, logradouro)\n- Faixa de idade, classe social, escolaridade\n- Status profissional, score de cr√©dito\n- 26 perfis comportamentais (DECIS)\n\n**Custo de cr√©ditos por volume:**\n- ‚â§10 registros: 5 cr√©ditos\n- 11-50 registros: 15 cr√©ditos\n- 51-100 registros: 50 cr√©ditos\n- 101-1000 registros: 100 cr√©ditos\n\n**Pagina√ß√£o:** Usa cursor opaco com tenant binding\n",
        "tags": [
          "PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "cpf": {
                    "type": "string",
                    "description": "CPF (apenas n√∫meros)"
                  },
                  "nomeCompleto": {
                    "type": "string",
                    "description": "Nome completo (busca parcial com ILIKE)"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "telefone": {
                    "type": "string",
                    "description": "Telefone (formato E.164)"
                  },
                  "url": {
                    "type": "string",
                    "description": "URL/perfil social (LinkedIn, Facebook, etc.)"
                  },
                  "placaVeiculo": {
                    "type": "string"
                  },
                  "endereco": {
                    "type": "object",
                    "properties": {
                      "cep": {
                        "type": "string"
                      },
                      "cidade": {
                        "type": "string"
                      },
                      "uf": {
                        "type": "string"
                      },
                      "logradouro": {
                        "type": "string"
                      }
                    }
                  },
                  "uf": {
                    "type": "string",
                    "maxLength": 2
                  },
                  "faixaIdade": {
                    "type": "string",
                    "enum": [
                      "0-17",
                      "18-24",
                      "25-34",
                      "35-44",
                      "45-54",
                      "55-64",
                      "65+"
                    ]
                  },
                  "classeSocial": {
                    "type": "string",
                    "enum": [
                      "A",
                      "B",
                      "C",
                      "D",
                      "E"
                    ]
                  },
                  "escolaridade": {
                    "type": "string",
                    "enum": [
                      "Fundamental",
                      "Medio",
                      "Superior",
                      "PosGraduacao"
                    ]
                  },
                  "statusProfissional": {
                    "type": "string",
                    "enum": [
                      "Empregado",
                      "Autonomo",
                      "Empresario",
                      "Aposentado",
                      "Desempregado"
                    ]
                  },
                  "scoreMin": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1000
                  },
                  "scoreMax": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1000
                  },
                  "limit": {
                    "type": "number",
                    "default": 100,
                    "minimum": 1,
                    "maximum": 1000
                  },
                  "cursor": {
                    "type": "string"
                  }
                }
              },
              "examples": {
                "demographic": {
                  "summary": "Busca demogr√°fica",
                  "value": {
                    "uf": "SP",
                    "faixaIdade": "25-34",
                    "classeSocial": "B",
                    "escolaridade": "Superior",
                    "limit": 50
                  }
                },
                "professional": {
                  "summary": "Busca profissional",
                  "value": {
                    "statusProfissional": "Empresario",
                    "scoreMin": 800,
                    "uf": "RJ",
                    "limit": 100
                  }
                },
                "location": {
                  "summary": "Busca por localiza√ß√£o",
                  "value": {
                    "endereco": {
                      "cidade": "S√£o Paulo",
                      "uf": "SP"
                    },
                    "classeSocial": "A",
                    "limit": 20
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lista de pessoas encontradas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    },
                    "nextCursor": {
                      "type": "string"
                    },
                    "totalCount": {
                      "type": "number"
                    },
                    "creditsCharged": {
                      "type": "number"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "cpf": "12345678901",
                      "nomeCompleto": "JOAO DA SILVA",
                      "faixaIdade": "25-34",
                      "classeSocial": "B",
                      "escolaridade": "Superior",
                      "statusProfissional": "Empregado",
                      "scoreCredito": 850,
                      "uf": "SP"
                    },
                    {
                      "cpf": "98765432109",
                      "nomeCompleto": "MARIA SANTOS",
                      "faixaIdade": "35-44",
                      "classeSocial": "A",
                      "escolaridade": "PosGraduacao",
                      "statusProfissional": "Empresario",
                      "scoreCredito": 920,
                      "uf": "SP"
                    }
                  ],
                  "nextCursor": "eyJrIjoiOTg3NjU0MzIxMDkiLCJ0IjoiZW1wcmVzYS0xMjMifQ",
                  "totalCount": 89,
                  "creditsCharged": 50
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "402": {
            "description": "Cr√©ditos insuficientes"
          },
          "429": {
            "description": "Rate limit excedido (100 req/min)"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/api/v1/ph3a/stats": {
      "post": {
        "summary": "Estat√≠sticas agregadas de empresas ou pessoas",
        "description": "Retorna estat√≠sticas agregadas (COUNT, AVG, SUM, MIN, MAX) sobre empresas ou pessoas.\n\n**Opera√ß√µes dispon√≠veis:**\n- COUNT: Contagem de registros\n- AVG: M√©dia de valores num√©ricos\n- SUM: Soma de valores\n- MIN: Valor m√≠nimo\n- MAX: Valor m√°ximo\n\n**Agrupamentos:**\n- Por UF, cidade, setor, porte (empresas)\n- Por faixa de idade, classe social, escolaridade (pessoas)\n\n**Custo:** 8 cr√©ditos por consulta (independente do volume)\n\n**Performance:** p95 < 5s para agrega√ß√µes em 50M+ registros\n",
        "tags": [
          "PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "target",
                  "aggregations"
                ],
                "properties": {
                  "target": {
                    "type": "string",
                    "enum": [
                      "empresas",
                      "pessoas"
                    ],
                    "description": "Tipo de entidade para agregar"
                  },
                  "filters": {
                    "type": "object",
                    "description": "Filtros opcionais (mesmos dispon√≠veis em /query)"
                  },
                  "aggregations": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "field",
                        "op"
                      ],
                      "properties": {
                        "field": {
                          "type": "string",
                          "description": "Campo a agregar (ou '1' para COUNT(*))"
                        },
                        "op": {
                          "type": "string",
                          "enum": [
                            "count",
                            "avg",
                            "sum",
                            "min",
                            "max"
                          ]
                        },
                        "groupBy": {
                          "type": "string",
                          "description": "Campo para agrupar resultados"
                        }
                      }
                    }
                  }
                }
              },
              "examples": {
                "countByUF": {
                  "summary": "Contar empresas por UF",
                  "value": {
                    "target": "empresas",
                    "filters": {
                      "statusFiscal": "Ativa"
                    },
                    "aggregations": [
                      {
                        "field": "1",
                        "op": "count",
                        "groupBy": "UF"
                      }
                    ]
                  }
                },
                "avgScoreBySector": {
                  "summary": "Score m√©dio por setor",
                  "value": {
                    "target": "empresas",
                    "filters": {
                      "uf": "SP"
                    },
                    "aggregations": [
                      {
                        "field": "Score",
                        "op": "avg",
                        "groupBy": "Setor"
                      }
                    ]
                  }
                },
                "demographicStats": {
                  "summary": "Estat√≠sticas demogr√°ficas",
                  "value": {
                    "target": "pessoas",
                    "filters": {
                      "uf": "RJ"
                    },
                    "aggregations": [
                      {
                        "field": "1",
                        "op": "count",
                        "groupBy": "ClasseSocial"
                      },
                      {
                        "field": "ScoreCredito",
                        "op": "avg",
                        "groupBy": "ClasseSocial"
                      }
                    ]
                  }
                },
                "multipleAggregations": {
                  "summary": "M√∫ltiplas agrega√ß√µes",
                  "value": {
                    "target": "empresas",
                    "aggregations": [
                      {
                        "field": "1",
                        "op": "count",
                        "groupBy": "Porte"
                      },
                      {
                        "field": "Score",
                        "op": "avg",
                        "groupBy": "Porte"
                      },
                      {
                        "field": "Score",
                        "op": "min",
                        "groupBy": "Porte"
                      },
                      {
                        "field": "Score",
                        "op": "max",
                        "groupBy": "Porte"
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Estat√≠sticas agregadas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "description": "Resultado agregado por grupo"
                      }
                    },
                    "costCredits": {
                      "type": "number",
                      "example": 8
                    }
                  }
                },
                "examples": {
                  "countByUF": {
                    "summary": "Contagem por UF",
                    "value": {
                      "success": true,
                      "data": [
                        {
                          "UF": "SP",
                          "count_total": 125000
                        },
                        {
                          "UF": "RJ",
                          "count_total": 85000
                        },
                        {
                          "UF": "MG",
                          "count_total": 62000
                        }
                      ],
                      "costCredits": 8
                    }
                  },
                  "avgScore": {
                    "summary": "Score m√©dio por setor",
                    "value": {
                      "success": true,
                      "data": [
                        {
                          "Setor": "Tecnologia",
                          "avg_Score": 875.5
                        },
                        {
                          "Setor": "Comercio",
                          "avg_Score": 720.3
                        },
                        {
                          "Setor": "Servicos",
                          "avg_Score": 805.8
                        }
                      ],
                      "costCredits": 8
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou agrega√ß√µes incorretas"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "402": {
            "description": "Cr√©ditos insuficientes"
          },
          "429": {
            "description": "Rate limit excedido"
          },
          "500": {
            "description": "Erro interno"
          }
        }
      }
    },
    "/api/v1/ph3a/stream": {
      "post": {
        "summary": "Streaming de dados em lotes (Server-Sent Events)",
        "description": "Retorna grandes volumes de dados em batches via Server-Sent Events (SSE).\nIdeal para exporta√ß√£o de dados ou processamento em background.\n\n**Caracter√≠sticas:**\n- Streaming cont√≠nuo em batches de 1000 registros\n- Cobran√ßa de cr√©ditos por batch (10 cr√©ditos/1000 registros)\n- Interrup√ß√£o autom√°tica se cr√©ditos insuficientes\n- Conex√£o keep-alive com eventos SSE\n\n**Formato SSE:**\n```\ndata: {\"registros\": [...], \"hasMore\": true}\n\ndata: {\"registros\": [...], \"hasMore\": true}\n\nevent: end\ndata: Stream finished\n```\n\n**Custo:** 10 cr√©ditos por lote de 1000 registros\n\n**Timeout:** 30s por batch (total ilimitado)\n",
        "tags": [
          "PH3A"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "mode",
                  "query"
                ],
                "properties": {
                  "mode": {
                    "type": "string",
                    "enum": [
                      "empresas",
                      "pessoas"
                    ],
                    "description": "Tipo de dados para streaming"
                  },
                  "query": {
                    "type": "object",
                    "description": "Filtros de busca (mesmos de /query)"
                  },
                  "batchSize": {
                    "type": "number",
                    "default": 1000,
                    "minimum": 100,
                    "maximum": 5000,
                    "description": "Tamanho do lote"
                  }
                }
              },
              "examples": {
                "streamEmpresas": {
                  "summary": "Streaming de empresas",
                  "value": {
                    "mode": "empresas",
                    "query": {
                      "uf": "SP",
                      "statusFiscal": "Ativa"
                    },
                    "batchSize": 1000
                  }
                },
                "streamPessoas": {
                  "summary": "Streaming de pessoas",
                  "value": {
                    "mode": "pessoas",
                    "query": {
                      "uf": "RJ",
                      "classeSocial": "B"
                    },
                    "batchSize": 1000
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Streaming de dados em formato Server-Sent Events",
            "headers": {
              "Content-Type": {
                "schema": {
                  "type": "string",
                  "example": "text/event-stream"
                }
              },
              "Cache-Control": {
                "schema": {
                  "type": "string",
                  "example": "no-cache"
                }
              },
              "Connection": {
                "schema": {
                  "type": "string",
                  "example": "keep-alive"
                }
              }
            },
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string",
                  "description": "Stream de eventos SSE"
                },
                "examples": {
                  "streamEvents": {
                    "summary": "Eventos SSE de exemplo",
                    "value": "data: {\"registros\":[{\"cnpj\":\"12345678000190\",\"razaoSocial\":\"EMPRESA 1\"}],\"hasMore\":true}\n\ndata: {\"registros\":[{\"cnpj\":\"98765432000111\",\"razaoSocial\":\"EMPRESA 2\"}],\"hasMore\":true}\n\nevent: end\ndata: Stream finished\n"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos",
            "content": {
              "text/event-stream": {
                "example": "event: error\ndata: {\"message\":\"Invalid request body\"}\n"
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "402": {
            "description": "Cr√©ditos insuficientes (streaming interrompido)",
            "content": {
              "text/event-stream": {
                "example": "event: error\ndata: {\"message\":\"Insufficient credits\"}\n"
              }
            }
          },
          "429": {
            "description": "Rate limit excedido"
          },
          "500": {
            "description": "Erro interno",
            "content": {
              "text/event-stream": {
                "example": "event: error\ndata: {\"message\":\"Internal server error\"}\n"
              }
            }
          }
        }
      }
    },
    "/ph3a/dossier/consult": {
      "post": {
        "summary": "Consultar novo dossi√™ PH3A",
        "description": "Consulta um dossi√™ PH3A via API e armazena no banco de dados.\n- Verifica cache (dossi√™ v√°lido n√£o expirado)\n- Se `forceRefresh=true`, ignora cache e consulta API novamente\n- Processa dados estruturados (scores, telefones, emails, processos, etc.)\n- Calcula n√≠vel de risco e completude\n",
        "tags": [
          "PH3A Dossier"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "leadId",
                  "document",
                  "documentType"
                ],
                "properties": {
                  "leadId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID do lead a ser consultado"
                  },
                  "document": {
                    "type": "string",
                    "minLength": 11,
                    "maxLength": 20,
                    "description": "CPF (11) ou CNPJ (14/18)",
                    "example": "12345678901"
                  },
                  "documentType": {
                    "type": "string",
                    "enum": [
                      "cpf",
                      "cnpj"
                    ],
                    "description": "Tipo do documento"
                  },
                  "forceRefresh": {
                    "type": "boolean",
                    "default": false,
                    "description": "Se true, ignora cache e consulta API novamente"
                  },
                  "packageId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID do pacote de consulta customizado PH3A"
                  },
                  "rules": {
                    "type": "object",
                    "description": "Regras espec√≠ficas da consulta"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Dossi√™ consultado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/Ph3aDossierResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "403": {
            "description": "Sem cr√©ditos PH3A dispon√≠veis"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/ph3a/dossier/{id}": {
      "get": {
        "summary": "Buscar dossi√™ por ID",
        "description": "Retorna um dossi√™ PH3A espec√≠fico pelo seu ID",
        "tags": [
          "PH3A Dossier"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do dossi√™"
          }
        ],
        "responses": {
          "200": {
            "description": "Dossi√™ encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/Ph3aDossierResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Dossi√™ n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/ph3a/dossier": {
      "get": {
        "summary": "Listar dossi√™s com filtros",
        "description": "Lista dossi√™s PH3A com filtros avan√ßados e pagina√ß√£o.\nRetorna metadados de pagina√ß√£o e estat√≠sticas.\n",
        "tags": [
          "PH3A Dossier"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "pendente",
                "processando",
                "concluido",
                "erro",
                "parcial"
              ]
            },
            "description": "Filtrar por status do dossi√™"
          },
          {
            "in": "query",
            "name": "documentType",
            "schema": {
              "type": "string",
              "enum": [
                "cpf",
                "cnpj"
              ]
            },
            "description": "Filtrar por tipo de documento"
          },
          {
            "in": "query",
            "name": "dataConsultaInicio",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Data inicial para filtro de consultas"
          },
          {
            "in": "query",
            "name": "dataConsultaFim",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Data final para filtro de consultas"
          },
          {
            "in": "query",
            "name": "isExpirado",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtrar dossi√™s expirados (true) ou v√°lidos (false)"
          },
          {
            "in": "query",
            "name": "completudeMinima",
            "schema": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "description": "Completude percentual m√≠nima (0-100)"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "N√∫mero da p√°gina"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "description": "Itens por p√°gina"
          },
          {
            "in": "query",
            "name": "orderBy",
            "schema": {
              "type": "string",
              "enum": [
                "created_at",
                "data_consulta",
                "completude_percentual"
              ],
              "default": "created_at"
            },
            "description": "Campo para ordena√ß√£o"
          },
          {
            "in": "query",
            "name": "orderDirection",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "description": "Dire√ß√£o da ordena√ß√£o"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de dossi√™s retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Ph3aDossierSummary"
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "example": 1
                        },
                        "limit": {
                          "type": "integer",
                          "example": 20
                        },
                        "total": {
                          "type": "integer",
                          "example": 100
                        },
                        "totalPages": {
                          "type": "integer",
                          "example": 5
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/produtos": {
      "post": {
        "summary": "Create new product",
        "tags": [
          "Produtos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "nome",
                  "descricao",
                  "categoria",
                  "tipoCobranca",
                  "preco",
                  "asaasProductId"
                ],
                "properties": {
                  "nome": {
                    "type": "string"
                  },
                  "descricao": {
                    "type": "string"
                  },
                  "categoria": {
                    "type": "string",
                    "enum": [
                      "extensao_chrome",
                      "crm_saas",
                      "marketplace_leads"
                    ]
                  },
                  "tipoCobranca": {
                    "type": "string",
                    "enum": [
                      "mensal",
                      "anual",
                      "unico"
                    ]
                  },
                  "preco": {
                    "type": "number"
                  },
                  "asaasProductId": {
                    "type": "string"
                  },
                  "configuracaoJson": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product created successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "get": {
        "summary": "List all products",
        "tags": [
          "Produtos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "categoria",
            "schema": {
              "type": "string",
              "enum": [
                "extensao_chrome",
                "crm_saas",
                "marketplace_leads"
              ]
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "ativo",
                "inativo"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of products"
          }
        }
      }
    },
    "/produtos/{id}": {
      "get": {
        "summary": "Get product by ID",
        "tags": [
          "Produtos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Product found"
          },
          "404": {
            "description": "Product not found"
          }
        }
      },
      "patch": {
        "summary": "Update product",
        "tags": [
          "Produtos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "preco": {
                    "type": "number"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ativo",
                      "inativo"
                    ]
                  },
                  "configuracaoJson": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Product updated"
          },
          "404": {
            "description": "Product not found"
          }
        }
      },
      "delete": {
        "summary": "Delete product (soft delete)",
        "tags": [
          "Produtos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Product deleted"
          },
          "404": {
            "description": "Product not found"
          }
        }
      }
    },
    "/auth/refresh": {
      "post": {
        "summary": "Atualizar token de acesso",
        "description": "Atualiza um token de acesso usando um token de refresh v√°lido.\nSuporta compartilhamento de dispositivo entre frontend web e extens√£o Chrome.\nAmbos os clientes podem usar o mesmo device_id para atualizar tokens da mesma sess√£o.\n",
        "tags": [
          "Autentica√ß√£o"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "refresh_token",
                  "device_id",
                  "device_fingerprint",
                  "client_type"
                ],
                "properties": {
                  "refresh_token": {
                    "type": "string",
                    "description": "Token de refresh v√°lido",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  },
                  "device_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Identificador de dispositivo compartilhado entre web e extens√£o",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "device_fingerprint": {
                    "type": "string",
                    "description": "Impress√£o digital do dispositivo para valida√ß√£o de seguran√ßa",
                    "example": "fp_1234567890abcdef"
                  },
                  "client_type": {
                    "type": "string",
                    "enum": [
                      "web",
                      "extension"
                    ],
                    "description": "Tipo de cliente fazendo a requisi√ß√£o",
                    "example": "web"
                  },
                  "ip_address": {
                    "type": "string",
                    "format": "ipv4",
                    "description": "Endere√ßo IP do cliente (opcional, extra√≠do da requisi√ß√£o)",
                    "example": "192.168.1.100"
                  },
                  "user_agent": {
                    "type": "string",
                    "description": "String do user agent (opcional, extra√≠do da requisi√ß√£o)",
                    "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string",
                          "description": "Novo token de acesso",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "refresh_token": {
                          "type": "string",
                          "description": "Novo token de refresh",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "token_type": {
                          "type": "string",
                          "example": "Bearer"
                        },
                        "expires_in": {
                          "type": "number",
                          "description": "Expira√ß√£o do token de acesso em segundos",
                          "example": 900
                        },
                        "expires_at": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp de expira√ß√£o do token de acesso",
                          "example": "2025-09-16T10:45:00Z"
                        },
                        "session": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid",
                              "example": "123e4567-e89b-12d3-a456-426614174000"
                            },
                            "device_id": {
                              "type": "string",
                              "format": "uuid",
                              "example": "550e8400-e29b-41d4-a716-446655440000"
                            },
                            "client_type": {
                              "type": "string",
                              "enum": [
                                "web",
                                "extension"
                              ],
                              "example": "web"
                            },
                            "last_activity_at": {
                              "type": "string",
                              "format": "date-time",
                              "example": "2025-09-16T10:30:00Z"
                            },
                            "expires_at": {
                              "type": "string",
                              "format": "date-time",
                              "example": "2025-09-16T11:15:00Z"
                            },
                            "time_to_expiration_minutes": {
                              "type": "number",
                              "example": 45
                            }
                          }
                        },
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid",
                              "example": "user-uuid"
                            },
                            "email": {
                              "type": "string",
                              "example": "user@example.com"
                            },
                            "name": {
                              "type": "string",
                              "example": "User Name"
                            },
                            "empresa_id": {
                              "type": "string",
                              "format": "uuid",
                              "example": "empresa-uuid"
                            },
                            "role": {
                              "type": "string",
                              "example": "user"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisi√ß√£o inv√°lidos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "example": "VALIDATION_ERROR"
                        },
                        "message": {
                          "type": "string",
                          "example": "Device ID is required"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Falha na autentica√ß√£o",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "enum": [
                            "INVALID_TOKEN",
                            "EXPIRED_TOKEN",
                            "DEVICE_MISMATCH",
                            "FINGERPRINT_MISMATCH"
                          ],
                          "example": "INVALID_TOKEN"
                        },
                        "message": {
                          "type": "string",
                          "example": "Invalid or expired refresh token"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Limite de taxa excedido",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "example": "RATE_LIMIT_EXCEEDED"
                        },
                        "message": {
                          "type": "string",
                          "example": "Too many refresh attempts"
                        },
                        "retry_after": {
                          "type": "number",
                          "example": 60
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "code": {
                          "type": "string",
                          "example": "INTERNAL_ERROR"
                        },
                        "message": {
                          "type": "string",
                          "example": "Token refresh failed"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/acoes": {
      "post": {
        "summary": "Criar a√ß√£o vinculada a causas",
        "tags": [
          "Resolu√ß√£o de Problemas - A√ß√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/acoes/{acao_id}/vincular-causas": {
      "post": {
        "summary": "Vincular causas (Ishikawa ou 5 Porqu√™s) a uma a√ß√£o",
        "tags": [
          "Resolu√ß√£o de Problemas - A√ß√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/acoes/{acao_id}/status": {
      "post": {
        "summary": "Atualizar status da a√ß√£o",
        "tags": [
          "Resolu√ß√£o de Problemas - A√ß√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/acoes/{acao_id}/validar-eficaz": {
      "post": {
        "summary": "Marcar a√ß√£o como eficaz (verifica√ß√£o)",
        "tags": [
          "Resolu√ß√£o de Problemas - A√ß√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/etapas/{etapa_id}/cinco-porques": {
      "post": {
        "summary": "Criar cadeia 5 Porqu√™s",
        "tags": [
          "Resolu√ß√£o de Problemas - 5 Porqu√™s"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "get": {
        "summary": "Listar cadeias 5 Porqu√™s da etapa",
        "tags": [
          "Resolu√ß√£o de Problemas - 5 Porqu√™s"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/cinco-porques/{cadeia_id}/passos": {
      "post": {
        "summary": "Adicionar passo na cadeia 5 Porqu√™s",
        "tags": [
          "Resolu√ß√£o de Problemas - 5 Porqu√™s"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/cinco-porques/{cadeia_id}/confirmar": {
      "post": {
        "summary": "Confirmar causa raiz da cadeia 5 Porqu√™s",
        "tags": [
          "Resolu√ß√£o de Problemas - 5 Porqu√™s"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/convert/masp-to-8d": {
      "post": {
        "summary": "Converter projeto MASP para 8D (ass√≠ncrono)",
        "tags": [
          "Resolu√ß√£o de Problemas - Convers√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/convert/8d-to-masp": {
      "post": {
        "summary": "Converter projeto 8D para MASP (ass√≠ncrono)",
        "tags": [
          "Resolu√ß√£o de Problemas - Convers√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/convert/to-a3": {
      "post": {
        "summary": "Converter projeto (MASP/8D) para A3 (ass√≠ncrono)",
        "tags": [
          "Resolu√ß√£o de Problemas - Convers√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/conversoes/{conversao_id}/rollback": {
      "post": {
        "summary": "Rollback de convers√£o",
        "tags": [
          "Resolu√ß√£o de Problemas - Convers√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/evidencias": {
      "post": {
        "summary": "Upload de evid√™ncia",
        "tags": [
          "Resolu√ß√£o de Problemas - Evid√™ncias"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "referenciaTipo": {
                    "type": "string"
                  },
                  "referenciaId": {
                    "type": "integer"
                  },
                  "titulo": {
                    "type": "string"
                  },
                  "observacao": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Evid√™ncia enviada"
          }
        }
      },
      "get": {
        "summary": "Listar evid√™ncias do projeto",
        "tags": [
          "Resolu√ß√£o de Problemas - Evid√™ncias"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/evidencias/{evidencia_id}/link": {
      "post": {
        "summary": "Vincular evid√™ncia a outra refer√™ncia",
        "tags": [
          "Resolu√ß√£o de Problemas - Evid√™ncias"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/evidencias/{evidencia_id}": {
      "delete": {
        "summary": "Remover evid√™ncia",
        "tags": [
          "Resolu√ß√£o de Problemas - Evid√™ncias"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/etapas/{etapa_id}/5w2h": {
      "post": {
        "summary": "Criar 5W2H para etapa",
        "tags": [
          "Resolu√ß√£o de Problemas - 5W2H"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "get": {
        "summary": "Listar 5W2H da etapa",
        "tags": [
          "Resolu√ß√£o de Problemas - 5W2H"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/etapas/{etapa_id}/5w2h/validate": {
      "post": {
        "summary": "Validar completude do 5W2H antes de concluir etapa",
        "tags": [
          "Resolu√ß√£o de Problemas - 5W2H"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/etapas/{etapa_id}/ishikawa": {
      "post": {
        "summary": "Criar diagrama Ishikawa",
        "tags": [
          "Resolu√ß√£o de Problemas - Ishikawa"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "get": {
        "summary": "Listar Ishikawa da etapa",
        "tags": [
          "Resolu√ß√£o de Problemas - Ishikawa"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/ishikawa/{ishikawa_id}/causas": {
      "post": {
        "summary": "Adicionar causa ao Ishikawa",
        "tags": [
          "Resolu√ß√£o de Problemas - Ishikawa"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/ishikawa/{ishikawa_id}/priorizar": {
      "post": {
        "summary": "Priorizar causas com GUT",
        "tags": [
          "Resolu√ß√£o de Problemas - Ishikawa"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/resolucao-problemas/projetos": {
      "post": {
        "summary": "Criar novo projeto (MASP/8D/A3)",
        "description": "Cria um novo projeto de resolu√ß√£o de problemas usando uma das metodologias: MASP, 8D ou A3.\nRequer autentica√ß√£o e o projeto ser√° vinculado √† empresa do usu√°rio autenticado.\n",
        "tags": [
          "Resolu√ß√£o de Problemas - Projetos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProjetoData"
              },
              "examples": {
                "masp": {
                  "summary": "Projeto MASP",
                  "value": {
                    "clienteId": 123,
                    "metodologia": "masp",
                    "titulo": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o",
                    "problemaDescricao": "Alto √≠ndice de pe√ßas rejeitadas no setor de usinagem",
                    "impacto": "Perda de 15% da produ√ß√£o mensal",
                    "responsavelId": 45
                  }
                },
                "8d": {
                  "summary": "Projeto 8D",
                  "value": {
                    "clienteId": 123,
                    "metodologia": "8d",
                    "titulo": "Corre√ß√£o de n√£o conformidade em lote de produtos",
                    "problemaDescricao": "Lote 2024-A apresentou falhas de veda√ß√£o",
                    "impacto": "Recall de 500 unidades - Custo estimado: R$ 50.000"
                  }
                },
                "a3": {
                  "summary": "Projeto A3",
                  "value": {
                    "clienteId": 123,
                    "metodologia": "a3",
                    "titulo": "Melhoria no tempo de setup de m√°quinas",
                    "problemaDescricao": "Tempo m√©dio de setup: 45 minutos",
                    "impacto": "Meta: reduzir para 20 minutos (ganho de 2h/dia)",
                    "responsavelId": 67
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Projeto criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/ProjetoResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": 1,
                    "empresaId": "uuid-empresa-123",
                    "clienteId": 123,
                    "metodologia": "masp",
                    "titulo": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o",
                    "resumo": null,
                    "problemaDescricao": "Alto √≠ndice de pe√ßas rejeitadas no setor de usinagem",
                    "impacto": "Perda de 15% da produ√ß√£o mensal",
                    "status": "rascunho",
                    "versao": null,
                    "responsavelId": 45,
                    "dataAbertura": null,
                    "dataEncerramento": null,
                    "createdAt": "2024-01-15T10:30:00.000Z",
                    "updatedAt": "2024-01-15T10:30:00.000Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou campos obrigat√≥rios ausentes",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Campo(s) obrigat√≥rio(s) n√£o informado(s): clienteId, metodologia, titulo"
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - Token inv√°lido ou ausente"
          },
          "403": {
            "description": "Acesso negado - Usu√°rio sem permiss√£o"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar projetos com filtros e pagina√ß√£o",
        "description": "Retorna lista paginada de projetos com filtros opcionais por metodologia, status, cliente e respons√°vel.\nUsa cursor-based pagination para melhor performance em grandes volumes.\nRetorna apenas projetos da empresa autenticada.\n",
        "tags": [
          "Resolu√ß√£o de Problemas - Projetos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "metodologia",
            "schema": {
              "type": "string",
              "enum": [
                "masp",
                "8d",
                "a3"
              ]
            },
            "description": "Filtrar por metodologia espec√≠fica",
            "example": "masp"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "rascunho",
                "em_andamento",
                "concluido",
                "cancelado",
                "arquivado"
              ]
            },
            "description": "Filtrar por status do projeto",
            "example": "em_andamento"
          },
          {
            "in": "query",
            "name": "clienteId",
            "schema": {
              "type": "integer"
            },
            "description": "Filtrar projetos de um cliente espec√≠fico",
            "example": 123
          },
          {
            "in": "query",
            "name": "responsavelId",
            "schema": {
              "type": "integer"
            },
            "description": "Filtrar projetos de um respons√°vel espec√≠fico",
            "example": 45
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "description": "Quantidade de registros por p√°gina",
            "example": 20
          },
          {
            "in": "query",
            "name": "cursor",
            "schema": {
              "type": "integer"
            },
            "description": "ID do √∫ltimo registro da p√°gina anterior (para pagina√ß√£o)",
            "example": 50
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de projetos retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "projetos": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/ProjetoResponse"
                          }
                        },
                        "nextCursor": {
                          "type": "integer",
                          "nullable": true,
                          "description": "ID para buscar pr√≥xima p√°gina (null se n√£o houver mais)"
                        },
                        "hasMore": {
                          "type": "boolean",
                          "description": "Indica se h√° mais registros"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "projetos": [
                      {
                        "id": 1,
                        "empresaId": "uuid-empresa-123",
                        "clienteId": 123,
                        "metodologia": "masp",
                        "titulo": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o",
                        "status": "em_andamento",
                        "responsavelId": 45,
                        "dataAbertura": "2024-01-15",
                        "createdAt": "2024-01-15T10:30:00.000Z"
                      },
                      {
                        "id": 2,
                        "empresaId": "uuid-empresa-123",
                        "clienteId": 124,
                        "metodologia": "8d",
                        "titulo": "Corre√ß√£o de n√£o conformidade",
                        "status": "em_andamento",
                        "responsavelId": 67,
                        "dataAbertura": "2024-01-16",
                        "createdAt": "2024-01-16T14:20:00.000Z"
                      }
                    ],
                    "nextCursor": 2,
                    "hasMore": true
                  }
                }
              }
            }
          },
          "400": {
            "description": "Par√¢metros de consulta inv√°lidos"
          },
          "401": {
            "description": "N√£o autorizado - Token inv√°lido ou ausente"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}": {
      "get": {
        "summary": "Buscar projeto por ID",
        "description": "Retorna os dados completos de um projeto espec√≠fico.\nRequer autentica√ß√£o e acesso √† empresa propriet√°ria do projeto.\nInclui dados de participantes e etapas do workflow (se existirem).\n",
        "tags": [
          "Resolu√ß√£o de Problemas - Projetos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "projeto_id",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "description": "ID do projeto a ser buscado",
            "example": 1
          }
        ],
        "responses": {
          "200": {
            "description": "Projeto encontrado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/ProjetoResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": 1,
                    "empresaId": "uuid-empresa-123",
                    "clienteId": 123,
                    "metodologia": "masp",
                    "titulo": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o",
                    "resumo": "Projeto focado em reduzir desperd√≠cios atrav√©s da metodologia MASP",
                    "problemaDescricao": "Alto √≠ndice de pe√ßas rejeitadas no setor de usinagem",
                    "impacto": "Perda de 15% da produ√ß√£o mensal",
                    "status": "em_andamento",
                    "versao": "1.0",
                    "responsavelId": 45,
                    "dataAbertura": "2024-01-15",
                    "dataEncerramento": null,
                    "createdAt": "2024-01-15T10:30:00.000Z",
                    "updatedAt": "2024-01-20T15:45:00.000Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "ID do projeto inv√°lido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "ID do projeto deve ser um n√∫mero v√°lido"
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - Token inv√°lido ou ausente"
          },
          "403": {
            "description": "Acesso negado - Projeto pertence a outra empresa"
          },
          "404": {
            "description": "Projeto n√£o encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Projeto n√£o encontrado"
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar projeto",
        "description": "Atualiza os dados de um projeto existente.\nTodos os campos s√£o opcionais - apenas os campos enviados ser√£o atualizados.\nRequer autentica√ß√£o e o projeto deve pertencer √† empresa do usu√°rio.\n",
        "tags": [
          "Resolu√ß√£o de Problemas - Projetos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "projeto_id",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "description": "ID do projeto a ser atualizado",
            "example": 1
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProjetoData"
              },
              "examples": {
                "atualizacao_basica": {
                  "summary": "Atualiza√ß√£o b√°sica de t√≠tulo e descri√ß√£o",
                  "value": {
                    "titulo": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o - Fase 2",
                    "problemaDescricao": "Ap√≥s an√°lise inicial, identificadas 3 causas raiz principais"
                  }
                },
                "mudanca_status": {
                  "summary": "Mudan√ßa de status para em andamento",
                  "value": {
                    "status": "em_andamento",
                    "resumo": "Projeto aprovado e iniciado oficialmente"
                  }
                },
                "conclusao_projeto": {
                  "summary": "Conclus√£o do projeto",
                  "value": {
                    "status": "concluido",
                    "dataEncerramento": "2024-03-15",
                    "resumo": "Projeto conclu√≠do com redu√ß√£o de 40% no desperd√≠cio"
                  }
                },
                "atualizacao_completa": {
                  "summary": "Atualiza√ß√£o completa com m√∫ltiplos campos",
                  "value": {
                    "titulo": "Redu√ß√£o de desperd√≠cio - Fase Final",
                    "resumo": "Implementa√ß√£o de melhorias identificadas",
                    "problemaDescricao": "Desperd√≠cio reduzido de 15% para 6%",
                    "impacto": "Economia de R$ 25.000/m√™s",
                    "status": "em_andamento",
                    "versao": "2.0",
                    "responsavelId": 67
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Projeto atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/ProjetoResponse"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "id": 1,
                    "empresaId": "uuid-empresa-123",
                    "clienteId": 123,
                    "metodologia": "masp",
                    "titulo": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o - Fase 2",
                    "resumo": "Implementa√ß√£o de melhorias identificadas",
                    "problemaDescricao": "Desperd√≠cio reduzido de 15% para 6%",
                    "impacto": "Economia de R$ 25.000/m√™s",
                    "status": "em_andamento",
                    "versao": "2.0",
                    "responsavelId": 67,
                    "dataAbertura": "2024-01-15",
                    "dataEncerramento": null,
                    "createdAt": "2024-01-15T10:30:00.000Z",
                    "updatedAt": "2024-02-10T16:20:00.000Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou ID do projeto inv√°lido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Status inv√°lido. Valores aceitos: rascunho, em_andamento, concluido, cancelado, arquivado"
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - Token inv√°lido ou ausente"
          },
          "403": {
            "description": "Acesso negado - Projeto pertence a outra empresa"
          },
          "404": {
            "description": "Projeto n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Arquivar projeto",
        "description": "Arquiva um projeto existente (soft delete).\nO projeto n√£o √© removido do banco, apenas marcado como \"arquivado\".\nRequer uma justificativa obrigat√≥ria para auditoria.\nRequer autentica√ß√£o e o projeto deve pertencer √† empresa do usu√°rio.\n",
        "tags": [
          "Resolu√ß√£o de Problemas - Projetos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "projeto_id",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "description": "ID do projeto a ser arquivado",
            "example": 1
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "justificativa"
                ],
                "properties": {
                  "justificativa": {
                    "type": "string",
                    "minLength": 10,
                    "maxLength": 500,
                    "description": "Motivo do arquivamento (obrigat√≥rio para auditoria)"
                  }
                }
              },
              "examples": {
                "duplicado": {
                  "summary": "Projeto duplicado",
                  "value": {
                    "justificativa": "Projeto duplicado. O projeto #125 trata do mesmo problema de forma mais completa."
                  }
                },
                "cancelamento_cliente": {
                  "summary": "Cancelado a pedido do cliente",
                  "value": {
                    "justificativa": "Cliente solicitou cancelamento do projeto devido a mudan√ßa de prioridades estrat√©gicas."
                  }
                },
                "nao_viabilidade": {
                  "summary": "Projeto n√£o vi√°vel",
                  "value": {
                    "justificativa": "Ap√≥s an√°lise de viabilidade, concluiu-se que o custo de implementa√ß√£o supera os benef√≠cios esperados."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Projeto arquivado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Projeto arquivado com sucesso"
                        },
                        "projeto": {
                          "$ref": "#/components/schemas/ProjetoResponse"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "message": "Projeto arquivado com sucesso",
                    "projeto": {
                      "id": 1,
                      "empresaId": "uuid-empresa-123",
                      "clienteId": 123,
                      "metodologia": "masp",
                      "titulo": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o",
                      "status": "arquivado",
                      "dataEncerramento": "2024-02-10",
                      "updatedAt": "2024-02-10T14:30:00.000Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Justificativa ausente ou inv√°lida",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "sem_justificativa": {
                    "summary": "Justificativa n√£o informada",
                    "value": {
                      "success": false,
                      "error": "Justificativa √© obrigat√≥ria para arquivar o projeto"
                    }
                  },
                  "justificativa_curta": {
                    "summary": "Justificativa muito curta",
                    "value": {
                      "success": false,
                      "error": "Justificativa deve ter no m√≠nimo 10 caracteres"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - Token inv√°lido ou ausente"
          },
          "403": {
            "description": "Acesso negado - Projeto pertence a outra empresa"
          },
          "404": {
            "description": "Projeto n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/progresso": {
      "get": {
        "summary": "Obter progresso do projeto",
        "description": "Calcula e retorna o progresso atual do projeto baseado nas etapas conclu√≠das.\nO c√°lculo varia de acordo com a metodologia do projeto (MASP, 8D ou A3).\nRetorna percentual de conclus√£o, etapas conclu√≠das/pendentes e m√©tricas adicionais.\nRequer autentica√ß√£o e acesso ao projeto.\n",
        "tags": [
          "Resolu√ß√£o de Problemas - Projetos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "projeto_id",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "description": "ID do projeto para calcular progresso",
            "example": 1
          }
        ],
        "responses": {
          "200": {
            "description": "Progresso calculado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "projetoId": {
                          "type": "integer",
                          "description": "ID do projeto"
                        },
                        "metodologia": {
                          "type": "string",
                          "enum": [
                            "masp",
                            "8d",
                            "a3"
                          ],
                          "description": "Metodologia utilizada"
                        },
                        "progressoPercentual": {
                          "type": "number",
                          "minimum": 0,
                          "maximum": 100,
                          "description": "Percentual de conclus√£o do projeto"
                        },
                        "etapasConcluidas": {
                          "type": "integer",
                          "description": "N√∫mero de etapas conclu√≠das"
                        },
                        "etapasTotal": {
                          "type": "integer",
                          "description": "N√∫mero total de etapas"
                        },
                        "etapasDetalhes": {
                          "type": "array",
                          "description": "Detalhamento por etapa",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer"
                              },
                              "nome": {
                                "type": "string"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "pendente",
                                  "em_andamento",
                                  "concluida"
                                ]
                              },
                              "dataInicio": {
                                "type": "string",
                                "format": "date"
                              },
                              "dataFim": {
                                "type": "string",
                                "format": "date"
                              }
                            }
                          }
                        },
                        "tempoDecorrido": {
                          "type": "integer",
                          "description": "Dias desde abertura do projeto"
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "masp_em_andamento": {
                    "summary": "Projeto MASP em andamento",
                    "value": {
                      "success": true,
                      "data": {
                        "projetoId": 1,
                        "metodologia": "masp",
                        "progressoPercentual": 37.5,
                        "etapasConcluidas": 3,
                        "etapasTotal": 8,
                        "etapasDetalhes": [
                          {
                            "id": 1,
                            "nome": "Identifica√ß√£o do problema",
                            "status": "concluida",
                            "dataInicio": "2024-01-15",
                            "dataFim": "2024-01-18"
                          },
                          {
                            "id": 2,
                            "nome": "Observa√ß√£o",
                            "status": "concluida",
                            "dataInicio": "2024-01-19",
                            "dataFim": "2024-01-25"
                          },
                          {
                            "id": 3,
                            "nome": "An√°lise",
                            "status": "concluida",
                            "dataInicio": "2024-01-26",
                            "dataFim": "2024-02-02"
                          },
                          {
                            "id": 4,
                            "nome": "Plano de a√ß√£o",
                            "status": "em_andamento",
                            "dataInicio": "2024-02-03",
                            "dataFim": null
                          },
                          {
                            "id": 5,
                            "nome": "A√ß√£o",
                            "status": "pendente",
                            "dataInicio": null,
                            "dataFim": null
                          }
                        ],
                        "tempoDecorrido": 26
                      }
                    }
                  },
                  "8d_inicio": {
                    "summary": "Projeto 8D no in√≠cio",
                    "value": {
                      "success": true,
                      "data": {
                        "projetoId": 2,
                        "metodologia": "8d",
                        "progressoPercentual": 12.5,
                        "etapasConcluidas": 1,
                        "etapasTotal": 8,
                        "etapasDetalhes": [
                          {
                            "id": 1,
                            "nome": "D1 - Formar equipe",
                            "status": "concluida",
                            "dataInicio": "2024-02-01",
                            "dataFim": "2024-02-05"
                          },
                          {
                            "id": 2,
                            "nome": "D2 - Descrever problema",
                            "status": "em_andamento",
                            "dataInicio": "2024-02-06",
                            "dataFim": null
                          }
                        ],
                        "tempoDecorrido": 9
                      }
                    }
                  },
                  "a3_concluido": {
                    "summary": "Projeto A3 conclu√≠do",
                    "value": {
                      "success": true,
                      "data": {
                        "projetoId": 3,
                        "metodologia": "a3",
                        "progressoPercentual": 100,
                        "etapasConcluidas": 7,
                        "etapasTotal": 7,
                        "tempoDecorrido": 45
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "ID do projeto inv√°lido"
          },
          "401": {
            "description": "N√£o autorizado - Token inv√°lido ou ausente"
          },
          "403": {
            "description": "Acesso negado - Projeto pertence a outra empresa"
          },
          "404": {
            "description": "Projeto n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/chat": {
      "post": {
        "summary": "Chat com assistente IA especializado em resolu√ß√£o de problemas",
        "description": "Permite conversar com o assistente IA especializado em metodologias MASP, 8D e A3.\n\n**Funcionalidades:**\n- Mant√©m contexto completo da conversa por projeto\n- Conhece detalhes do projeto (metodologia, problema, impacto)\n- Automaticamente cria/reutiliza thread de conversa vinculado ao projeto\n- Hist√≥rico completo de mensagens persistido no banco\n- Agente: `problem_solver` (GPT-4)\n\n**Capacidades do assistente:**\n- An√°lise de causas raiz usando 5 Porqu√™s e Ishikawa\n- Sugest√µes de a√ß√µes corretivas baseadas em best practices\n- Acompanhamento da efic√°cia das a√ß√µes implementadas\n- Orienta√ß√£o sobre etapas da metodologia escolhida\n- Gera√ß√£o de insights e recomenda√ß√µes\n",
        "tags": [
          "Resolu√ß√£o de Problemas - Projetos"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "projeto_id",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            },
            "description": "ID do projeto MASP/8D/A3",
            "example": 1
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "message"
                ],
                "properties": {
                  "message": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 4000,
                    "description": "Mensagem do usu√°rio para o assistente IA"
                  }
                }
              },
              "examples": {
                "duvida_metodologia": {
                  "summary": "D√∫vida sobre metodologia",
                  "value": {
                    "message": "Quais s√£o as pr√≥ximas etapas do MASP que devo seguir?"
                  }
                },
                "analise_causa_raiz": {
                  "summary": "Solicitar an√°lise de causa raiz",
                  "value": {
                    "message": "Me ajude a identificar as poss√≠veis causas raiz deste problema usando 5 Porqu√™s"
                  }
                },
                "sugestao_acao": {
                  "summary": "Sugest√£o de plano de a√ß√£o",
                  "value": {
                    "message": "Baseado no problema de pe√ßas rejeitadas, sugira um plano de a√ß√£o estruturado"
                  }
                },
                "revisao_analise": {
                  "summary": "Revis√£o de an√°lise existente",
                  "value": {
                    "message": "Revise minha an√°lise de Ishikawa e identifique causas que eu possa ter esquecido"
                  }
                },
                "validacao_solucao": {
                  "summary": "Valida√ß√£o de solu√ß√£o proposta",
                  "value": {
                    "message": "Planejamos trocar o fornecedor de mat√©ria-prima. Esta solu√ß√£o √© eficaz para o problema identificado?"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resposta do assistente IA com hist√≥rico completo",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "thread": {
                          "type": "object",
                          "description": "Informa√ß√µes da thread de conversa",
                          "properties": {
                            "id": {
                              "type": "string",
                              "description": "ID √∫nico da thread",
                              "example": "550e8400-e29b-41d4-a716-446655440000"
                            },
                            "agentSlug": {
                              "type": "string",
                              "example": "problem_solver"
                            },
                            "contextType": {
                              "type": "string",
                              "example": "problema_masp"
                            },
                            "contextId": {
                              "type": "string",
                              "example": "1"
                            },
                            "title": {
                              "type": "string",
                              "example": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o"
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "active",
                                "archived",
                                "closed",
                                "paused"
                              ],
                              "example": "active"
                            },
                            "messageCount": {
                              "type": "number",
                              "example": 4
                            },
                            "createdAt": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        },
                        "messages": {
                          "type": "array",
                          "description": "Hist√≥rico completo de mensagens da conversa",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "role": {
                                "type": "string",
                                "enum": [
                                  "user",
                                  "assistant",
                                  "system"
                                ],
                                "description": "user = mensagem do usu√°rio, assistant = resposta da IA"
                              },
                              "content": {
                                "type": "string",
                                "description": "Conte√∫do da mensagem"
                              },
                              "contentType": {
                                "type": "string",
                                "enum": [
                                  "text",
                                  "markdown",
                                  "json"
                                ],
                                "default": "text"
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "thread": {
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "agentSlug": "problem_solver",
                      "agentName": "Problem Solver",
                      "contextType": "problema_masp",
                      "contextId": "1",
                      "title": "Redu√ß√£o de desperd√≠cio na linha de produ√ß√£o",
                      "status": "active",
                      "messageCount": 4,
                      "createdAt": "2025-12-24T10:30:00.000Z"
                    },
                    "messages": [
                      {
                        "id": "msg-1",
                        "role": "user",
                        "content": "Quais s√£o as pr√≥ximas etapas do MASP?",
                        "contentType": "text",
                        "createdAt": "2025-12-24T10:30:00.000Z"
                      },
                      {
                        "id": "msg-2",
                        "role": "assistant",
                        "content": "Com base no seu projeto MASP sobre redu√ß√£o de desperd√≠cio, as pr√≥ximas etapas s√£o:\n\n1. **Observa√ß√£o (O)**: Coletar dados...\n2. **An√°lise (A)**: Identificar causas raiz...\n3. **Plano de A√ß√£o (P)**: Definir contramedidas...",
                        "contentType": "text",
                        "createdAt": "2025-12-24T10:30:15.000Z"
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Mensagem inv√°lida ou muito longa",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string"
                    }
                  }
                },
                "examples": {
                  "mensagem_vazia": {
                    "summary": "Mensagem vazia",
                    "value": {
                      "success": false,
                      "error": "Mensagem √© obrigat√≥ria"
                    }
                  },
                  "mensagem_longa": {
                    "summary": "Mensagem muito longa",
                    "value": {
                      "success": false,
                      "error": "Mensagem muito longa (m√°ximo 4000 caracteres)"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado - Token inv√°lido ou ausente"
          },
          "403": {
            "description": "Acesso negado - Projeto pertence a outra empresa"
          },
          "404": {
            "description": "Projeto n√£o encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "Projeto 999 n√£o encontrado"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/etapas/{etapa_id}/advance": {
      "post": {
        "summary": "Avan√ßar etapa para em andamento",
        "tags": [
          "Resolu√ß√£o de Problemas - Workflow"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "projeto_id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "etapa_id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Etapa marcada como em andamento"
          }
        }
      }
    },
    "/resolucao-problemas/projetos/{projeto_id}/etapas/{etapa_id}/complete": {
      "post": {
        "summary": "Concluir etapa e avan√ßar pr√≥xima automaticamente",
        "tags": [
          "Resolu√ß√£o de Problemas - Workflow"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "projeto_id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "etapa_id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "observacoes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Etapa conclu√≠da"
          }
        }
      }
    },
    "/search-terms": {
      "post": {
        "summary": "Criar novo termo de busca",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSearchTermData"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Termo de busca criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou termo j√° existe"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "get": {
        "summary": "Listar termos de busca com filtros e pagina√ß√£o",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "categoria",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar por categoria"
          },
          {
            "in": "query",
            "name": "ativo",
            "schema": {
              "type": "boolean"
            },
            "description": "Filtrar por status ativo/inativo"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Buscar por termo ou descri√ß√£o"
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "N√∫mero da p√°gina"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "description": "Registros por p√°gina"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de termos de busca",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/ListSearchTermsResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/search-terms/{id}": {
      "get": {
        "summary": "Buscar termo de busca por ID",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do termo de busca"
          }
        ],
        "responses": {
          "200": {
            "description": "Termo de busca encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Termo de busca n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "put": {
        "summary": "Atualizar termo de busca",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do termo de busca"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSearchTermData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Termo de busca atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos ou termo j√° existe"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Termo de busca n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      },
      "delete": {
        "summary": "Remover termo de busca (soft delete)",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID do termo de busca"
          }
        ],
        "responses": {
          "200": {
            "description": "Termo de busca removido com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Termo de busca removido com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Termo de busca n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/search-terms/categories": {
      "get": {
        "summary": "Listar categorias dispon√≠veis",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de categorias",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermCategoriesResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/search-terms/stats": {
      "get": {
        "summary": "Obter estat√≠sticas dos termos de busca",
        "tags": [
          "Search Terms"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estat√≠sticas dos termos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SearchTermStatsResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/sessions": {
      "post": {
        "summary": "Criar uma nova sess√£o",
        "description": "Cria uma nova sess√£o de usu√°rio para autentica√ß√£o.\nSuporta compartilhamento de dispositivo onde clientes web e extens√£o podem compartilhar a mesma sess√£o via device_id.\nAplica limites de sess√£o da empresa baseados no plano de assinatura.\n",
        "tags": [
          "Sess√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "user_id",
                  "empresa_id",
                  "device_id",
                  "refresh_token_hash",
                  "device_fingerprint",
                  "client_type",
                  "expires_at"
                ],
                "properties": {
                  "user_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "user-uuid"
                  },
                  "empresa_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "empresa-uuid"
                  },
                  "device_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "refresh_token_hash": {
                    "type": "string",
                    "example": "hashed_token_value"
                  },
                  "device_fingerprint": {
                    "type": "string",
                    "example": "fp_1234567890abcdef"
                  },
                  "client_type": {
                    "type": "string",
                    "enum": [
                      "web",
                      "extension"
                    ],
                    "example": "web"
                  },
                  "expires_at": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-09-16T11:15:00Z"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Metadados adicionais da sess√£o"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sess√£o criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/SessionResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisi√ß√£o inv√°lidos"
          },
          "403": {
            "description": "Limite de sess√µes atingido"
          },
          "409": {
            "description": "Conflito de sess√£o (dispositivo j√° possui sess√£o ativa)"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/sessions/{sessionId}/validate": {
      "post": {
        "summary": "Validar uma sess√£o",
        "description": "Valida uma sess√£o existente com verifica√ß√µes de seguran√ßa abrangentes.\nAtualiza o timestamp da √∫ltima atividade e realiza valida√ß√£o de impress√£o digital do dispositivo.\n",
        "tags": [
          "Sess√µes"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da sess√£o para validar",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "device_id",
                  "device_fingerprint",
                  "client_type"
                ],
                "properties": {
                  "device_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "device_fingerprint": {
                    "type": "string",
                    "example": "fp_1234567890abcdef"
                  },
                  "client_type": {
                    "type": "string",
                    "enum": [
                      "web",
                      "extension"
                    ],
                    "example": "web"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resultado da valida√ß√£o da sess√£o",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "valid": {
                          "type": "boolean",
                          "example": true
                        },
                        "session": {
                          "$ref": "#/components/schemas/SessionResponse"
                        },
                        "security_warning": {
                          "type": "string",
                          "description": "Aviso de seguran√ßa se aplic√°vel",
                          "example": "A impress√£o digital do dispositivo foi alterada"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisi√ß√£o inv√°lidos"
          },
          "404": {
            "description": "Sess√£o n√£o encontrada"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/sessions/{sessionId}": {
      "delete": {
        "summary": "Revogar uma sess√£o",
        "description": "Revoga (encerra) uma sess√£o existente.\nApenas o propriet√°rio da sess√£o ou administrador pode revogar uma sess√£o.\nA revoga√ß√£o afeta tanto o acesso web quanto da extens√£o para o dispositivo.\n",
        "tags": [
          "Sess√µes"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "ID da sess√£o para revogar",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "device_id",
                  "reason",
                  "revoked_by"
                ],
                "properties": {
                  "device_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "reason": {
                    "type": "string",
                    "example": "user_logout"
                  },
                  "revoked_by": {
                    "type": "string",
                    "format": "uuid",
                    "example": "user-uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sess√£o revogada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Sess√£o revogada com sucesso"
                        },
                        "session_id": {
                          "type": "string",
                          "format": "uuid",
                          "example": "123e4567-e89b-12d3-a456-426614174000"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados da requisi√ß√£o inv√°lidos"
          },
          "403": {
            "description": "Dispositivo incompat√≠vel - n√£o √© poss√≠vel revogar sess√£o de dispositivo diferente"
          },
          "404": {
            "description": "Sess√£o n√£o encontrada"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/sessions/revoke-others": {
      "post": {
        "summary": "Revogar todas as outras sess√µes",
        "description": "Revoga todas as sess√µes do usu√°rio atual exceto o dispositivo atual.\nUsado para funcionalidade \"sair de outros dispositivos\".\n",
        "tags": [
          "Sess√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "user_id",
                  "keep_device_id",
                  "reason",
                  "revoked_by"
                ],
                "properties": {
                  "user_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "user-uuid"
                  },
                  "keep_device_id": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  },
                  "reason": {
                    "type": "string",
                    "example": "logout_other_devices"
                  },
                  "revoked_by": {
                    "type": "string",
                    "format": "uuid",
                    "example": "user-uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Outras sess√µes revogadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "3 sess√£o(√µes) revogada(s) com sucesso"
                        },
                        "revoked_count": {
                          "type": "number",
                          "example": 3
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request data"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/sessions/active": {
      "get": {
        "summary": "Listar sess√µes ativas do usu√°rio",
        "description": "Lista todas as sess√µes ativas do usu√°rio atual.\nInclui informa√ß√µes sobre dispositivos, tipos de cliente e atividade recente.\n",
        "tags": [
          "Sess√µes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de sess√µes ativas retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "device_id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "device_fingerprint": {
                            "type": "string"
                          },
                          "client_type": {
                            "type": "string",
                            "enum": [
                              "web",
                              "extension"
                            ]
                          },
                          "status": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "last_activity": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "expires_at": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "ip_address": {
                            "type": "string"
                          },
                          "user_agent": {
                            "type": "string"
                          },
                          "is_current": {
                            "type": "boolean"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/subscriptions": {
      "post": {
        "summary": "Create new product subscription",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "produtoId",
                  "billingCycle",
                  "value"
                ],
                "properties": {
                  "produtoId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "billingCycle": {
                    "type": "string",
                    "enum": [
                      "WEEKLY",
                      "BIWEEKLY",
                      "MONTHLY",
                      "QUARTERLY",
                      "SEMIANNUALLY",
                      "YEARLY"
                    ]
                  },
                  "value": {
                    "type": "number",
                    "minimum": 0
                  },
                  "hasTrial": {
                    "type": "boolean",
                    "default": false
                  },
                  "trialDays": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "maxPayments": {
                    "type": "integer",
                    "minimum": 1,
                    "nullable": true
                  },
                  "description": {
                    "type": "string"
                  },
                  "externalReference": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subscription created successfully"
          },
          "400": {
            "description": "Invalid data"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Product not found"
          }
        }
      },
      "get": {
        "summary": "List subscriptions with filters",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "empresaId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "produtoId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "active",
                "trialing",
                "past_due",
                "canceled",
                "suspended",
                "expired"
              ]
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "in": "query",
            "name": "offset",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of subscriptions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "empresaId": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "produtoId": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "asaasSubscriptionId": {
                                "type": "string"
                              },
                              "asaasInvoiceUrl": {
                                "type": "string",
                                "nullable": true,
                                "description": "URL da fatura no Asaas para cadastro de cart√£o (trials)"
                              },
                              "status": {
                                "type": "string",
                                "enum": [
                                  "pending_payment_method",
                                  "active",
                                  "trialing",
                                  "past_due",
                                  "canceled",
                                  "suspended",
                                  "expired"
                                ]
                              },
                              "billingCycle": {
                                "type": "string"
                              },
                              "billingCycleDescription": {
                                "type": "string"
                              },
                              "value": {
                                "type": "number"
                              },
                              "valueFormatted": {
                                "type": "string"
                              },
                              "hasTrial": {
                                "type": "boolean"
                              },
                              "trialDays": {
                                "type": "integer",
                                "nullable": true
                              },
                              "trialEndDate": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                              },
                              "isInTrial": {
                                "type": "boolean"
                              },
                              "nextDueDate": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "firstPaymentDate": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                              },
                              "lastPaymentDate": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                              },
                              "maxPayments": {
                                "type": "integer",
                                "nullable": true
                              },
                              "paymentsCount": {
                                "type": "integer"
                              },
                              "remainingPayments": {
                                "type": "integer",
                                "nullable": true
                              },
                              "description": {
                                "type": "string",
                                "nullable": true
                              },
                              "externalReference": {
                                "type": "string",
                                "nullable": true
                              },
                              "metadata": {
                                "type": "object"
                              },
                              "startDate": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "endDate": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                              },
                              "canceledAt": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                              },
                              "suspendedAt": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              },
                              "updatedAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            }
                          }
                        },
                        "total": {
                          "type": "integer"
                        },
                        "limit": {
                          "type": "integer"
                        },
                        "offset": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/subscriptions/trial": {
      "post": {
        "summary": "Criar trial com valida√ß√£o de cart√£o obrigat√≥ria",
        "description": "Cria trial de 7 dias que exige cadastro de cart√£o antes de ativar",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "produtoId",
                  "asaasCustomerId"
                ],
                "properties": {
                  "produtoId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "asaasCustomerId": {
                    "type": "string"
                  },
                  "trialDays": {
                    "type": "integer",
                    "default": 7
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Trial criado - redirecionar para invoiceUrl",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "subscription": {
                      "type": "object"
                    },
                    "invoiceUrl": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/subscriptions/trial/{id}": {
      "get": {
        "summary": "Get trial subscription details",
        "description": "Retrieve detailed information about a trial subscription including status, days remaining, card registration status, and access control",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Subscription ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Trial subscription details retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "empresaId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "produtoId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "pending_payment_method",
                            "trialing",
                            "active",
                            "past_due",
                            "canceled",
                            "suspended",
                            "expired"
                          ]
                        },
                        "statusDescription": {
                          "type": "string"
                        },
                        "hasTrial": {
                          "type": "boolean"
                        },
                        "trialDays": {
                          "type": "integer",
                          "nullable": true
                        },
                        "trialEndDate": {
                          "type": "string",
                          "format": "date",
                          "nullable": true
                        },
                        "trialStarted": {
                          "type": "boolean"
                        },
                        "trialExpired": {
                          "type": "boolean"
                        },
                        "daysRemaining": {
                          "type": "integer",
                          "nullable": true
                        },
                        "cardRegistrationUrl": {
                          "type": "string",
                          "nullable": true
                        },
                        "cardRegistered": {
                          "type": "boolean"
                        },
                        "canAccessService": {
                          "type": "boolean"
                        },
                        "accessDeniedReason": {
                          "type": "string",
                          "nullable": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Access denied - subscription belongs to different empresa"
          },
          "404": {
            "description": "Subscription not found"
          }
        }
      }
    },
    "/subscriptions/trial/{id}/cancel": {
      "post": {
        "summary": "Cancel trial subscription",
        "description": "Cancel a trial subscription immediately. The subscription will be marked as canceled and access will be denied.",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Subscription ID"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "reason": {
                    "type": "string",
                    "description": "Optional reason for cancellation",
                    "example": "Customer request"
                  },
                  "cancelInAsaas": {
                    "type": "boolean",
                    "description": "Whether to cancel in Asaas API as well (default false)",
                    "default": false
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Trial subscription canceled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Subscription canceled successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Access denied - subscription belongs to different empresa"
          },
          "404": {
            "description": "Subscription not found"
          }
        }
      }
    },
    "/subscriptions/{id}": {
      "get": {
        "summary": "Get subscription by ID",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription found"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Subscription not found"
          }
        }
      }
    },
    "/subscriptions/{id}/cancel": {
      "post": {
        "summary": "Cancel subscription",
        "tags": [
          "Subscriptions"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "reason": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Subscription canceled successfully"
          },
          "400": {
            "description": "Subscription already canceled"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Subscription not found"
          }
        }
      }
    },
    "/webhooks/asaas": {
      "post": {
        "summary": "Handle Asaas webhooks",
        "tags": [
          "Webhooks"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook processed successfully"
          },
          "400": {
            "description": "Invalid webhook data"
          }
        }
      }
    },
    "/webhooks/asaas/subscription": {
      "post": {
        "summary": "Handle Asaas subscription webhooks",
        "description": "Receives webhook events from Asaas for subscription lifecycle events (PAYMENT_CREATED, PAYMENT_CONFIRMED, PAYMENT_FAILED)",
        "tags": [
          "Webhooks"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "event": {
                    "type": "string",
                    "enum": [
                      "PAYMENT_CREATED",
                      "PAYMENT_CONFIRMED",
                      "PAYMENT_FAILED"
                    ]
                  },
                  "payment": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "subscription": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook received and processed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "received": {
                      "type": "boolean",
                      "example": true
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid webhook signature"
          }
        }
      }
    },
    "/workers/leads-temp/status": {
      "get": {
        "summary": "Obter status do worker de importa√ß√£o de leads tempor√°rios",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status do worker recuperado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "isRunning": {
                          "type": "boolean"
                        },
                        "errorCount": {
                          "type": "number"
                        },
                        "maxErrors": {
                          "type": "number"
                        },
                        "lastProcessedTime": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "config": {
                          "type": "object"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/leads-temp/start": {
      "post": {
        "summary": "Iniciar worker de importa√ß√£o de leads tempor√°rios",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Worker iniciado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker started successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Worker j√° est√° em execu√ß√£o"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/leads-temp/stop": {
      "post": {
        "summary": "Parar worker de importa√ß√£o de leads tempor√°rios",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Worker parado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker parado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/leads-temp/consumer/start": {
      "post": {
        "summary": "Iniciar servi√ßo de consumidor de mensagens",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Consumer iniciado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Consumer iniciado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/leads-temp/consumer/stop": {
      "post": {
        "summary": "Parar servi√ßo de consumidor de mensagens",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Consumer parado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Consumer parado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/leads-temp/consumer/status": {
      "get": {
        "summary": "Obter status do servi√ßo de consumidor de mensagens",
        "tags": [
          "Workers"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status do consumer recuperado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "isStarted": {
                          "type": "boolean"
                        },
                        "consumerCount": {
                          "type": "number"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles": {
      "get": {
        "summary": "Obter status de todos os workers",
        "description": "Retorna o status atual de todos os workers (habilitado/desabilitado e concurrency)",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Status dos workers obtido com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "googleMapsLinksPublisher": {
                          "type": "object",
                          "properties": {
                            "enabled": {
                              "type": "boolean",
                              "example": true
                            },
                            "concurrency": {
                              "type": "number",
                              "example": 2
                            }
                          }
                        },
                        "googleMapsDetailsConsumer": {
                          "type": "object",
                          "properties": {
                            "enabled": {
                              "type": "boolean",
                              "example": false
                            },
                            "concurrency": {
                              "type": "number",
                              "example": 1
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles/{workerName}/enable": {
      "post": {
        "summary": "Habilitar um worker espec√≠fico",
        "description": "Habilita um worker espec√≠fico para processamento",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "workerName",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "googleMapsLinksPublisher",
                "googleMapsDetailsConsumer",
                "leads-temp-processor"
              ]
            },
            "description": "Nome do worker a ser habilitado",
            "example": "googleMapsLinksPublisher"
          }
        ],
        "responses": {
          "200": {
            "description": "Worker habilitado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker googleMapsLinksPublisher habilitado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nome do worker √© obrigat√≥rio"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Worker n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles/{workerName}/disable": {
      "post": {
        "summary": "Desabilitar um worker espec√≠fico",
        "description": "Desabilita um worker espec√≠fico para interromper o processamento",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "workerName",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "googleMapsLinksPublisher",
                "googleMapsDetailsConsumer",
                "leads-temp-processor"
              ]
            },
            "description": "Nome do worker a ser desabilitado",
            "example": "googleMapsDetailsConsumer"
          }
        ],
        "responses": {
          "200": {
            "description": "Worker desabilitado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Worker googleMapsDetailsConsumer desabilitado com sucesso"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nome do worker √© obrigat√≥rio"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Worker n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles/{workerName}/concurrency": {
      "put": {
        "summary": "Atualizar concurrency de um worker",
        "description": "Atualiza o n√∫mero de inst√¢ncias concorrentes de um worker",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "workerName",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "googleMapsLinksPublisher",
                "googleMapsDetailsConsumer",
                "leads-temp-processor"
              ]
            },
            "description": "Nome do worker",
            "example": "googleMapsLinksPublisher"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "concurrency"
                ],
                "properties": {
                  "concurrency": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "N√∫mero de inst√¢ncias concorrentes",
                    "example": 5
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Concurrency atualizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Concurrency do worker googleMapsLinksPublisher atualizada para 5"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Dados inv√°lidos (nome do worker obrigat√≥rio ou concurrency inv√°lido)"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Worker n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    },
    "/workers/toggles/{workerName}/config": {
      "get": {
        "summary": "Obter configura√ß√£o de um worker espec√≠fico",
        "description": "Retorna a configura√ß√£o atual de um worker espec√≠fico (habilitado/desabilitado e concurrency)",
        "tags": [
          "Workers",
          "Feature Toggle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "workerName",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "googleMapsLinksPublisher",
                "googleMapsDetailsConsumer",
                "leads-temp-processor"
              ]
            },
            "description": "Nome do worker",
            "example": "googleMapsLinksPublisher"
          }
        ],
        "responses": {
          "200": {
            "description": "Configura√ß√£o do worker obtida com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "enabled": {
                          "type": "boolean",
                          "example": true
                        },
                        "concurrency": {
                          "type": "number",
                          "example": 2
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Nome do worker √© obrigat√≥rio"
          },
          "401": {
            "description": "N√£o autorizado"
          },
          "404": {
            "description": "Worker n√£o encontrado"
          },
          "500": {
            "description": "Erro interno do servidor"
          }
        }
      }
    }
  }
}